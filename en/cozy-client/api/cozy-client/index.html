



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-client/api/cozy-client/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Cozy Client API - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-app-publish.git", "subdir": "."}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-client-js", "repo": "https://github.com/cozy/cozy-client-js.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "konitor", "repo": "https://github.com/konnectors/konitor.git", "subdir": "docs"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#classes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Cozy Client API
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/cozy.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../tutorials/app/" title="Tutorials" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../getting-started/" title="Libraries" class="md-tabs__link md-tabs__link--active">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../cozy-banks/" title="Applications" class="md-tabs__link">
          Applications
        </a>
      
    </li>
  

  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/cozy.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhost-debian/" title="Self-Host on Debian" class="md-nav__link">
      Self-Host on Debian
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1" checked>
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1" checked>
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../metadata/" title="cozyMetadata maintenance" class="md-nav__link">
      cozyMetadata maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../details/" title="Other details" class="md-nav__link">
      Other details
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cozy Client API
      </label>
    
    <a href="./" title="Cozy Client API" class="md-nav__link md-nav__link--active">
      Cozy Client API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" title="Classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" title="Functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#association" title="Association" class="md-nav__link">
    Association
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-associationtarget-name-doctype-options" title="new Association(target, name, doctype, options)" class="md-nav__link">
    new Association(target, name, doctype, options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationtarget-object" title="association.target : object" class="md-nav__link">
    association.target : object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationname-string" title="association.name : string" class="md-nav__link">
    association.name : string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdoctype-string" title="association.doctype : string" class="md-nav__link">
    association.doctype : string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationget-function" title="association.get : function" class="md-nav__link">
    association.get : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationsave-function" title="association.save : function" class="md-nav__link">
    association.save : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdispatch-function" title="association.dispatch : function" class="md-nav__link">
    association.dispatch : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationraw" title="association.raw" class="md-nav__link">
    association.raw
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdata" title="association.data" class="md-nav__link">
    association.data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationqueryquerydefinition" title="association.query(queryDefinition)" class="md-nav__link">
    association.query(queryDefinition)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationmutate" title="association.mutate()" class="md-nav__link">
    association.mutate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationquery-querydefinition" title="Association.query() ⇒ QueryDefinition" class="md-nav__link">
    Association.query() ⇒ QueryDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmany" title="HasMany" class="md-nav__link">
    HasMany
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-hasmany" title="new HasMany()" class="md-nav__link">
    new HasMany()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasmanyaddbyid" title="hasMany.addById()" class="md-nav__link">
    hasMany.addById()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmanyinplace" title="HasManyInPlace" class="md-nav__link">
    HasManyInPlace
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-hasmanyinplace" title="new HasManyInPlace()" class="md-nav__link">
    new HasManyInPlace()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmanytriggers-hasmany" title="HasManyTriggers ⇐ HasMany" class="md-nav__link">
    HasManyTriggers ⇐ HasMany
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hasmanytriggersaddbyid" title="hasManyTriggers.addById()" class="md-nav__link">
    hasManyTriggers.addById()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasmanytriggersquery" title="HasManyTriggers.query()" class="md-nav__link">
    HasManyTriggers.query()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclient" title="CozyClient" class="md-nav__link">
    CozyClient
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-cozyclientoptions" title="new CozyClient(options)" class="md-nav__link">
    new CozyClient(options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientregisterplugin" title="cozyClient.registerPlugin()" class="md-nav__link">
    cozyClient.registerPlugin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientlogin-promise" title="cozyClient.login() ⇒ Promise" class="md-nav__link">
    cozyClient.login() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientlogout-promise" title="cozyClient.logout() ⇒ Promise" class="md-nav__link">
    cozyClient.logout() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientcollectiondoctype-documentcollection" title="cozyClient.collection(doctype) ⇒ DocumentCollection" class="md-nav__link">
    cozyClient.collection(doctype) ⇒ DocumentCollection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetdocumentsaveplandocument-relationships-arraymutation" title="cozyClient.getDocumentSavePlan(document, relationships) ⇒ Array.&lt;Mutation&gt;" class="md-nav__link">
    cozyClient.getDocumentSavePlan(document, relationships) ⇒ Array.&lt;Mutation&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfetchrelationships" title="cozyClient.fetchRelationships()" class="md-nav__link">
    cozyClient.fetchRelationships()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthydratedocument" title="cozyClient.hydrateDocument()" class="md-nav__link">
    cozyClient.hydrateDocument()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientmakenewdocument" title="cozyClient.makeNewDocument()" class="md-nav__link">
    cozyClient.makeNewDocument()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetassociation" title="cozyClient.getAssociation()" class="md-nav__link">
    cozyClient.getAssociation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetrelationshipstoreaccessors" title="cozyClient.getRelationshipStoreAccessors()" class="md-nav__link">
    cozyClient.getRelationshipStoreAccessors()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetcollectionfromstatetype-arraydocument" title="cozyClient.getCollectionFromState(type) ⇒ Array.&lt;Document&gt;" class="md-nav__link">
    cozyClient.getCollectionFromState(type) ⇒ Array.&lt;Document&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetdocumentfromstatetype-id-document" title="cozyClient.getDocumentFromState(type, id) ⇒ Document" class="md-nav__link">
    cozyClient.getDocumentFromState(type, id) ⇒ Document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetqueryfromstateid-querystate" title="cozyClient.getQueryFromState(id) ⇒ QueryState" class="md-nav__link">
    cozyClient.getQueryFromState(id) ⇒ QueryState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientregistercozyurl-object" title="cozyClient.register(cozyURL) ⇒ object" class="md-nav__link">
    cozyClient.register(cozyURL) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientstartoauthflowopenurlcallback-object" title="cozyClient.startOAuthFlow(openURLCallback) ⇒ object" class="md-nav__link">
    cozyClient.startOAuthFlow(openURLCallback) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientrenewauthorization-object" title="cozyClient.renewAuthorization() ⇒ object" class="md-nav__link">
    cozyClient.renewAuthorization() ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientsetstorestore" title="cozyClient.setStore(store)" class="md-nav__link">
    cozyClient.setStore(store)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthandlerevocationchange" title="cozyClient.handleRevocationChange()" class="md-nav__link">
    cozyClient.handleRevocationChange()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthandletokenrefresh" title="cozyClient.handleTokenRefresh()" class="md-nav__link">
    cozyClient.handleTokenRefresh()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientcreateclient" title="cozyClient.createClient()" class="md-nav__link">
    cozyClient.createClient()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientsetdatadata" title="cozyClient.setData(data)" class="md-nav__link">
    cozyClient.setData(data)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfetchpolicies" title="CozyClient.fetchPolicies" class="md-nav__link">
    CozyClient.fetchPolicies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetchpoliciesolderthandelay-function" title="fetchPolicies.olderThan(delay) ⇒ function" class="md-nav__link">
    fetchPolicies.olderThan(delay) ⇒ function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetchpoliciesnofetch" title="fetchPolicies.noFetch()" class="md-nav__link">
    fetchPolicies.noFetch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfromoldclient" title="CozyClient.fromOldClient()" class="md-nav__link">
    CozyClient.fromOldClient()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfromenv" title="CozyClient.fromEnv()" class="md-nav__link">
    CozyClient.fromEnv()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querydefinition" title="QueryDefinition" class="md-nav__link">
    QueryDefinition
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-querydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip" title="new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)" class="md-nav__link">
    new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitiongetbyidid-querydefinition" title="queryDefinition.getById(id) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.getById(id) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitiongetbyidsids-querydefinition" title="queryDefinition.getByIds(ids) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.getByIds(ids) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionwhereselector-querydefinition" title="queryDefinition.where(selector) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.where(selector) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionselectfields-querydefinition" title="queryDefinition.select(fields) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.select(fields) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionindexfieldsfields-querydefinition" title="queryDefinition.indexFields(fields) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.indexFields(fields) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionsortbysort-querydefinition" title="queryDefinition.sortBy(sort) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.sortBy(sort) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionincludeincludes-querydefinition" title="queryDefinition.include(includes) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.include(includes) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionlimitbylimit-querydefinition" title="queryDefinition.limitBy(limit) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.limitBy(limit) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionoffsetskip-querydefinition" title="queryDefinition.offset(skip) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.offset(skip) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionoffsetcursorcursor-querydefinition" title="queryDefinition.offsetCursor(cursor) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.offsetCursor(cursor) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionreferencedbydocument-querydefinition" title="queryDefinition.referencedBy(document) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.referencedBy(document) ⇒ QueryDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema" title="Schema" class="md-nav__link">
    Schema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schemagetdoctypeschema" title="schema.getDoctypeSchema()" class="md-nav__link">
    schema.getDoctypeSchema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemagetrelationship" title="schema.getRelationship()" class="md-nav__link">
    schema.getRelationship()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemavalidate" title="schema.validate()" class="md-nav__link">
    schema.validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#withclientcomponent-function" title="withClient(Component) ⇒ function" class="md-nav__link">
    withClient(Component) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryconnectqueryspecs-function" title="queryConnect(querySpecs) ⇒ function" class="md-nav__link">
    queryConnect(querySpecs) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanitizecategories" title="sanitizeCategories()" class="md-nav__link">
    sanitizeCategories()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanitizemanifest-manifest" title="sanitize(manifest) ⇒ Manifest" class="md-nav__link">
    sanitize(manifest) ⇒ Manifest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#currentresult-hydratedquerystate" title="currentResult() ⇒ HydratedQueryState" class="md-nav__link">
    currentResult() ⇒ HydratedQueryState
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetchmore" title="fetchMore()" class="md-nav__link">
    fetchMore()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelablepromise-augmentedpromise" title="cancelable(promise) ⇒ AugmentedPromise" class="md-nav__link">
    cancelable(promise) ⇒ AugmentedPromise
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cozy-pouch-link/" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-ui/" title="Build a UI (ui)" class="md-nav__link">
      Build a UI (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Session logins" class="md-nav__link">
      Session logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-4" type="checkbox" id="nav-4-1-4">
    
    <label class="md-nav__link" for="nav-4-1-4">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-4">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2-1" type="checkbox" id="nav-4-2-1">
    
    <label class="md-nav__link" for="nav-4-2-1">
      Scrape data (konnector-libs)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-2-1">
        Scrape data (konnector-libs)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../konitor/cli/" title="konitor" class="md-nav__link">
      konitor
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-1" type="checkbox" id="nav-4-5-1">
    
    <label class="md-nav__link" for="nav-4-5-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-5-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-1-2" type="checkbox" id="nav-4-5-1-2">
    
    <label class="md-nav__link" for="nav-4-5-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-5-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-1-3" type="checkbox" id="nav-4-5-1-3">
    
    <label class="md-nav__link" for="nav-4-5-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-5-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-1-4" type="checkbox" id="nav-4-5-1-4">
    
    <label class="md-nav__link" for="nav-4-5-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-5-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-1-5" type="checkbox" id="nav-4-5-1-5">
    
    <label class="md-nav__link" for="nav-4-5-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-5-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/konnectors/" title="/apps - Konnectors" class="md-nav__link">
       /apps - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Applications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Applications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Cozy Banks
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Cozy Banks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/account-types/" title="Bank account types" class="md-nav__link">
      Bank account types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/bills-matching/" title="Matching algorithm" class="md-nav__link">
      Matching algorithm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/brand-dictionary/" title="Brands dictionary" class="md-nav__link">
      Brands dictionary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/demo/" title="Demo tricks" class="md-nav__link">
      Demo tricks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/override-cordova-config/" title="Override Cordova project config.xml" class="md-nav__link">
      Override Cordova project config.xml
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/services/" title="Services" class="md-nav__link">
      Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-banks/docs/tracking/" title="Tracking" class="md-nav__link">
      Tracking
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" title="Classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" title="Functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#association" title="Association" class="md-nav__link">
    Association
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-associationtarget-name-doctype-options" title="new Association(target, name, doctype, options)" class="md-nav__link">
    new Association(target, name, doctype, options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationtarget-object" title="association.target : object" class="md-nav__link">
    association.target : object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationname-string" title="association.name : string" class="md-nav__link">
    association.name : string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdoctype-string" title="association.doctype : string" class="md-nav__link">
    association.doctype : string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationget-function" title="association.get : function" class="md-nav__link">
    association.get : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationsave-function" title="association.save : function" class="md-nav__link">
    association.save : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdispatch-function" title="association.dispatch : function" class="md-nav__link">
    association.dispatch : function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationraw" title="association.raw" class="md-nav__link">
    association.raw
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationdata" title="association.data" class="md-nav__link">
    association.data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationqueryquerydefinition" title="association.query(queryDefinition)" class="md-nav__link">
    association.query(queryDefinition)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationmutate" title="association.mutate()" class="md-nav__link">
    association.mutate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#associationquery-querydefinition" title="Association.query() ⇒ QueryDefinition" class="md-nav__link">
    Association.query() ⇒ QueryDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmany" title="HasMany" class="md-nav__link">
    HasMany
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-hasmany" title="new HasMany()" class="md-nav__link">
    new HasMany()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasmanyaddbyid" title="hasMany.addById()" class="md-nav__link">
    hasMany.addById()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmanyinplace" title="HasManyInPlace" class="md-nav__link">
    HasManyInPlace
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-hasmanyinplace" title="new HasManyInPlace()" class="md-nav__link">
    new HasManyInPlace()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasmanytriggers-hasmany" title="HasManyTriggers ⇐ HasMany" class="md-nav__link">
    HasManyTriggers ⇐ HasMany
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hasmanytriggersaddbyid" title="hasManyTriggers.addById()" class="md-nav__link">
    hasManyTriggers.addById()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasmanytriggersquery" title="HasManyTriggers.query()" class="md-nav__link">
    HasManyTriggers.query()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclient" title="CozyClient" class="md-nav__link">
    CozyClient
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-cozyclientoptions" title="new CozyClient(options)" class="md-nav__link">
    new CozyClient(options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientregisterplugin" title="cozyClient.registerPlugin()" class="md-nav__link">
    cozyClient.registerPlugin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientlogin-promise" title="cozyClient.login() ⇒ Promise" class="md-nav__link">
    cozyClient.login() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientlogout-promise" title="cozyClient.logout() ⇒ Promise" class="md-nav__link">
    cozyClient.logout() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientcollectiondoctype-documentcollection" title="cozyClient.collection(doctype) ⇒ DocumentCollection" class="md-nav__link">
    cozyClient.collection(doctype) ⇒ DocumentCollection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetdocumentsaveplandocument-relationships-arraymutation" title="cozyClient.getDocumentSavePlan(document, relationships) ⇒ Array.&lt;Mutation&gt;" class="md-nav__link">
    cozyClient.getDocumentSavePlan(document, relationships) ⇒ Array.&lt;Mutation&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfetchrelationships" title="cozyClient.fetchRelationships()" class="md-nav__link">
    cozyClient.fetchRelationships()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthydratedocument" title="cozyClient.hydrateDocument()" class="md-nav__link">
    cozyClient.hydrateDocument()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientmakenewdocument" title="cozyClient.makeNewDocument()" class="md-nav__link">
    cozyClient.makeNewDocument()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetassociation" title="cozyClient.getAssociation()" class="md-nav__link">
    cozyClient.getAssociation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetrelationshipstoreaccessors" title="cozyClient.getRelationshipStoreAccessors()" class="md-nav__link">
    cozyClient.getRelationshipStoreAccessors()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetcollectionfromstatetype-arraydocument" title="cozyClient.getCollectionFromState(type) ⇒ Array.&lt;Document&gt;" class="md-nav__link">
    cozyClient.getCollectionFromState(type) ⇒ Array.&lt;Document&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetdocumentfromstatetype-id-document" title="cozyClient.getDocumentFromState(type, id) ⇒ Document" class="md-nav__link">
    cozyClient.getDocumentFromState(type, id) ⇒ Document
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientgetqueryfromstateid-querystate" title="cozyClient.getQueryFromState(id) ⇒ QueryState" class="md-nav__link">
    cozyClient.getQueryFromState(id) ⇒ QueryState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientregistercozyurl-object" title="cozyClient.register(cozyURL) ⇒ object" class="md-nav__link">
    cozyClient.register(cozyURL) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientstartoauthflowopenurlcallback-object" title="cozyClient.startOAuthFlow(openURLCallback) ⇒ object" class="md-nav__link">
    cozyClient.startOAuthFlow(openURLCallback) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientrenewauthorization-object" title="cozyClient.renewAuthorization() ⇒ object" class="md-nav__link">
    cozyClient.renewAuthorization() ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientsetstorestore" title="cozyClient.setStore(store)" class="md-nav__link">
    cozyClient.setStore(store)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthandlerevocationchange" title="cozyClient.handleRevocationChange()" class="md-nav__link">
    cozyClient.handleRevocationChange()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclienthandletokenrefresh" title="cozyClient.handleTokenRefresh()" class="md-nav__link">
    cozyClient.handleTokenRefresh()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientcreateclient" title="cozyClient.createClient()" class="md-nav__link">
    cozyClient.createClient()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientsetdatadata" title="cozyClient.setData(data)" class="md-nav__link">
    cozyClient.setData(data)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfetchpolicies" title="CozyClient.fetchPolicies" class="md-nav__link">
    CozyClient.fetchPolicies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetchpoliciesolderthandelay-function" title="fetchPolicies.olderThan(delay) ⇒ function" class="md-nav__link">
    fetchPolicies.olderThan(delay) ⇒ function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetchpoliciesnofetch" title="fetchPolicies.noFetch()" class="md-nav__link">
    fetchPolicies.noFetch()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfromoldclient" title="CozyClient.fromOldClient()" class="md-nav__link">
    CozyClient.fromOldClient()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozyclientfromenv" title="CozyClient.fromEnv()" class="md-nav__link">
    CozyClient.fromEnv()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querydefinition" title="QueryDefinition" class="md-nav__link">
    QueryDefinition
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-querydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip" title="new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)" class="md-nav__link">
    new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitiongetbyidid-querydefinition" title="queryDefinition.getById(id) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.getById(id) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitiongetbyidsids-querydefinition" title="queryDefinition.getByIds(ids) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.getByIds(ids) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionwhereselector-querydefinition" title="queryDefinition.where(selector) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.where(selector) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionselectfields-querydefinition" title="queryDefinition.select(fields) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.select(fields) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionindexfieldsfields-querydefinition" title="queryDefinition.indexFields(fields) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.indexFields(fields) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionsortbysort-querydefinition" title="queryDefinition.sortBy(sort) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.sortBy(sort) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionincludeincludes-querydefinition" title="queryDefinition.include(includes) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.include(includes) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionlimitbylimit-querydefinition" title="queryDefinition.limitBy(limit) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.limitBy(limit) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionoffsetskip-querydefinition" title="queryDefinition.offset(skip) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.offset(skip) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionoffsetcursorcursor-querydefinition" title="queryDefinition.offsetCursor(cursor) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.offsetCursor(cursor) ⇒ QueryDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querydefinitionreferencedbydocument-querydefinition" title="queryDefinition.referencedBy(document) ⇒ QueryDefinition" class="md-nav__link">
    queryDefinition.referencedBy(document) ⇒ QueryDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema" title="Schema" class="md-nav__link">
    Schema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schemagetdoctypeschema" title="schema.getDoctypeSchema()" class="md-nav__link">
    schema.getDoctypeSchema()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemagetrelationship" title="schema.getRelationship()" class="md-nav__link">
    schema.getRelationship()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemavalidate" title="schema.validate()" class="md-nav__link">
    schema.validate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#withclientcomponent-function" title="withClient(Component) ⇒ function" class="md-nav__link">
    withClient(Component) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queryconnectqueryspecs-function" title="queryConnect(querySpecs) ⇒ function" class="md-nav__link">
    queryConnect(querySpecs) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanitizecategories" title="sanitizeCategories()" class="md-nav__link">
    sanitizeCategories()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanitizemanifest-manifest" title="sanitize(manifest) ⇒ Manifest" class="md-nav__link">
    sanitize(manifest) ⇒ Manifest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#currentresult-hydratedquerystate" title="currentResult() ⇒ HydratedQueryState" class="md-nav__link">
    currentResult() ⇒ HydratedQueryState
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetchmore" title="fetchMore()" class="md-nav__link">
    fetchMore()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelablepromise-augmentedpromise" title="cancelable(promise) ⇒ AugmentedPromise" class="md-nav__link">
    cancelable(promise) ⇒ AugmentedPromise
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-client/api/cozy-client.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Cozy Client API</h1>
                
                <h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#Association">Association</a></dt>
<dd><p>Associations are used by components to access related store documents that are
linked in a document. They are also responsible for building the <code>QueryDefinition</code> that is
used by the client to automatically fetch relationship data.</p>
<p>Hydrated documents used by components come with Association instances.</p>
</dd>
<dt><a href="#HasMany">HasMany</a></dt>
<dd><p>Related documents are stored in the relationships attribute of the object,
following the JSON API spec.</p>
<p>Responsible for</p>
<ul>
<li>Creating relationships</li>
<li>Removing relationships</li>
</ul>
</dd>
<dt><a href="#HasManyInPlace">HasManyInPlace</a></dt>
<dd><p>Used when related documents are stored directly under the attribute with
only the ids.</p>
</dd>
<dt><a href="#HasManyTriggers">HasManyTriggers</a> ⇐ <code><a href="#HasMany">HasMany</a></code></dt>
<dd><p>Association used for konnectors to retrieve all their related triggers.</p>
</dd>
<dt><a href="#CozyClient">CozyClient</a></dt>
<dd><p>Responsible for</p>
<ul>
<li>Creating observable queries</li>
<li>Hydration</li>
<li>Creating plan for saving documents</li>
<li>Associations</li>
</ul>
</dd>
<dt><a href="#QueryDefinition">QueryDefinition</a></dt>
<dd><p>Chainable API to create query definitions to retrieve documents
from a Cozy. <code>QueryDefinition</code>s are sent to links.</p>
</dd>
<dt><a href="#Schema">Schema</a></dt>
<dd><p>Stores information on a particular doctype.</p>
<ul>
<li>Attribute validation</li>
<li>Relationship access</li>
</ul>
<pre><code class="language-javascript">const schema = new Schema({
  todos: {
    attributes: {
      label: {
        unique: true
      }
    },
    relationships: {
      author: &#39;has-one-in-place&#39;
    }
  }
}, cozyStackClient)
</code></pre>
</dd>
</dl>

<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#withClient">withClient(Component)</a> ⇒ <code>function</code></dt>
<dd><p>HOC to provide client from context as prop</p>
</dd>
<dt><a href="#queryConnect">queryConnect(querySpecs)</a> ⇒ <code>function</code></dt>
<dd><p>HOC creator to connect component to several queries in a declarative manner</p>
</dd>
<dt><a href="#sanitizeCategories">sanitizeCategories()</a></dt>
<dd><p>Filters unauthorized categories. Defaults to [&#39;others&#39;] if no suitable category.</p>
</dd>
<dt><a href="#sanitize">sanitize(manifest)</a> ⇒ <code>Manifest</code></dt>
<dd><p>Normalize app manifest, retrocompatibility for old manifests</p>
</dd>
<dt><a href="#currentResult">currentResult()</a> ⇒ <code>HydratedQueryState</code></dt>
<dd><p>Returns the query from the store with hydrated documents.</p>
</dd>
<dt><a href="#fetchMore">fetchMore()</a></dt>
<dd><p>Generates and execute a query that is offsetted by the number of documents
we have in the store.</p>
</dd>
<dt><a href="#cancelable">cancelable(promise)</a> ⇒ <code>AugmentedPromise</code></dt>
<dd><p>Wraps a promise so that it can be canceled</p>
<p>Rejects with canceled: true as soon as cancel is called</p>
</dd>
</dl>

<p><a name="Association"></a></p>
<h2 id="association">Association<a class="headerlink" href="#association" title="Permanent link">&para;</a></h2>
<p>Associations are used by components to access related store documents that are
linked in a document. They are also responsible for building the <code>QueryDefinition</code> that is
used by the client to automatically fetch relationship data.</p>
<p>Hydrated documents used by components come with Association instances.</p>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#Association">Association</a><ul>
<li><a href="#new_Association_new">new Association(target, name, doctype, options)</a></li>
<li><em>instance</em><ul>
<li><a href="#Association+target">.target</a> : <code>object</code></li>
<li><a href="#Association+name">.name</a> : <code>string</code></li>
<li><a href="#Association+doctype">.doctype</a> : <code>string</code></li>
<li><a href="#Association+get">.get</a> : <code>function</code></li>
<li><a href="#Association+save">.save</a> : <code>function</code></li>
<li><a href="#Association+dispatch">.dispatch</a> : <code>function</code></li>
<li><a href="#Association+raw">.raw</a></li>
<li><a href="#Association+data">.data</a></li>
<li><a href="#Association+query">.query(queryDefinition)</a></li>
<li><a href="#Association+mutate">.mutate()</a></li>
</ul>
</li>
<li><em>static</em><ul>
<li><a href="#Association.query">.query()</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="new_Association_new"></a></p>
<h3 id="new-associationtarget-name-doctype-options">new Association(target, name, doctype, options)<a class="headerlink" href="#new-associationtarget-name-doctype-options" title="Permanent link">&para;</a></h3>
<p>Example: The schema defines an <code>author</code> relationship :</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">BOOK_SCHEMA</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">relationships</span><span class="o">:</span> <span class="p">{</span>
     <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;has-one&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Hydrated <code>books</code> will have the <code>author</code> association instance under the <code>author</code> key.
Accessing <code>hydratedBook.author.data</code> gives you the author from the store, for example :</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;St-Exupery&quot;</span><span class="p">,</span>
  <span class="nt">&quot;firstName&quot;</span><span class="p">:</span> <span class="s2">&quot;Antoine&quot;</span><span class="p">,</span>
  <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;antoine&quot;</span>
<span class="p">}</span>
</pre></div>


<p>It is the responsibility of the relationship to decide how the relationship data is stored.
For example, here since we use the default <code>has-one</code> relationship, the relationship data
is stored in the <code>relationships</code> attribute of the original document (in our case here, our book
would be</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Le petit prince&quot;</span><span class="p">,</span>
  <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctype&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.authors&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;antoine&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>In the case of an &ldquo;in-place&rdquo; relationship, the relationship data is stored directly under the attribute named
by the relationship (in our case <code>author</code>). Our book would be</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Le petit prince&quot;</span><span class="p">,</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;antoine&quot;</span>
<span class="p">}</span>
</pre></div>


<hr />
<p>Each different type of Association may change:</p>
<ul>
<li><code>get raw</code>: how the relationship data is stored (either as per the JSON API spec or
 in a custom way)</li>
<li><code>get data</code>: how the store documents are then fetched from the store to be added to
the hydrated document (.data method). View components will access
<code>hydratedDoc[relationshipName].data</code>.</li>
<li><code>get query</code>: how to build the query to fetch related documents</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>target</td>
<td><code>object</code></td>
<td>Original object containing raw data</td>
</tr>
<tr>
<td>name</td>
<td><code>string</code></td>
<td>Attribute under which the association is stored</td>
</tr>
<tr>
<td>doctype</td>
<td><code>string</code></td>
<td>Doctype of the documents managed by the association</td>
</tr>
<tr>
<td>options.dispatch</td>
<td><code>function</code></td>
<td>Store&rsquo;s dispatch, comes from the client</td>
</tr>
<tr>
<td>options</td>
<td><code>string</code></td>
<td></td>
</tr>
</tbody>
</table>
<p><a name="Association+target"></a></p>
<h3 id="associationtarget-object">association.target : <code>object</code><a class="headerlink" href="#associationtarget-object" title="Permanent link">&para;</a></h3>
<p>The original document declaring the relationship</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+name"></a></p>
<h3 id="associationname-string">association.name : <code>string</code><a class="headerlink" href="#associationname-string" title="Permanent link">&para;</a></h3>
<p>The name of the relationship.</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="s1">&#39;author&#39;</span>
</pre></div>


<p><a name="Association+doctype"></a></p>
<h3 id="associationdoctype-string">association.doctype : <code>string</code><a class="headerlink" href="#associationdoctype-string" title="Permanent link">&para;</a></h3>
<p>Doctype of the relationship</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="s1">&#39;io.cozy.authors&#39;</span>
</pre></div>


<p><a name="Association+get"></a></p>
<h3 id="associationget-function">association.get : <code>function</code><a class="headerlink" href="#associationget-function" title="Permanent link">&para;</a></h3>
<p>Returns the document from the store</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+save"></a></p>
<h3 id="associationsave-function">association.save : <code>function</code><a class="headerlink" href="#associationsave-function" title="Permanent link">&para;</a></h3>
<p>Saves the relationship in store.</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+dispatch"></a></p>
<h3 id="associationdispatch-function">association.dispatch : <code>function</code><a class="headerlink" href="#associationdispatch-function" title="Permanent link">&para;</a></h3>
<p>Dispatch an action on the store.</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+raw"></a></p>
<h3 id="associationraw">association.raw<a class="headerlink" href="#associationraw" title="Permanent link">&para;</a></h3>
<p>Returns the raw relationship data as stored in the original document</p>
<p>For a document with relationships stored as JSON API spec:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Moby Dick&#39;</span><span class="p">,</span>
  <span class="nx">relationships</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">author</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">doctype</span><span class="o">:</span> <span class="s1">&#39;io.cozy.authors&#39;</span><span class="p">,</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;herman&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
 <span class="p">}</span>
</pre></div>


<p>Raw value will be</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;doctype&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.authors&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;herman&quot;</span>
<span class="p">}</span>
</pre></div>


<p>Derived <code>Association</code>s need to implement this method.</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+data"></a></p>
<h3 id="associationdata">association.data<a class="headerlink" href="#associationdata" title="Permanent link">&para;</a></h3>
<p>Returns the document(s) from the store</p>
<p>For document with relationships stored as JSON API spec :</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Moby Dick&#39;</span><span class="p">,</span>
  <span class="nx">relationships</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">author</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">doctype</span><span class="o">:</span> <span class="s1">&#39;io.cozy.authors&#39;</span><span class="p">,</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;herman&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
 <span class="p">}</span>
</pre></div>


<p><code>data</code> will be</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;herman&quot;</span>
  <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.authors&quot;</span><span class="p">,</span>
  <span class="nt">&quot;firstName&quot;</span><span class="p">:</span> <span class="s2">&quot;herman&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Melville&quot;</span>
<span class="p">}</span>
</pre></div>


<p>Derived <code>Association</code>s need to implement this method.</p>
<p><strong>Kind</strong>: instance property of <a href="#Association"><code>Association</code></a><br />
<a name="Association+query"></a></p>
<h3 id="associationqueryquerydefinition">association.query(queryDefinition)<a class="headerlink" href="#associationqueryquerydefinition" title="Permanent link">&para;</a></h3>
<p>Performs a query to retrieve relationship documents.</p>
<p><strong>Kind</strong>: instance method of <a href="#Association"><code>Association</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>queryDefinition</td>
<td><a href="#QueryDefinition"><code>QueryDefinition</code></a></td>
</tr>
</tbody>
</table>
<p><a name="Association+mutate"></a></p>
<h3 id="associationmutate">association.mutate()<a class="headerlink" href="#associationmutate" title="Permanent link">&para;</a></h3>
<p>Performs a mutation on the relationship.</p>
<p><strong>Kind</strong>: instance method of <a href="#Association"><code>Association</code></a><br />
<a name="Association.query"></a></p>
<h3 id="associationquery-querydefinition">Association.query() ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#associationquery-querydefinition" title="Permanent link">&para;</a></h3>
<p>Derived <code>Association</code>s need to implement this method.</p>
<p><strong>Kind</strong>: static method of <a href="#Association"><code>Association</code></a><br />
<a name="HasMany"></a></p>
<h2 id="hasmany">HasMany<a class="headerlink" href="#hasmany" title="Permanent link">&para;</a></h2>
<p>Related documents are stored in the relationships attribute of the object,
following the JSON API spec.</p>
<p>Responsible for</p>
<ul>
<li>Creating relationships</li>
<li>Removing relationships</li>
</ul>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#HasMany">HasMany</a><ul>
<li><a href="#new_HasMany_new">new HasMany()</a></li>
<li><a href="#HasMany+addById">.addById()</a></li>
</ul>
</li>
</ul>
<p><a name="new_HasMany_new"></a></p>
<h3 id="new-hasmany">new HasMany()<a class="headerlink" href="#new-hasmany" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>const schema = {
  todos: {
     doctype: &#39;io.cozy.todos&#39;,
     relationships: {
       tasks: {
         doctype: &#39;io.cozy.tasks&#39;,
         type: &#39;has-many&#39;
       }
     }
   }
}

const todo = {
  label: &quot;Protect people&#39;s privacy&quot;,
  relationships: {
    tasks: {
      data: [
        {_id: 1, _type: &#39;io.cozy.tasks&#39;},
        {_id: 2, _type: &#39;io.cozy.tasks&#39;}
      ]
    }
  }
}
</pre></div>


<p><a name="HasMany+addById"></a></p>
<h3 id="hasmanyaddbyid">hasMany.addById()<a class="headerlink" href="#hasmanyaddbyid" title="Permanent link">&para;</a></h3>
<p>Add a referenced document by id. You need to call save()
in order to synchronize your document with the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#HasMany"><code>HasMany</code></a><br />
<strong>Todo</strong></p>
<ul>
<li>[ ] We shouldn&rsquo;t create the array of relationship manually since
it&rsquo;ll not be present in the store as well.
We certainly should use something like <code>updateRelationship</code></li>
</ul>
<p><a name="HasManyInPlace"></a></p>
<h2 id="hasmanyinplace">HasManyInPlace<a class="headerlink" href="#hasmanyinplace" title="Permanent link">&para;</a></h2>
<p>Used when related documents are stored directly under the attribute with
only the ids.</p>
<p><strong>Kind</strong>: global class<br />
<a name="new_HasManyInPlace_new"></a></p>
<h3 id="new-hasmanyinplace">new HasManyInPlace()<a class="headerlink" href="#new-hasmanyinplace" title="Permanent link">&para;</a></h3>
<p>An example document representing a TODO. See as the related
tasks are represented via ids.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Protect people&#39;s privacy&quot;</span><span class="p">,</span>
  <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>Here is the <code>Schema</code> that would represent this kind of document.
Components receiving todos via <code>Query</code>s would have an instance of <code>HasManyInPlace</code>
as their <code>tasks</code> attribute.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">todos</span><span class="o">:</span> <span class="p">{</span>
     <span class="nx">doctype</span><span class="o">:</span> <span class="s1">&#39;io.cozy.todos&#39;</span><span class="p">,</span>
     <span class="nx">relationships</span><span class="o">:</span> <span class="p">{</span>
       <span class="nx">tasks</span><span class="o">:</span> <span class="p">{</span>
         <span class="nx">doctype</span><span class="o">:</span> <span class="s1">&#39;io.cozy.tasks&#39;</span><span class="p">,</span>
         <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;has-many-in-place&#39;</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Get rich&quot;</span><span class="p">,</span>
  <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p><a name="HasManyTriggers"></a></p>
<h2 id="hasmanytriggers-hasmany">HasManyTriggers ⇐ <a href="#HasMany"><code>HasMany</code></a><a class="headerlink" href="#hasmanytriggers-hasmany" title="Permanent link">&para;</a></h2>
<p>Association used for konnectors to retrieve all their related triggers.</p>
<p><strong>Kind</strong>: global class<br />
<strong>Extends</strong>: <a href="#HasMany"><code>HasMany</code></a>  </p>
<ul>
<li><a href="#HasManyTriggers">HasManyTriggers</a> ⇐ <a href="#HasMany"><code>HasMany</code></a><ul>
<li><em>instance</em><ul>
<li><a href="#HasMany+addById">.addById()</a></li>
</ul>
</li>
<li><em>static</em><ul>
<li><a href="#HasManyTriggers.query">.query()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="HasMany+addById"></a></p>
<h3 id="hasmanytriggersaddbyid">hasManyTriggers.addById()<a class="headerlink" href="#hasmanytriggersaddbyid" title="Permanent link">&para;</a></h3>
<p>Add a referenced document by id. You need to call save()
in order to synchronize your document with the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#HasManyTriggers"><code>HasManyTriggers</code></a><br />
<strong>Todo</strong></p>
<ul>
<li>[ ] We shouldn&rsquo;t create the array of relationship manually since
it&rsquo;ll not be present in the store as well.
We certainly should use something like <code>updateRelationship</code></li>
</ul>
<p><a name="HasManyTriggers.query"></a></p>
<h3 id="hasmanytriggersquery">HasManyTriggers.query()<a class="headerlink" href="#hasmanytriggersquery" title="Permanent link">&para;</a></h3>
<p>In this association the query is special, we need to fetch all the triggers
having for the &lsquo;konnector&rsquo; worker, and then filter them based on their
<code>message.konnector</code> attribute</p>
<p><strong>Kind</strong>: static method of <a href="#HasManyTriggers"><code>HasManyTriggers</code></a><br />
<a name="CozyClient"></a></p>
<h2 id="cozyclient">CozyClient<a class="headerlink" href="#cozyclient" title="Permanent link">&para;</a></h2>
<p>Responsible for</p>
<ul>
<li>Creating observable queries</li>
<li>Hydration</li>
<li>Creating plan for saving documents</li>
<li>Associations</li>
</ul>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#CozyClient">CozyClient</a><ul>
<li><a href="#new_CozyClient_new">new CozyClient(options)</a></li>
<li><em>instance</em><ul>
<li><a href="#CozyClient+registerPlugin">.registerPlugin()</a></li>
<li><a href="#CozyClient+login">.login()</a> ⇒ <code>Promise</code></li>
<li><a href="#CozyClient+logout">.logout()</a> ⇒ <code>Promise</code></li>
<li><a href="#CozyClient+collection">.collection(doctype)</a> ⇒ <code>DocumentCollection</code></li>
<li><a href="#CozyClient+getDocumentSavePlan">.getDocumentSavePlan(document, relationships)</a> ⇒ <code>Array.&lt;Mutation&gt;</code></li>
<li><a href="#CozyClient+fetchRelationships">.fetchRelationships()</a></li>
<li><a href="#CozyClient+hydrateDocument">.hydrateDocument()</a></li>
<li><a href="#CozyClient+makeNewDocument">.makeNewDocument()</a></li>
<li><a href="#CozyClient+getAssociation">.getAssociation()</a></li>
<li><a href="#CozyClient+getRelationshipStoreAccessors">.getRelationshipStoreAccessors()</a></li>
<li><a href="#CozyClient+getCollectionFromState">.getCollectionFromState(type)</a> ⇒ <code>Array.&lt;Document&gt;</code></li>
<li><a href="#CozyClient+getDocumentFromState">.getDocumentFromState(type, id)</a> ⇒ <code>Document</code></li>
<li><a href="#CozyClient+getQueryFromState">.getQueryFromState(id)</a> ⇒ <code>QueryState</code></li>
<li><a href="#CozyClient+register">.register(cozyURL)</a> ⇒ <code>object</code></li>
<li><a href="#CozyClient+startOAuthFlow">.startOAuthFlow(openURLCallback)</a> ⇒ <code>object</code></li>
<li><a href="#CozyClient+renewAuthorization">.renewAuthorization()</a> ⇒ <code>object</code></li>
<li><a href="#CozyClient+setStore">.setStore(store)</a></li>
<li><a href="#CozyClient+handleRevocationChange">.handleRevocationChange()</a></li>
<li><a href="#CozyClient+handleTokenRefresh">.handleTokenRefresh()</a></li>
<li><a href="#CozyClient+createClient">.createClient()</a></li>
<li><a href="#CozyClient+setData">.setData(data)</a></li>
</ul>
</li>
<li><em>static</em><ul>
<li><a href="#CozyClient.fetchPolicies">.fetchPolicies</a><ul>
<li><a href="#CozyClient.fetchPolicies.olderThan">.olderThan(delay)</a> ⇒ <code>function</code></li>
<li><a href="#CozyClient.fetchPolicies.noFetch">.noFetch()</a></li>
</ul>
</li>
<li><a href="#CozyClient.fromOldClient">.fromOldClient()</a></li>
<li><a href="#CozyClient.fromEnv">.fromEnv()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="new_CozyClient_new"></a></p>
<h3 id="new-cozyclientoptions">new CozyClient(options)<a class="headerlink" href="#new-cozyclientoptions" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td></td>
</tr>
<tr>
<td>options.link</td>
<td><code>Link</code></td>
<td>Backward compatibility</td>
</tr>
<tr>
<td>options.links</td>
<td><code>Array.Link</code></td>
<td>List of links</td>
</tr>
<tr>
<td>options.schema</td>
<td><code>Object</code></td>
<td>Schema description for each doctypes</td>
</tr>
<tr>
<td>options.appMetadata</td>
<td><code>Object</code></td>
<td>Metadata about the application that will be used in ensureCozyMetadata Cozy-Client will automatically call <code>this.login()</code> if provided with a token and an uri</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+registerPlugin"></a></p>
<h3 id="cozyclientregisterplugin">cozyClient.registerPlugin()<a class="headerlink" href="#cozyclientregisterplugin" title="Permanent link">&para;</a></h3>
<p>A plugin is a class whose constructor receives the client as first argument.
The main mean of interaction with the client should be with events
like &ldquo;login&rdquo;/&rdquo;logout&rdquo;.</p>
<p>The plugin system is meant to encourage separation of concerns, modularity
and testability : instead of registering events at module level, please
create a plugin that subscribes to events.</p>
<p>Plugin instances are stored internally in the <code>plugins</code> attribute of the client
and can be accessed via this mean. A plugin class must have the attribute
<code>pluginName</code> that will be use as the key in the <code>plugins</code> object.</p>
<p>Two plugins with the same <code>pluginName</code> cannot co-exist.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">class</span> <span class="nx">AlertPlugin</span> <span class="p">{</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="nx">client</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">client</span> <span class="o">=</span> <span class="nx">client</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleLogin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleLogin</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleLogin</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;logout&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">handleLogin() {</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onLoginAlert</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">handleLogout() {</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onLogoutAlert</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">AlertPlugin</span><span class="p">.</span><span class="nx">pluginName</span> <span class="o">=</span> <span class="s1">&#39;alerts&#39;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">registerPlugin</span><span class="p">(</span><span class="nx">AlertPlugin</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">onLoginAlert</span><span class="o">:</span> <span class="s1">&#39;client has logged in !&#39;</span><span class="p">,</span>
  <span class="nx">onLogoutAlert</span><span class="o">:</span> <span class="s1">&#39;client has logged out !&#39;</span>
<span class="p">})</span>

<span class="c1">// the instance of the plugin is accessible via</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">alerts</span>
</pre></div>


<p><a name="CozyClient+login"></a></p>
<h3 id="cozyclientlogin-promise">cozyClient.login() ⇒ <code>Promise</code><a class="headerlink" href="#cozyclientlogin-promise" title="Permanent link">&para;</a></h3>
<p>Notify the links that they can start and set isLogged to true.</p>
<p>On mobile, where url/token are set after instantiation, use this method
to set the token and uri via options.</p>
<p>Emits</p>
<ul>
<li>&ldquo;beforeLogin&rdquo; at the beginning, before links have been set up</li>
<li>&ldquo;login&rdquo; when the client is fully logged in and links have been set up</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - - Resolves when all links have been setup and client is fully logged in  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options.token</td>
<td><code>options.token</code></td>
<td>If passed, the token is set on the client</td>
</tr>
<tr>
<td>options.uri</td>
<td><code>options.uri</code></td>
<td>If passed, the uri is set on the client</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+logout"></a></p>
<h3 id="cozyclientlogout-promise">cozyClient.logout() ⇒ <code>Promise</code><a class="headerlink" href="#cozyclientlogout-promise" title="Permanent link">&para;</a></h3>
<p>Logs out the client and reset all the links</p>
<p>Emits</p>
<ul>
<li>&ldquo;beforeLogout&rdquo; at the beginning, before links have been reset</li>
<li>&ldquo;login&rdquo; when the client is fully logged out and links have been reset</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - - Resolves when all links have been reset and client is fully logged out<br />
<a name="CozyClient+collection"></a></p>
<h3 id="cozyclientcollectiondoctype-documentcollection">cozyClient.collection(doctype) ⇒ <code>DocumentCollection</code><a class="headerlink" href="#cozyclientcollectiondoctype-documentcollection" title="Permanent link">&para;</a></h3>
<p>Forwards to a stack client instance and returns
a <a href="https://docs.cozy.io/en/cozy-client/api/cozy-stack-client/#DocumentCollection">DocumentCollection</a> instance.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>doctype</td>
<td><code>String</code></td>
<td>The collection doctype.</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+getDocumentSavePlan"></a></p>
<h3 id="cozyclientgetdocumentsaveplandocument-relationships-arraymutation">cozyClient.getDocumentSavePlan(document, relationships) ⇒ <code>Array.&lt;Mutation&gt;</code><a class="headerlink" href="#cozyclientgetdocumentsaveplandocument-relationships-arraymutation" title="Permanent link">&para;</a></h3>
<p>Creates a list of mutations to execute to create a document and its relationships.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">baseDoc</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.todo&#39;</span><span class="p">,</span> <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Go hiking&#39;</span> <span class="p">}</span>
<span class="c1">// relations can be arrays or single objects</span>
<span class="kr">const</span> <span class="nx">relationships</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">attachments</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">12345</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.files&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">6789</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.files&#39;</span> <span class="p">}],</span>
  <span class="nx">bills</span><span class="o">:</span> <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="mi">9999</span><span class="p">,</span> <span class="nx">_type</span><span class="o">:</span> <span class="s1">&#39;io.cozy.bills&#39;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">getDocumentSavePlan</span><span class="p">(</span><span class="nx">baseDoc</span><span class="p">,</span> <span class="nx">relationships</span><span class="p">)</span>
</pre></div>


<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>Array.&lt;Mutation&gt;</code> - One or more mutation to execute  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>object</code></td>
<td>The base document to create</td>
</tr>
<tr>
<td>relationships</td>
<td><code>object</code></td>
<td>The list of relationships to add, as a dictionnary. Keys should be relationship names and values the documents to link.</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+fetchRelationships"></a></p>
<h3 id="cozyclientfetchrelationships">cozyClient.fetchRelationships()<a class="headerlink" href="#cozyclientfetchrelationships" title="Permanent link">&para;</a></h3>
<p>Fetch relationships for a response (can be several docs).
Fills the <code>relationships</code> attribute of each documents.</p>
<p>Can potentially result in several fetch requests.
Queries are optimized before being sent.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+hydrateDocument"></a></p>
<h3 id="cozyclienthydratedocument">cozyClient.hydrateDocument()<a class="headerlink" href="#cozyclienthydratedocument" title="Permanent link">&para;</a></h3>
<p>Instantiate relationships on a document</p>
<p>The original document is kept in the target attribute of
the relationship</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+makeNewDocument"></a></p>
<h3 id="cozyclientmakenewdocument">cozyClient.makeNewDocument()<a class="headerlink" href="#cozyclientmakenewdocument" title="Permanent link">&para;</a></h3>
<p>Creates (locally) a new document for the given doctype.
This document is hydrated : its relationships are there
and working.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+getAssociation"></a></p>
<h3 id="cozyclientgetassociation">cozyClient.getAssociation()<a class="headerlink" href="#cozyclientgetassociation" title="Permanent link">&para;</a></h3>
<p>Creates an association that is linked to the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+getRelationshipStoreAccessors"></a></p>
<h3 id="cozyclientgetrelationshipstoreaccessors">cozyClient.getRelationshipStoreAccessors()<a class="headerlink" href="#cozyclientgetrelationshipstoreaccessors" title="Permanent link">&para;</a></h3>
<p>Returns the accessors that are given to the relationships for them
to deal with the stores.</p>
<p>Relationships need to have access to the store to ping it when
a modification (addById/removeById etc&hellip;) has been done. This wakes
the store up, which in turn will update the <code>&lt;Query&gt;</code>s and re-render the data.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+getCollectionFromState"></a></p>
<h3 id="cozyclientgetcollectionfromstatetype-arraydocument">cozyClient.getCollectionFromState(type) ⇒ <code>Array.&lt;Document&gt;</code><a class="headerlink" href="#cozyclientgetcollectionfromstatetype-arraydocument" title="Permanent link">&para;</a></h3>
<p>Get a collection of documents from the internal store.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>Array.&lt;Document&gt;</code> - Array of documents or null if the collection does not exist.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td><code>String</code></td>
<td>Doctype of the collection</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+getDocumentFromState"></a></p>
<h3 id="cozyclientgetdocumentfromstatetype-id-document">cozyClient.getDocumentFromState(type, id) ⇒ <code>Document</code><a class="headerlink" href="#cozyclientgetdocumentfromstatetype-id-document" title="Permanent link">&para;</a></h3>
<p>Get a document from the internal store.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>Document</code> - Document or null if the object does not exist.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td><code>String</code></td>
<td>Doctype of the document</td>
</tr>
<tr>
<td>id</td>
<td><code>String</code></td>
<td>Id of the document</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+getQueryFromState"></a></p>
<h3 id="cozyclientgetqueryfromstateid-querystate">cozyClient.getQueryFromState(id) ⇒ <code>QueryState</code><a class="headerlink" href="#cozyclientgetqueryfromstateid-querystate" title="Permanent link">&para;</a></h3>
<p>Get a query from the internal store.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>QueryState</code> - - Query state or null if it does not exist.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><code>String</code></td>
<td>Id of the query (set via Query.props.as)</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+register"></a></p>
<h3 id="cozyclientregistercozyurl-object">cozyClient.register(cozyURL) ⇒ <code>object</code><a class="headerlink" href="#cozyclientregistercozyurl-object" title="Permanent link">&para;</a></h3>
<p>Performs a complete OAuth flow using a Cordova webview for auth.
The <code>register</code> method&rsquo;s name has been chosen for compat reasons with the Authentication compo.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cozyURL</td>
<td><code>string</code></td>
<td>Receives the URL of the cozy instance.</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+startOAuthFlow"></a></p>
<h3 id="cozyclientstartoauthflowopenurlcallback-object">cozyClient.startOAuthFlow(openURLCallback) ⇒ <code>object</code><a class="headerlink" href="#cozyclientstartoauthflowopenurlcallback-object" title="Permanent link">&para;</a></h3>
<p>Performs a complete OAuth flow, including updating the internal token at the end.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information. These should be stored and used to restore the client.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>openURLCallback</td>
<td><code>function</code></td>
<td>Receives the URL to present to the user as a parameter, and should return a promise that resolves with the URL the user was redirected to after accepting the permissions.</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient+renewAuthorization"></a></p>
<h3 id="cozyclientrenewauthorization-object">cozyClient.renewAuthorization() ⇒ <code>object</code><a class="headerlink" href="#cozyclientrenewauthorization-object" title="Permanent link">&para;</a></h3>
<p>Renews the token if, for instance, new permissions are required or token
has expired.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Returns</strong>: <code>object</code> - Contains the fetched token and the client information.<br />
<a name="CozyClient+setStore"></a></p>
<h3 id="cozyclientsetstorestore">cozyClient.setStore(store)<a class="headerlink" href="#cozyclientsetstorestore" title="Permanent link">&para;</a></h3>
<p>Sets the internal store of the client. Use this when you want to have cozy-client&rsquo;s
internal store colocated with your existing Redux store.</p>
<p>Typically, you would need to do this only once in your application, this is why
setStore throws if you do it twice. If you really need to set the store again,
use options.force = true.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>store</td>
<td><code>ReduxStore</code></td>
<td>A redux store</td>
</tr>
<tr>
<td>options.force</td>
<td><code>Boolean</code></td>
<td>Will deactivate throwing when client&rsquo;s store already exists</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span>const client = new CozyClient()
const store = createStore(combineReducers({
  todos: todoReducer,
  cozy: client.reducer()
})
client.setStore(store)
</pre></div>


<p><a name="CozyClient+handleRevocationChange"></a></p>
<h3 id="cozyclienthandlerevocationchange">cozyClient.handleRevocationChange()<a class="headerlink" href="#cozyclienthandlerevocationchange" title="Permanent link">&para;</a></h3>
<p>Sets public attribute and emits event related to revocation</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+handleTokenRefresh"></a></p>
<h3 id="cozyclienthandletokenrefresh">cozyClient.handleTokenRefresh()<a class="headerlink" href="#cozyclienthandletokenrefresh" title="Permanent link">&para;</a></h3>
<p>Emits event when token is refreshed</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+createClient"></a></p>
<h3 id="cozyclientcreateclient">cozyClient.createClient()<a class="headerlink" href="#cozyclientcreateclient" title="Permanent link">&para;</a></h3>
<p>If no stack client has been passed in options, creates a default stack
client and attaches handlers for revocation and token refresh.
If a stackClient has been passed in options, ensure it has handlers for
revocation and token refresh.</p>
<p>If <code>oauth</code> options are passed, stackClient is an OAuthStackClient.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient+setData"></a></p>
<h3 id="cozyclientsetdatadata">cozyClient.setData(data)<a class="headerlink" href="#cozyclientsetdatadata" title="Permanent link">&para;</a></h3>
<p>Directly set the data in the store, without using a query
This is useful for cases like Pouch replication, which wants to
set some data in the store.</p>
<p><strong>Kind</strong>: instance method of <a href="#CozyClient"><code>CozyClient</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td><code>Object</code></td>
<td _data_="[data]" doctype:="doctype:"></td>
</tr>
</tbody>
</table>
<p><a name="CozyClient.fetchPolicies"></a></p>
<h3 id="cozyclientfetchpolicies">CozyClient.fetchPolicies<a class="headerlink" href="#cozyclientfetchpolicies" title="Permanent link">&para;</a></h3>
<p>Use those fetch policies with <code>&lt;Query /&gt;</code> to limit the number of re-fetch.</p>
<p><strong>Kind</strong>: static property of <a href="#CozyClient"><code>CozyClient</code></a><br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span>const olderThan30s = CozyClient.fetchPolicies.olderThan(30 * 1000)
&lt;Query fetchPolicy={olderThan30s} /&gt;
</pre></div>


<ul>
<li><a href="#CozyClient.fetchPolicies">.fetchPolicies</a><ul>
<li><a href="#CozyClient.fetchPolicies.olderThan">.olderThan(delay)</a> ⇒ <code>function</code></li>
<li><a href="#CozyClient.fetchPolicies.noFetch">.noFetch()</a></li>
</ul>
</li>
</ul>
<p><a name="CozyClient.fetchPolicies.olderThan"></a></p>
<h4 id="fetchpoliciesolderthandelay-function">fetchPolicies.olderThan(delay) ⇒ <code>function</code><a class="headerlink" href="#fetchpoliciesolderthandelay-function" title="Permanent link">&para;</a></h4>
<p>Returns a fetchPolicy that will only re-fetch queries that are older
than <code>&lt;delay&gt;</code> ms.</p>
<p><strong>Kind</strong>: static method of <a href="#CozyClient.fetchPolicies"><code>fetchPolicies</code></a><br />
<strong>Returns</strong>: <code>function</code> - Fetch policy to be used with <code>&lt;Query /&gt;</code>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>delay</td>
<td><code>Number</code></td>
<td>Milliseconds since the query has been fetched</td>
</tr>
</tbody>
</table>
<p><a name="CozyClient.fetchPolicies.noFetch"></a></p>
<h4 id="fetchpoliciesnofetch">fetchPolicies.noFetch()<a class="headerlink" href="#fetchpoliciesnofetch" title="Permanent link">&para;</a></h4>
<p>Fetch policy that deactivates any fetching.</p>
<p><strong>Kind</strong>: static method of <a href="#CozyClient.fetchPolicies"><code>fetchPolicies</code></a><br />
<a name="CozyClient.fromOldClient"></a></p>
<h3 id="cozyclientfromoldclient">CozyClient.fromOldClient()<a class="headerlink" href="#cozyclientfromoldclient" title="Permanent link">&para;</a></h3>
<p>To help with the transition from cozy-client-js to cozy-client, it is possible to instantiate
a client with an instance of cozy-client-js.</p>
<p><strong>Kind</strong>: static method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="CozyClient.fromEnv"></a></p>
<h3 id="cozyclientfromenv">CozyClient.fromEnv()<a class="headerlink" href="#cozyclientfromenv" title="Permanent link">&para;</a></h3>
<p>In konnector/service context, CozyClient can be instantiated from environment variables</p>
<p><strong>Kind</strong>: static method of <a href="#CozyClient"><code>CozyClient</code></a><br />
<a name="QueryDefinition"></a></p>
<h2 id="querydefinition">QueryDefinition<a class="headerlink" href="#querydefinition" title="Permanent link">&para;</a></h2>
<p>Chainable API to create query definitions to retrieve documents
from a Cozy. <code>QueryDefinition</code>s are sent to links.</p>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#QueryDefinition">QueryDefinition</a><ul>
<li><a href="#new_QueryDefinition_new">new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)</a></li>
<li><a href="#QueryDefinition+getById">.getById(id)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+getByIds">.getByIds(ids)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+where">.where(selector)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+select">.select(fields)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+indexFields">.indexFields(fields)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+sortBy">.sortBy(sort)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+include">.include(includes)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+limitBy">.limitBy(limit)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+offset">.offset(skip)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+offsetCursor">.offsetCursor(cursor)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
<li><a href="#QueryDefinition+referencedBy">.referencedBy(document)</a> ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a></li>
</ul>
</li>
</ul>
<p><a name="new_QueryDefinition_new"></a></p>
<h3 id="new-querydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip">new QueryDefinition(doctype, id, ids, selector, fields, indexedFields, sort, includes, referenced, limit, skip)<a class="headerlink" href="#new-querydefinitiondoctype-id-ids-selector-fields-indexedfields-sort-includes-referenced-limit-skip" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>doctype</td>
<td><code>string</code></td>
<td>The doctype of the doc.</td>
</tr>
<tr>
<td>id</td>
<td><code>string</code></td>
<td>The id of the doc.</td>
</tr>
<tr>
<td>ids</td>
<td><code>Array</code></td>
<td>The ids of the docs.</td>
</tr>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The selector to query the docs.</td>
</tr>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to return.</td>
</tr>
<tr>
<td>indexedFields</td>
<td><code>Array</code></td>
<td>The fields to index.</td>
</tr>
<tr>
<td>sort</td>
<td><code>Array</code></td>
<td>The sorting params.</td>
</tr>
<tr>
<td>includes</td>
<td><code>string</code></td>
<td>The docs to include.</td>
</tr>
<tr>
<td>referenced</td>
<td><code>string</code></td>
<td>The referenced document.</td>
</tr>
<tr>
<td>limit</td>
<td><code>number</code></td>
<td>The document&rsquo;s limit to return.</td>
</tr>
<tr>
<td>skip</td>
<td><code>number</code></td>
<td>The number of docs to skip.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+getById"></a></p>
<h3 id="querydefinitiongetbyidid-querydefinition">queryDefinition.getById(id) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitiongetbyidid-querydefinition" title="Permanent link">&para;</a></h3>
<p>Query a single document on its id.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><code>string</code></td>
<td>The document id.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+getByIds"></a></p>
<h3 id="querydefinitiongetbyidsids-querydefinition">queryDefinition.getByIds(ids) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitiongetbyidsids-querydefinition" title="Permanent link">&para;</a></h3>
<p>Query several documents on their ids.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ids</td>
<td><code>Array</code></td>
<td>The documents ids.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+where"></a></p>
<h3 id="querydefinitionwhereselector-querydefinition">queryDefinition.where(selector) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionwhereselector-querydefinition" title="Permanent link">&para;</a></h3>
<p>Query documents with a <a href="http://docs.couchdb.org/en/latest/api/database/find.html#find-selectors">mango selector</a>.
Each field passed in the selector will be indexed, except if the indexField option is used.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>selector</td>
<td><code>Object</code></td>
<td>The Mango selector.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+select"></a></p>
<h3 id="querydefinitionselectfields-querydefinition">queryDefinition.select(fields) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionselectfields-querydefinition" title="Permanent link">&para;</a></h3>
<p>Specify which fields of each object should be returned. If it is omitted, the entire object is returned.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to return.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+indexFields"></a></p>
<h3 id="querydefinitionindexfieldsfields-querydefinition">queryDefinition.indexFields(fields) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionindexfieldsfields-querydefinition" title="Permanent link">&para;</a></h3>
<p>Specify which fields should be indexed. This prevent the automatic indexing of the mango fields.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fields</td>
<td><code>Array</code></td>
<td>The fields to index.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+sortBy"></a></p>
<h3 id="querydefinitionsortbysort-querydefinition">queryDefinition.sortBy(sort) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionsortbysort-querydefinition" title="Permanent link">&para;</a></h3>
<p>Specify how to sort documents, following the <a href="http://docs.couchdb.org/en/latest/api/database/find.html#find-sort">sort syntax</a></p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sort</td>
<td><code>Array</code></td>
<td>The list of field name and direction pairs.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+include"></a></p>
<h3 id="querydefinitionincludeincludes-querydefinition">queryDefinition.include(includes) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionincludeincludes-querydefinition" title="Permanent link">&para;</a></h3>
<p>Includes documents having a relationships with the ones queried.
For example, query albums including the photos.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>includes</td>
<td><code>Array</code></td>
<td>The documents to include.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+limitBy"></a></p>
<h3 id="querydefinitionlimitbylimit-querydefinition">queryDefinition.limitBy(limit) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionlimitbylimit-querydefinition" title="Permanent link">&para;</a></h3>
<p>Maximum number of documents returned, useful for pagination. Default is 100.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>limit</td>
<td><code>number</code></td>
<td>The document&rsquo;s limit.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+offset"></a></p>
<h3 id="querydefinitionoffsetskip-querydefinition">queryDefinition.offset(skip) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionoffsetskip-querydefinition" title="Permanent link">&para;</a></h3>
<p>Skip the first ‘n’ documents, where ‘n’ is the value specified.</p>
<p>Beware, this <a href="http://docs.couchdb.org/en/stable/ddocs/views/pagination.html#paging-alternate-method">performs badly</a> on view&rsquo;s index.
 Prefer cursor-based pagination in such situation.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>skip</td>
<td><code>number</code></td>
<td>The number of documents to skip.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+offsetCursor"></a></p>
<h3 id="querydefinitionoffsetcursorcursor-querydefinition">queryDefinition.offsetCursor(cursor) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionoffsetcursorcursor-querydefinition" title="Permanent link">&para;</a></h3>
<p>Use <a href="https://docs.cozy.io/en/cozy-stack/jsonapi/#pagination">cursor-based</a> pagination.
<em>Warning</em>: this is only useful for views.
The cursor is a [startkey, startkey_docid] array, where startkey is the view&rsquo;s key,
e.g. [&ldquo;io.cozy.photos.albums&rdquo;, &ldquo;album-id&rdquo;] and startkey_docid is the id of
the starting document of the query, e.g. &ldquo;file-id&rdquo;.
Use the last docid of each query as startkey_docid to paginate or leave blank for the first query.</p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cursor</td>
<td><code>Array</code></td>
<td>The cursor for pagination.</td>
</tr>
</tbody>
</table>
<p><a name="QueryDefinition+referencedBy"></a></p>
<h3 id="querydefinitionreferencedbydocument-querydefinition">queryDefinition.referencedBy(document) ⇒ <a href="#QueryDefinition"><code>QueryDefinition</code></a><a class="headerlink" href="#querydefinitionreferencedbydocument-querydefinition" title="Permanent link">&para;</a></h3>
<p>Use the <a href="https://docs.cozy.io/en/cozy-stack/references-docs-in-vfs/">file reference system</a></p>
<p><strong>Kind</strong>: instance method of <a href="#QueryDefinition"><code>QueryDefinition</code></a><br />
<strong>Returns</strong>: <a href="#QueryDefinition"><code>QueryDefinition</code></a> - The QueryDefinition object.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td><code>Object</code></td>
<td>The reference document</td>
</tr>
</tbody>
</table>
<p><a name="Schema"></a></p>
<h2 id="schema">Schema<a class="headerlink" href="#schema" title="Permanent link">&para;</a></h2>
<p>Stores information on a particular doctype.</p>
<ul>
<li>Attribute validation</li>
<li>Relationship access</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="nx">todos</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">attributes</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">label</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">relationships</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;has-one-in-place&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="nx">cozyStackClient</span><span class="p">)</span>
</pre></div>


<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#Schema">Schema</a><ul>
<li><a href="#Schema+getDoctypeSchema">.getDoctypeSchema()</a></li>
<li><a href="#Schema+getRelationship">.getRelationship()</a></li>
<li><a href="#Schema+validate">.validate()</a></li>
</ul>
</li>
</ul>
<p><a name="Schema+getDoctypeSchema"></a></p>
<h3 id="schemagetdoctypeschema">schema.getDoctypeSchema()<a class="headerlink" href="#schemagetdoctypeschema" title="Permanent link">&para;</a></h3>
<p>Returns the schema for a doctype</p>
<p>Creates an empty schema implicitly if it does not exist</p>
<p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br />
<a name="Schema+getRelationship"></a></p>
<h3 id="schemagetrelationship">schema.getRelationship()<a class="headerlink" href="#schemagetrelationship" title="Permanent link">&para;</a></h3>
<p>Returns the relationship for a given doctype/name</p>
<p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br />
<a name="Schema+validate"></a></p>
<h3 id="schemavalidate">schema.validate()<a class="headerlink" href="#schemavalidate" title="Permanent link">&para;</a></h3>
<p>Validates a document considering the descriptions in schema.attributes.</p>
<p><strong>Kind</strong>: instance method of <a href="#Schema"><code>Schema</code></a><br />
<a name="withClient"></a></p>
<h2 id="withclientcomponent-function">withClient(Component) ⇒ <code>function</code><a class="headerlink" href="#withclientcomponent-function" title="Permanent link">&para;</a></h2>
<p>HOC to provide client from context as prop</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>function</code> - - Component that will receive client as prop  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Component</td>
<td><code>Component</code></td>
<td>wrapped component</td>
</tr>
</tbody>
</table>
<p><a name="queryConnect"></a></p>
<h2 id="queryconnectqueryspecs-function">queryConnect(querySpecs) ⇒ <code>function</code><a class="headerlink" href="#queryconnectqueryspecs-function" title="Permanent link">&para;</a></h2>
<p>HOC creator to connect component to several queries in a declarative manner</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>function</code> - - HOC to apply to a component  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>querySpecs</td>
<td><code>object</code></td>
<td>Definition of the queries</td>
</tr>
</tbody>
</table>
<p><a name="sanitizeCategories"></a></p>
<h2 id="sanitizecategories">sanitizeCategories()<a class="headerlink" href="#sanitizecategories" title="Permanent link">&para;</a></h2>
<p>Filters unauthorized categories. Defaults to [&lsquo;others&rsquo;] if no suitable category.</p>
<p><strong>Kind</strong>: global function<br />
<a name="sanitize"></a></p>
<h2 id="sanitizemanifest-manifest">sanitize(manifest) ⇒ <code>Manifest</code><a class="headerlink" href="#sanitizemanifest-manifest" title="Permanent link">&para;</a></h2>
<p>Normalize app manifest, retrocompatibility for old manifests</p>
<p><strong>Kind</strong>: global function  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>manifest</td>
<td><code>Manifest</code></td>
</tr>
</tbody>
</table>
<p><a name="currentResult"></a></p>
<h2 id="currentresult-hydratedquerystate">currentResult() ⇒ <code>HydratedQueryState</code><a class="headerlink" href="#currentresult-hydratedquerystate" title="Permanent link">&para;</a></h2>
<p>Returns the query from the store with hydrated documents.</p>
<p><strong>Kind</strong>: global function<br />
<a name="fetchMore"></a></p>
<h2 id="fetchmore">fetchMore()<a class="headerlink" href="#fetchmore" title="Permanent link">&para;</a></h2>
<p>Generates and execute a query that is offsetted by the number of documents
we have in the store.</p>
<p><strong>Kind</strong>: global function<br />
<a name="cancelable"></a></p>
<h2 id="cancelablepromise-augmentedpromise">cancelable(promise) ⇒ <code>AugmentedPromise</code><a class="headerlink" href="#cancelablepromise-augmentedpromise" title="Permanent link">&para;</a></h2>
<p>Wraps a promise so that it can be canceled</p>
<p>Rejects with canceled: true as soon as cancel is called</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>AugmentedPromise</code> - - Promise with .cancel method  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>promise</td>
<td><code>Promise</code></td>
</tr>
</tbody>
</table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../details/" title="Other details" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Other details
              </span>
            </div>
          </a>
        
        
          <a href="../cozy-pouch-link/" title="Cozy Pouch Link API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Cozy Pouch Link API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../extra.js"></script>
      
    
  </body>
</html>