



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-konnector-libs/api/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.4.0">
    
    
      
        <title>API - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-app-publish"}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "cozy-desktop", "repo": "https://github.com/cozy-labs/cozy-desktop.git", "subdir": "doc"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-notifications", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-notifications"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "cozy-home", "repo": "https://github.com/cozy/cozy-home.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#api" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                API
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../tutorials/app/" title="Tutorials" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../cozy-client/getting-started/" title="Libraries" class="md-tabs__link">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../projects/" title="Projects" class="md-tabs__link">
          Projects
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Develop a Client-Side Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Develop a Client-Side Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/clisk-creation/" title="CliSK Creation" class="md-nav__link">
      CliSK Creation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/clisk-lib-doc/" title="Library Documentation" class="md-nav__link">
      Library Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/best-practice/" title="Best Practice" class="md-nav__link">
      Best Practice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/contributions/" title="Contributions" class="md-nav__link">
      Contributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/client-side-konnector/additional-ressources/" title="Additional Ressources" class="md-nav__link">
      Additional Ressources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Manipulate data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Manipulate data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/pouchdb/" title="PouchDB" class="md-nav__link">
      PouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/doctypes/" title="DocTypes" class="md-nav__link">
      DocTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/qualification/" title="Qualification" class="md-nav__link">
      Qualification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/translate/" title="Translate Apps" class="md-nav__link">
      Translate Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Self-Hosting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Self-Hosting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/docker/" title="Running inside Docker" class="md-nav__link">
      Running inside Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3" type="checkbox" id="nav-2-6-3">
    
    <label class="md-nav__link" for="nav-2-6-3">
      Traditional installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-6-3">
        Traditional installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-1" type="checkbox" id="nav-2-6-3-1">
    
    <label class="md-nav__link" for="nav-2-6-3-1">
      Requirements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-1">
        Requirements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/" title="What you need" class="md-nav__link">
      What you need
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/couchdb/" title="Installing CouchDB" class="md-nav__link">
      Installing CouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/nodejs/" title="Installing NodeJS" class="md-nav__link">
      Installing NodeJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-2" type="checkbox" id="nav-2-6-3-2">
    
    <label class="md-nav__link" for="nav-2-6-3-2">
      Installing cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-2">
        Installing cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/package/" title="From precompiled package" class="md-nav__link">
      From precompiled package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/sources/" title="From sources" class="md-nav__link">
      From sources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-3" type="checkbox" id="nav-2-6-3-3">
    
    <label class="md-nav__link" for="nav-2-6-3-3">
      Finalize installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-3">
        Finalize installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/nginx/" title="Nginx and certificates" class="md-nav__link">
      Nginx and certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/apache/" title="Using Apache instead of Nginx" class="md-nav__link">
      Using Apache instead of Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/create_instance/" title="Create first instance" class="md-nav__link">
      Create first instance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-4" type="checkbox" id="nav-2-6-3-4">
    
    <label class="md-nav__link" for="nav-2-6-3-4">
      Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-4">
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/more_instances/" title="Create more instances" class="md-nav__link">
      Create more instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/upgrade/" title="Upgrade cozy-stack" class="md-nav__link">
      Upgrade cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/mail/" title="Configure mail sending" class="md-nav__link">
      Configure mail sending
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/office/" title="Online edition of office documents" class="md-nav__link">
      Online edition of office documents
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/services/" title="Develop a service from your application" class="md-nav__link">
      Develop a service from your application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/run-connectors-on-local-cozy-stack/" title="Run Connectors With a Local cozy-stack" class="md-nav__link">
      Run Connectors With a Local cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1">
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/timeseries/" title="Using time series" class="md-nav__link">
      Using time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-pouch-link.md" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-ui/" title="Build the user interface (ui)" class="md-nav__link">
      Build the user interface (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.ai.chat.conversations/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.apps.suggestions/" title="App suggestions" class="md-nav__link">
      App suggestions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.coachco2/" title="CoachCO2" class="md-nav__link">
      CoachCO2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.docrules/" title="DocRules" class="md-nav__link">
      DocRules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.home.settings/" title="Home settings" class="md-nav__link">
      Home settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.notes/" title="Notes" class="md-nav__link">
      Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.timeseries/" title="Time series" class="md-nav__link">
      Time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.todos/" title="Todos" class="md-nav__link">
      Todos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.nextcloud.files/" title="Remote NextCloud files" class="md-nav__link">
      Remote NextCloud files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.organizations/" title="Bitwarden organizations" class="md-nav__link">
      Bitwarden organizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.contacts/" title="Bitwarden contacts" class="md-nav__link">
      Bitwarden contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/cc.cozycloud.announcements/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        API
      </label>
    
    <a href="./" title="API" class="md-nav__link md-nav__link--active">
      API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" title="API" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" title="Modules" class="md-nav__link">
    Modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" title="Classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constants" title="Constants" class="md-nav__link">
    Constants
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" title="Functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozybrowser" title="CozyBrowser" class="md-nav__link">
    CozyBrowser
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultoptions-object" title="defaultOptions ⇒ object ⏏" class="md-nav__link">
    defaultOptions ⇒ object ⏏
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultoptionsaddlisteners" title="defaultOptions~addListeners()" class="md-nav__link">
    defaultOptions~addListeners()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adddata" title="addData" class="md-nav__link">
    addData
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adddata_1" title="addData() ⏏" class="md-nav__link">
    addData() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclient" title="cozyClient" class="md-nav__link">
    cozyClient
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cozyclient_1" title="cozyClient ⏏" class="md-nav__link">
    cozyClient ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hydrateandfilter" title="hydrateAndFilter" class="md-nav__link">
    hydrateAndFilter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrateandfilter_1" title="hydrateAndFilter() ⏏" class="md-nav__link">
    hydrateAndFilter() ⏏
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrateandfiltersuitablecall" title="hydrateAndFilter~suitableCall()" class="md-nav__link">
    hydrateAndFilter~suitableCall()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkbankoperations" title="linkBankOperations" class="md-nav__link">
    linkBankOperations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linkbankoperations_1" title="linkBankOperations() ⏏" class="md-nav__link">
    linkBankOperations() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mkdirp" title="mkdirp" class="md-nav__link">
    mkdirp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mkdirp_1" title="mkdirp ⏏" class="md-nav__link">
    mkdirp ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalizefilename" title="normalizeFilename" class="md-nav__link">
    normalizeFilename
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normalizefilename_1" title="normalizeFilename() ⏏" class="md-nav__link">
    normalizeFilename() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#savebills" title="saveBills" class="md-nav__link">
    saveBills
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#savebills_1" title="saveBills() ⏏" class="md-nav__link">
    saveBills() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#savefiles" title="saveFiles" class="md-nav__link">
    saveFiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#savefilesentries-fields-options-contract" title="saveFiles(entries, fields, options, [contract]) ⏏" class="md-nav__link">
    saveFiles(entries, fields, options, [contract]) ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saveidentity" title="saveIdentity" class="md-nav__link">
    saveIdentity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#saveidentity_1" title="saveIdentity() ⏏" class="md-nav__link">
    saveIdentity() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signin" title="signin" class="md-nav__link">
    signin
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signin_1" title="signin() ⏏" class="md-nav__link">
    signin() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solvecaptcha" title="solveCaptcha" class="md-nav__link">
    solveCaptcha
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solvecaptcha_1" title="solveCaptcha() ⏏" class="md-nav__link">
    solveCaptcha() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updateorcreate" title="updateOrCreate" class="md-nav__link">
    updateOrCreate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updateorcreate_1" title="updateOrCreate() ⏏" class="md-nav__link">
    updateOrCreate() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" title="utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utilsfetchall" title="utils~fetchAll()" class="md-nav__link">
    utils~fetchAll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsqueryall" title="utils~queryAll()" class="md-nav__link">
    utils~queryAll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsfindduplicates" title="utils~findDuplicates()" class="md-nav__link">
    utils~findDuplicates()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsbatchupdateattributes" title="utils~batchUpdateAttributes()" class="md-nav__link">
    utils~batchUpdateAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsbatchdelete" title="utils~batchDelete()" class="md-nav__link">
    utils~batchDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsgetpdftext" title="utils~getPdfText()" class="md-nav__link">
    utils~getPdfText()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsformatdate" title="utils~formatDate()" class="md-nav__link">
    utils~formatDate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categorization" title="categorization" class="md-nav__link">
    categorization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#categorizationcreatecategorizeroptions-object" title="categorization~createCategorizer(options) ⇒ Object" class="md-nav__link">
    categorization~createCategorizer(options) ⇒ Object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#categorizationcategorizetransactions-options-arrayobject" title="categorization~categorize(transactions, options) ⇒ Array.&lt;object&gt;" class="md-nav__link">
    categorization~categorize(transactions, options) ⇒ Array.&lt;object&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#categorizationcreatecategorizeroptions" title="categorization~CreateCategorizerOptions" class="md-nav__link">
    categorization~CreateCategorizerOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basekonnector" title="BaseKonnector" class="md-nav__link">
    BaseKonnector
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-basekonnectorfetch" title="new BaseKonnector(fetch)" class="md-nav__link">
    new BaseKonnector(fetch)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorrun" title="baseKonnector.run()" class="md-nav__link">
    baseKonnector.run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectormain-promise" title="baseKonnector.main() ⇒ Promise" class="md-nav__link">
    baseKonnector.main() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorend" title="baseKonnector.end()" class="md-nav__link">
    baseKonnector.end()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorfail" title="baseKonnector.fail()" class="md-nav__link">
    baseKonnector.fail()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorreadpayload-object-null" title="baseKonnector.readPayload() ⇒ Object | null" class="md-nav__link">
    baseKonnector.readPayload() ⇒ Object | null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorinitattributes" title="baseKonnector.initAttributes()" class="md-nav__link">
    baseKonnector.initAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsaveaccountdatadata-options-promise" title="baseKonnector.saveAccountData(data, options) ⇒ Promise" class="md-nav__link">
    baseKonnector.saveAccountData(data, options) ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorgetaccountdata-object" title="baseKonnector.getAccountData() ⇒ object" class="md-nav__link">
    baseKonnector.getAccountData() ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorupdateaccountattributes" title="baseKonnector.updateAccountAttributes()" class="md-nav__link">
    baseKonnector.updateAccountAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsettwofastateoptions" title="baseKonnector.setTwoFAState(options)" class="md-nav__link">
    baseKonnector.setTwoFAState(options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorresettwofastate" title="baseKonnector.resetTwoFAState()" class="md-nav__link">
    baseKonnector.resetTwoFAState()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorwaitfortwofacodeoptions-promise" title="baseKonnector.waitForTwoFaCode(options) ⇒ Promise" class="md-nav__link">
    baseKonnector.waitForTwoFaCode(options) ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectornotifysuccessfullogin" title="baseKonnector.notifySuccessfulLogin()" class="md-nav__link">
    baseKonnector.notifySuccessfulLogin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectordeactivateautosuccessfullogin" title="baseKonnector.deactivateAutoSuccessfulLogin()" class="md-nav__link">
    baseKonnector.deactivateAutoSuccessfulLogin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsavebills-promise" title="baseKonnector.saveBills() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveBills() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsavefiles-promise" title="baseKonnector.saveFiles() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveFiles() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorupdateorcreate-promise" title="baseKonnector.updateOrCreate() ⇒ Promise" class="md-nav__link">
    baseKonnector.updateOrCreate() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsaveidentity-promise" title="baseKonnector.saveIdentity() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveIdentity() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsignin-promise" title="baseKonnector.signin() ⇒ Promise" class="md-nav__link">
    baseKonnector.signin() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorterminateerr" title="baseKonnector.terminate(err)" class="md-nav__link">
    baseKonnector.terminate(err)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorgetcozymetadatadata" title="baseKonnector.getCozyMetadata(data)" class="md-nav__link">
    baseKonnector.getCozyMetadata(data)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cookiekonnector" title="CookieKonnector" class="md-nav__link">
    CookieKonnector
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-cookiekonnectorrequestfactoryoptions" title="new CookieKonnector(requestFactoryOptions)" class="md-nav__link">
    new CookieKonnector(requestFactoryOptions)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorinitattributes-promise" title="cookieKonnector.initAttributes() ⇒ Promise" class="md-nav__link">
    cookieKonnector.initAttributes() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorend" title="cookieKonnector.end()" class="md-nav__link">
    cookieKonnector.end()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorrequestfactoryoptions-object" title="cookieKonnector.requestFactory(options) ⇒ object" class="md-nav__link">
    cookieKonnector.requestFactory(options) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorresetsession-promise" title="cookieKonnector.resetSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.resetSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorinitsession-promise" title="cookieKonnector.initSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.initSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavesession-promise" title="cookieKonnector.saveSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsignin-promise" title="cookieKonnector.signin() ⇒ Promise" class="md-nav__link">
    cookieKonnector.signin() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavefiles-promise" title="cookieKonnector.saveFiles() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveFiles() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavebills-promise" title="cookieKonnector.saveBills() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveBills() ⇒ Promise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document" title="Document" class="md-nav__link">
    Document
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentisequal" title="document.isEqual()" class="md-nav__link">
    document.isEqual()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fs" title="fs" class="md-nav__link">
    fs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed-string" title="LOGIN_FAILED : string" class="md-nav__link">
    LOGIN_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#not_existing_directory-string" title="NOT_EXISTING_DIRECTORY : string" class="md-nav__link">
    NOT_EXISTING_DIRECTORY : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down-string" title="VENDOR_DOWN : string" class="md-nav__link">
    VENDOR_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed-string" title="USER_ACTION_NEEDED : string" class="md-nav__link">
    USER_ACTION_NEEDED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_download_failed-string" title="FILE_DOWNLOAD_FAILED : string" class="md-nav__link">
    FILE_DOWNLOAD_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save_file_failed-string" title="SAVE_FILE_FAILED : string" class="md-nav__link">
    SAVE_FILE_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk_quota_exceeded-string" title="DISK_QUOTA_EXCEEDED : string" class="md-nav__link">
    DISK_QUOTA_EXCEEDED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge_asked-string" title="CHALLENGE_ASKED : string" class="md-nav__link">
    CHALLENGE_ASKED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed_too_many_attempts-string" title="LOGIN_FAILED_TOO_MANY_ATTEMPTS : string" class="md-nav__link">
    LOGIN_FAILED_TOO_MANY_ATTEMPTS : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_oauth_outdated-string" title="USER_ACTION_NEEDED_OAUTH_OUTDATED : string" class="md-nav__link">
    USER_ACTION_NEEDED_OAUTH_OUTDATED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_account_removed-string" title="USER_ACTION_NEEDED_ACCOUNT_REMOVED : string" class="md-nav__link">
    USER_ACTION_NEEDED_ACCOUNT_REMOVED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_change_password-string" title="USER_ACTION_NEEDED_CHANGE_PASSWORD : string" class="md-nav__link">
    USER_ACTION_NEEDED_CHANGE_PASSWORD : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_permissions_changed-string" title="USER_ACTION_NEEDED_PERMISSIONS_CHANGED : string" class="md-nav__link">
    USER_ACTION_NEEDED_PERMISSIONS_CHANGED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_cgu_form-string" title="USER_ACTION_NEEDED_CGU_FORM : string" class="md-nav__link">
    USER_ACTION_NEEDED_CGU_FORM : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#captcha_resolution_failed-string" title="CAPTCHA_RESOLUTION_FAILED : string" class="md-nav__link">
    CAPTCHA_RESOLUTION_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed_needs_secret-string" title="LOGIN_FAILED_NEEDS_SECRET : string" class="md-nav__link">
    LOGIN_FAILED_NEEDS_SECRET : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance-string" title="MAINTENANCE : string" class="md-nav__link">
    MAINTENANCE : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terms_version_mismatch-string" title="TERMS_VERSION_MISMATCH : string" class="md-nav__link">
    TERMS_VERSION_MISMATCH : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unknown_error-string" title="UNKNOWN_ERROR : string" class="md-nav__link">
    UNKNOWN_ERROR : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unknown_error_partial_sync-string" title="UNKNOWN_ERROR_PARTIAL_SYNC : string" class="md-nav__link">
    UNKNOWN_ERROR_PARTIAL_SYNC : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_sca_required-string" title="USER_ACTION_NEEDED_SCA_REQUIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_SCA_REQUIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_twofa_expired-string" title="USER_ACTION_NEEDED_TWOFA_EXPIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_TWOFA_EXPIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_webauth_required-string" title="USER_ACTION_NEEDED_WEBAUTH_REQUIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_WEBAUTH_REQUIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_wrong_twofa_code-string" title="USER_ACTION_NEEDED_WRONG_TWOFA_CODE : string" class="md-nav__link">
    USER_ACTION_NEEDED_WRONG_TWOFA_CODE : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down_bank_down-string" title="VENDOR_DOWN_BANK_DOWN : string" class="md-nav__link">
    VENDOR_DOWN_BANK_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down_linxo_down-string" title="VENDOR_DOWN_LINXO_DOWN : string" class="md-nav__link">
    VENDOR_DOWN_LINXO_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attachprocesseventhandlersprcs-function" title="attachProcessEventHandlers(prcs) ⇒ function" class="md-nav__link">
    attachProcessEventHandlers(prcs) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mkspec" title="mkSpec()" class="md-nav__link">
    mkSpec()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrape-specs-childselector-object-array" title="scrape($, specs, [childSelector]) ⇒ object | Array" class="md-nav__link">
    scrape($, specs, [childSelector]) ⇒ object | Array
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permissions" title="⚠ Permissions" class="md-nav__link">
    ⚠ Permissions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-notifications/" title="Send notifications (cozy-notifications)" class="md-nav__link">
      Send notifications (cozy-notifications)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1" type="checkbox" id="nav-4-6-1">
    
    <label class="md-nav__link" for="nav-4-6-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-6-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-2" type="checkbox" id="nav-4-6-1-2">
    
    <label class="md-nav__link" for="nav-4-6-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/admin/" title="Using the admin API" class="md-nav__link">
      Using the admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/important-changes/" title="Important changes" class="md-nav__link">
      Important changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-3" type="checkbox" id="nav-4-6-1-3">
    
    <label class="md-nav__link" for="nav-4-6-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/http-api/" title="Using the HTTP API" class="md-nav__link">
      Using the HTTP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/konnectors-dev/" title="Running a konnector locally" class="md-nav__link">
      Running a konnector locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-4" type="checkbox" id="nav-4-6-1-4">
    
    <label class="md-nav__link" for="nav-4-6-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/flagship/" title="Flagship app" class="md-nav__link">
      Flagship app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/move-design/" title="Move design" class="md-nav__link">
      Move design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/realtime-internals/" title="Realtime internals" class="md-nav__link">
      Realtime internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-5" type="checkbox" id="nav-4-6-1-5">
    
    <label class="md-nav__link" for="nav-4-6-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/ai/" title="/ai - AI" class="md-nav__link">
      /ai - AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/delegated-auth/" title="/oidc - Delegated authentication" class="md-nav__link">
       /oidc - Delegated authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/connection-check/" title="/connection_check - Connection check" class="md-nav__link">
      /connection_check - Connection check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/contacts/" title="/contacts - Contacts" class="md-nav__link">
      /contacts - Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/not-synchronized-vfs/" title="/files - Not synchronized directories" class="md-nav__link">
       /files - Not synchronized directories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/konnectors/" title="/konnectors - Konnectors" class="md-nav__link">
      /konnectors - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/notes/" title="/notes - Notes for collaborative edition" class="md-nav__link">
      /notes - Notes for collaborative edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/office/" title="/office - Collaborative edition of Office documents" class="md-nav__link">
      /office - Collaborative edition of Office documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/nextcloud/" title="/remote/nextcloud - NextCloud" class="md-nav__link">
       /remote/nextcloud - NextCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/shortcuts/" title="/shortcuts - Shortcuts" class="md-nav__link">
      /shortcuts - Shortcuts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/wellknown/" title="/.well-known - Well-known" class="md-nav__link">
      /.well-known - Well-known
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/" title="Documentations" class="md-nav__link">
      Documentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Cozy Desktop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Cozy Desktop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/file_systems/" title="Filesystems" class="md-nav__link">
      Filesystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/ignore_files/" title="Ignore files" class="md-nav__link">
      Ignore files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/inotify/" title="inotify" class="md-nav__link">
      inotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/limitations/" title="Limitations" class="md-nav__link">
      Limitations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/macos/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-3" type="checkbox" id="nav-5-2-3">
    
    <label class="md-nav__link" for="nav-5-2-3">
      Developer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-3">
        Developer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/api_doc/" title="API Documentation" class="md-nav__link">
      API Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/coffeescript.md" title="Cofeescript" class="md-nav__link">
      Cofeescript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/log_analysis/" title="Log analysis" class="md-nav__link">
      Log analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/setup/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/feedback/" title="Feddback" class="md-nav__link">
      Feddback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" title="API" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" title="Modules" class="md-nav__link">
    Modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" title="Classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constants" title="Constants" class="md-nav__link">
    Constants
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" title="Functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozybrowser" title="CozyBrowser" class="md-nav__link">
    CozyBrowser
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultoptions-object" title="defaultOptions ⇒ object ⏏" class="md-nav__link">
    defaultOptions ⇒ object ⏏
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defaultoptionsaddlisteners" title="defaultOptions~addListeners()" class="md-nav__link">
    defaultOptions~addListeners()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adddata" title="addData" class="md-nav__link">
    addData
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adddata_1" title="addData() ⏏" class="md-nav__link">
    addData() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclient" title="cozyClient" class="md-nav__link">
    cozyClient
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cozyclient_1" title="cozyClient ⏏" class="md-nav__link">
    cozyClient ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hydrateandfilter" title="hydrateAndFilter" class="md-nav__link">
    hydrateAndFilter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrateandfilter_1" title="hydrateAndFilter() ⏏" class="md-nav__link">
    hydrateAndFilter() ⏏
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrateandfiltersuitablecall" title="hydrateAndFilter~suitableCall()" class="md-nav__link">
    hydrateAndFilter~suitableCall()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linkbankoperations" title="linkBankOperations" class="md-nav__link">
    linkBankOperations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linkbankoperations_1" title="linkBankOperations() ⏏" class="md-nav__link">
    linkBankOperations() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mkdirp" title="mkdirp" class="md-nav__link">
    mkdirp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mkdirp_1" title="mkdirp ⏏" class="md-nav__link">
    mkdirp ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalizefilename" title="normalizeFilename" class="md-nav__link">
    normalizeFilename
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normalizefilename_1" title="normalizeFilename() ⏏" class="md-nav__link">
    normalizeFilename() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#savebills" title="saveBills" class="md-nav__link">
    saveBills
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#savebills_1" title="saveBills() ⏏" class="md-nav__link">
    saveBills() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#savefiles" title="saveFiles" class="md-nav__link">
    saveFiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#savefilesentries-fields-options-contract" title="saveFiles(entries, fields, options, [contract]) ⏏" class="md-nav__link">
    saveFiles(entries, fields, options, [contract]) ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saveidentity" title="saveIdentity" class="md-nav__link">
    saveIdentity
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#saveidentity_1" title="saveIdentity() ⏏" class="md-nav__link">
    saveIdentity() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signin" title="signin" class="md-nav__link">
    signin
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signin_1" title="signin() ⏏" class="md-nav__link">
    signin() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solvecaptcha" title="solveCaptcha" class="md-nav__link">
    solveCaptcha
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solvecaptcha_1" title="solveCaptcha() ⏏" class="md-nav__link">
    solveCaptcha() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updateorcreate" title="updateOrCreate" class="md-nav__link">
    updateOrCreate
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updateorcreate_1" title="updateOrCreate() ⏏" class="md-nav__link">
    updateOrCreate() ⏏
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils" title="utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utilsfetchall" title="utils~fetchAll()" class="md-nav__link">
    utils~fetchAll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsqueryall" title="utils~queryAll()" class="md-nav__link">
    utils~queryAll()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsfindduplicates" title="utils~findDuplicates()" class="md-nav__link">
    utils~findDuplicates()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsbatchupdateattributes" title="utils~batchUpdateAttributes()" class="md-nav__link">
    utils~batchUpdateAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsbatchdelete" title="utils~batchDelete()" class="md-nav__link">
    utils~batchDelete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsgetpdftext" title="utils~getPdfText()" class="md-nav__link">
    utils~getPdfText()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilsformatdate" title="utils~formatDate()" class="md-nav__link">
    utils~formatDate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categorization" title="categorization" class="md-nav__link">
    categorization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#categorizationcreatecategorizeroptions-object" title="categorization~createCategorizer(options) ⇒ Object" class="md-nav__link">
    categorization~createCategorizer(options) ⇒ Object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#categorizationcategorizetransactions-options-arrayobject" title="categorization~categorize(transactions, options) ⇒ Array.&lt;object&gt;" class="md-nav__link">
    categorization~categorize(transactions, options) ⇒ Array.&lt;object&gt;
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#categorizationcreatecategorizeroptions" title="categorization~CreateCategorizerOptions" class="md-nav__link">
    categorization~CreateCategorizerOptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basekonnector" title="BaseKonnector" class="md-nav__link">
    BaseKonnector
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-basekonnectorfetch" title="new BaseKonnector(fetch)" class="md-nav__link">
    new BaseKonnector(fetch)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorrun" title="baseKonnector.run()" class="md-nav__link">
    baseKonnector.run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectormain-promise" title="baseKonnector.main() ⇒ Promise" class="md-nav__link">
    baseKonnector.main() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorend" title="baseKonnector.end()" class="md-nav__link">
    baseKonnector.end()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorfail" title="baseKonnector.fail()" class="md-nav__link">
    baseKonnector.fail()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorreadpayload-object-null" title="baseKonnector.readPayload() ⇒ Object | null" class="md-nav__link">
    baseKonnector.readPayload() ⇒ Object | null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorinitattributes" title="baseKonnector.initAttributes()" class="md-nav__link">
    baseKonnector.initAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsaveaccountdatadata-options-promise" title="baseKonnector.saveAccountData(data, options) ⇒ Promise" class="md-nav__link">
    baseKonnector.saveAccountData(data, options) ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorgetaccountdata-object" title="baseKonnector.getAccountData() ⇒ object" class="md-nav__link">
    baseKonnector.getAccountData() ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorupdateaccountattributes" title="baseKonnector.updateAccountAttributes()" class="md-nav__link">
    baseKonnector.updateAccountAttributes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsettwofastateoptions" title="baseKonnector.setTwoFAState(options)" class="md-nav__link">
    baseKonnector.setTwoFAState(options)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorresettwofastate" title="baseKonnector.resetTwoFAState()" class="md-nav__link">
    baseKonnector.resetTwoFAState()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorwaitfortwofacodeoptions-promise" title="baseKonnector.waitForTwoFaCode(options) ⇒ Promise" class="md-nav__link">
    baseKonnector.waitForTwoFaCode(options) ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectornotifysuccessfullogin" title="baseKonnector.notifySuccessfulLogin()" class="md-nav__link">
    baseKonnector.notifySuccessfulLogin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectordeactivateautosuccessfullogin" title="baseKonnector.deactivateAutoSuccessfulLogin()" class="md-nav__link">
    baseKonnector.deactivateAutoSuccessfulLogin()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsavebills-promise" title="baseKonnector.saveBills() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveBills() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsavefiles-promise" title="baseKonnector.saveFiles() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveFiles() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorupdateorcreate-promise" title="baseKonnector.updateOrCreate() ⇒ Promise" class="md-nav__link">
    baseKonnector.updateOrCreate() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsaveidentity-promise" title="baseKonnector.saveIdentity() ⇒ Promise" class="md-nav__link">
    baseKonnector.saveIdentity() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorsignin-promise" title="baseKonnector.signin() ⇒ Promise" class="md-nav__link">
    baseKonnector.signin() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorterminateerr" title="baseKonnector.terminate(err)" class="md-nav__link">
    baseKonnector.terminate(err)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basekonnectorgetcozymetadatadata" title="baseKonnector.getCozyMetadata(data)" class="md-nav__link">
    baseKonnector.getCozyMetadata(data)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cookiekonnector" title="CookieKonnector" class="md-nav__link">
    CookieKonnector
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-cookiekonnectorrequestfactoryoptions" title="new CookieKonnector(requestFactoryOptions)" class="md-nav__link">
    new CookieKonnector(requestFactoryOptions)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorinitattributes-promise" title="cookieKonnector.initAttributes() ⇒ Promise" class="md-nav__link">
    cookieKonnector.initAttributes() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorend" title="cookieKonnector.end()" class="md-nav__link">
    cookieKonnector.end()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorrequestfactoryoptions-object" title="cookieKonnector.requestFactory(options) ⇒ object" class="md-nav__link">
    cookieKonnector.requestFactory(options) ⇒ object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorresetsession-promise" title="cookieKonnector.resetSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.resetSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorinitsession-promise" title="cookieKonnector.initSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.initSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavesession-promise" title="cookieKonnector.saveSession() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveSession() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsignin-promise" title="cookieKonnector.signin() ⇒ Promise" class="md-nav__link">
    cookieKonnector.signin() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavefiles-promise" title="cookieKonnector.saveFiles() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveFiles() ⇒ Promise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookiekonnectorsavebills-promise" title="cookieKonnector.saveBills() ⇒ Promise" class="md-nav__link">
    cookieKonnector.saveBills() ⇒ Promise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document" title="Document" class="md-nav__link">
    Document
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#documentisequal" title="document.isEqual()" class="md-nav__link">
    document.isEqual()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fs" title="fs" class="md-nav__link">
    fs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed-string" title="LOGIN_FAILED : string" class="md-nav__link">
    LOGIN_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#not_existing_directory-string" title="NOT_EXISTING_DIRECTORY : string" class="md-nav__link">
    NOT_EXISTING_DIRECTORY : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down-string" title="VENDOR_DOWN : string" class="md-nav__link">
    VENDOR_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed-string" title="USER_ACTION_NEEDED : string" class="md-nav__link">
    USER_ACTION_NEEDED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_download_failed-string" title="FILE_DOWNLOAD_FAILED : string" class="md-nav__link">
    FILE_DOWNLOAD_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#save_file_failed-string" title="SAVE_FILE_FAILED : string" class="md-nav__link">
    SAVE_FILE_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk_quota_exceeded-string" title="DISK_QUOTA_EXCEEDED : string" class="md-nav__link">
    DISK_QUOTA_EXCEEDED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge_asked-string" title="CHALLENGE_ASKED : string" class="md-nav__link">
    CHALLENGE_ASKED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed_too_many_attempts-string" title="LOGIN_FAILED_TOO_MANY_ATTEMPTS : string" class="md-nav__link">
    LOGIN_FAILED_TOO_MANY_ATTEMPTS : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_oauth_outdated-string" title="USER_ACTION_NEEDED_OAUTH_OUTDATED : string" class="md-nav__link">
    USER_ACTION_NEEDED_OAUTH_OUTDATED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_account_removed-string" title="USER_ACTION_NEEDED_ACCOUNT_REMOVED : string" class="md-nav__link">
    USER_ACTION_NEEDED_ACCOUNT_REMOVED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_change_password-string" title="USER_ACTION_NEEDED_CHANGE_PASSWORD : string" class="md-nav__link">
    USER_ACTION_NEEDED_CHANGE_PASSWORD : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_permissions_changed-string" title="USER_ACTION_NEEDED_PERMISSIONS_CHANGED : string" class="md-nav__link">
    USER_ACTION_NEEDED_PERMISSIONS_CHANGED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_cgu_form-string" title="USER_ACTION_NEEDED_CGU_FORM : string" class="md-nav__link">
    USER_ACTION_NEEDED_CGU_FORM : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#captcha_resolution_failed-string" title="CAPTCHA_RESOLUTION_FAILED : string" class="md-nav__link">
    CAPTCHA_RESOLUTION_FAILED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#login_failed_needs_secret-string" title="LOGIN_FAILED_NEEDS_SECRET : string" class="md-nav__link">
    LOGIN_FAILED_NEEDS_SECRET : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance-string" title="MAINTENANCE : string" class="md-nav__link">
    MAINTENANCE : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terms_version_mismatch-string" title="TERMS_VERSION_MISMATCH : string" class="md-nav__link">
    TERMS_VERSION_MISMATCH : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unknown_error-string" title="UNKNOWN_ERROR : string" class="md-nav__link">
    UNKNOWN_ERROR : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unknown_error_partial_sync-string" title="UNKNOWN_ERROR_PARTIAL_SYNC : string" class="md-nav__link">
    UNKNOWN_ERROR_PARTIAL_SYNC : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_sca_required-string" title="USER_ACTION_NEEDED_SCA_REQUIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_SCA_REQUIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_twofa_expired-string" title="USER_ACTION_NEEDED_TWOFA_EXPIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_TWOFA_EXPIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_webauth_required-string" title="USER_ACTION_NEEDED_WEBAUTH_REQUIRED : string" class="md-nav__link">
    USER_ACTION_NEEDED_WEBAUTH_REQUIRED : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user_action_needed_wrong_twofa_code-string" title="USER_ACTION_NEEDED_WRONG_TWOFA_CODE : string" class="md-nav__link">
    USER_ACTION_NEEDED_WRONG_TWOFA_CODE : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down_bank_down-string" title="VENDOR_DOWN_BANK_DOWN : string" class="md-nav__link">
    VENDOR_DOWN_BANK_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vendor_down_linxo_down-string" title="VENDOR_DOWN_LINXO_DOWN : string" class="md-nav__link">
    VENDOR_DOWN_LINXO_DOWN : string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attachprocesseventhandlersprcs-function" title="attachProcessEventHandlers(prcs) ⇒ function" class="md-nav__link">
    attachProcessEventHandlers(prcs) ⇒ function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mkspec" title="mkSpec()" class="md-nav__link">
    mkSpec()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrape-specs-childselector-object-array" title="scrape($, specs, [childSelector]) ⇒ object | Array" class="md-nav__link">
    scrape($, specs, [childSelector]) ⇒ object | Array
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permissions" title="⚠ Permissions" class="md-nav__link">
    ⚠ Permissions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-konnector-libs/api.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>API</h1>
                
                <h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>
<h2 id="modules">Modules<a class="headerlink" href="#modules" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#module_CozyBrowser">CozyBrowser</a></dt>
<dd><p>Get a javascript simulation of a real browser (jsdom)</p>
</dd>
<dt><a href="#module_addData">addData</a></dt>
<dd><p>Saves the data into the cozy blindly without check.</p>
</dd>
<dt><a href="#module_cozyClient">cozyClient</a></dt>
<dd><p><a href="https://github.com/cozy/cozy-client-js">cozy-client-js</a> instance already
initialized and ready to use.</p>
</dd>
<dt><a href="#module_hydrateAndFilter">hydrateAndFilter</a></dt>
<dd><p>Filters the passed array from data already present in the cozy so that there is
not duplicated data in the Cozy.</p>
</dd>
<dt><a href="#module_linkBankOperations">linkBankOperations</a></dt>
<dd><p>Finds links between bills and bank operations.</p>
</dd>
<dt><a href="#module_mkdirp">mkdirp</a></dt>
<dd></dd>
<dt><a href="#module_normalizeFilename">normalizeFilename</a></dt>
<dd><p>Returns the given name, replacing characters that could be an issue when
used in a filename with spaces.</p>
</dd>
<dt><a href="#module_saveBills">saveBills</a></dt>
<dd><p>Encapsulates the saving of Bills : saves the files, saves the new data, and associate the files
to an existing bank operation</p>
</dd>
<dt><a href="#module_saveFiles">saveFiles</a></dt>
<dd><p>Saves the given files in the given folder via the Cozy API.</p>
</dd>
<dt><a href="#module_saveIdentity">saveIdentity</a></dt>
<dd><p>Helper to set or merge io.cozy.identities
See <a href="https://github.com/cozy/cozy-doctypes/blob/master/docs/io.cozy.identities.md">https://github.com/cozy/cozy-doctypes/blob/master/docs/io.cozy.identities.md</a></p>
</dd>
<dt><a href="#module_signin">signin</a></dt>
<dd><p>Provides an handy method to log the user in,
on HTML form pages. On success, it resolves to a promise with a parsed body.</p>
</dd>
<dt><a href="#module_solveCaptcha">solveCaptcha</a></dt>
<dd><p>Use every possible means to solve a captcha. At the moment, Anticaptcha web service is used if
any related secret key is found in COZY_PARAMETERS environment variable.</p>
</dd>
<dt><a href="#module_updateOrCreate">updateOrCreate</a></dt>
<dd><p>Creates or updates the given entries according to if they already
exist in the cozy or not</p>
</dd>
<dt><a href="#module_utils">utils</a></dt>
<dd><p>Small utilities helping to develop konnectors.</p>
</dd>
<dt><a href="#module_categorization">categorization</a></dt>
<dd><p>Bank transactions categorization</p>
</dd>
</dl>

<h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#BaseKonnector">BaseKonnector</a></dt>
<dd><p>The class from which all the connectors must inherit.
It takes a fetch function in parameter that must return a <code>Promise</code>.
You need at least the <code>GET</code> permission on <code>io.cozy.accounts</code> in your manifest to allow it to
fetch account information for your connector.</p>
<p>Its role is twofold :</p>
<ul>
<li>Make the link between account data and konnector</li>
<li>Handle errors</li>
</ul>
<p>⚠️  A promise should be returned from the <code>fetch</code> function otherwise
the konnector cannot know that asynchronous code has been called.</p>
</dd>
<dt><a href="#CookieKonnector">CookieKonnector</a></dt>
<dd><p>Connector base class extending BaseKonnector which handles cookie session in a central way
It also handles saving cookie session in the account and automatically restore it for the next
connector run.
All cozy-konnector-libs tools using request are proposed as methods of this class to force them
to use the central cookie which can be saved/restored.
You need at least the <code>GET</code> and <code>PUT</code> permissions on <code>io.cozy.accounts</code> in your manifest to allow
it to save/restore cookies</p>
</dd>
<dt><a href="#Document">Document</a></dt>
<dd><p>Simple Model for Documents. Allows to specify
<code>shouldSave</code>, <code>shouldUpdate</code> as methods.</p>
<p>Has useful <code>isEqual</code> method</p>
</dd>
</dl>

<h2 id="constants">Constants<a class="headerlink" href="#constants" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#fs">fs</a></dt>
<dd><p>Manifest is provided differently in developement that in production.</p>
<ul>
<li><p>In production, the manifest has been &quot;merged&quot; via Webpack via the
DefinePlugin</p>
</li>
<li><p>In development/test, we simply read the manifest from the fs</p>
</li>
</ul>
</dd>
<dt><a href="#LOGIN_FAILED">LOGIN_FAILED</a> : <code>string</code></dt>
<dd><p>The konnector could not login</p>
</dd>
<dt><a href="#NOT_EXISTING_DIRECTORY">NOT_EXISTING_DIRECTORY</a> : <code>string</code></dt>
<dd><p>The folder specified as folder_to_save does not exist (checked by BaseKonnector)</p>
</dd>
<dt><a href="#VENDOR_DOWN">VENDOR_DOWN</a> : <code>string</code></dt>
<dd><p>The vendor&#39;s website is down</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED">USER_ACTION_NEEDED</a> : <code>string</code></dt>
<dd><p>There was an unexpected error, please take a look at the logs to know what happened</p>
</dd>
<dt><a href="#FILE_DOWNLOAD_FAILED">FILE_DOWNLOAD_FAILED</a> : <code>string</code></dt>
<dd><p>There was a problem while downloading a file</p>
</dd>
<dt><a href="#SAVE_FILE_FAILED">SAVE_FILE_FAILED</a> : <code>string</code></dt>
<dd><p>There was a problem while saving a file</p>
</dd>
<dt><a href="#DISK_QUOTA_EXCEEDED">DISK_QUOTA_EXCEEDED</a> : <code>string</code></dt>
<dd><p>Could not save a file to the cozy because of disk quota exceeded</p>
</dd>
<dt><a href="#CHALLENGE_ASKED">CHALLENGE_ASKED</a> : <code>string</code></dt>
<dd><p>It seems that the website requires a second authentification factor that we don’t support yet.</p>
</dd>
<dt><a href="#LOGIN_FAILED_TOO_MANY_ATTEMPTS">LOGIN_FAILED_TOO_MANY_ATTEMPTS</a> : <code>string</code></dt>
<dd><p>Temporarily blocked</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_OAUTH_OUTDATED">USER_ACTION_NEEDED_OAUTH_OUTDATED</a> : <code>string</code></dt>
<dd><p>Access refresh required</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_ACCOUNT_REMOVED">USER_ACTION_NEEDED_ACCOUNT_REMOVED</a> : <code>string</code></dt>
<dd><p>Unavailable account</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_CHANGE_PASSWORD">USER_ACTION_NEEDED_CHANGE_PASSWORD</a> : <code>string</code></dt>
<dd><p>Unavailable account</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_PERMISSIONS_CHANGED">USER_ACTION_NEEDED_PERMISSIONS_CHANGED</a> : <code>string</code></dt>
<dd><p>Password update required</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_CGU_FORM">USER_ACTION_NEEDED_CGU_FORM</a> : <code>string</code></dt>
<dd><p>The user needs to accept a CGU form before accessing the rest of the website</p>
</dd>
<dt><a href="#CAPTCHA_RESOLUTION_FAILED">CAPTCHA_RESOLUTION_FAILED</a> : <code>string</code></dt>
<dd><p>solveCaptcha failed to solve the captcha</p>
</dd>
<dt><a href="#LOGIN_FAILED_NEEDS_SECRET">LOGIN_FAILED_NEEDS_SECRET</a> : <code>string</code></dt>
<dd><p>Additionnal information is needed to check your login details</p>
</dd>
<dt><a href="#MAINTENANCE">MAINTENANCE</a> : <code>string</code></dt>
<dd><p>remote website seems to be unavailable</p>
</dd>
<dt><a href="#TERMS_VERSION_MISMATCH">TERMS_VERSION_MISMATCH</a> : <code>string</code></dt>
<dd><p>User needs to accept new terms</p>
</dd>
<dt><a href="#UNKNOWN_ERROR">UNKNOWN_ERROR</a> : <code>string</code></dt>
<dd><p>unkown error</p>
</dd>
<dt><a href="#UNKNOWN_ERROR_PARTIAL_SYNC">UNKNOWN_ERROR_PARTIAL_SYNC</a> : <code>string</code></dt>
<dd><p>The synchronization is complete but some elements may be missing</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_SCA_REQUIRED">USER_ACTION_NEEDED_SCA_REQUIRED</a> : <code>string</code></dt>
<dd><p>Renewal of authentication required</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_TWOFA_EXPIRED">USER_ACTION_NEEDED_TWOFA_EXPIRED</a> : <code>string</code></dt>
<dd><p>Authentication renewal required</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_WEBAUTH_REQUIRED">USER_ACTION_NEEDED_WEBAUTH_REQUIRED</a> : <code>string</code></dt>
<dd><p>Authentication on vendor website required</p>
</dd>
<dt><a href="#USER_ACTION_NEEDED_WRONG_TWOFA_CODE">USER_ACTION_NEEDED_WRONG_TWOFA_CODE</a> : <code>string</code></dt>
<dd><p>Incorrect strong authentication code</p>
</dd>
<dt><a href="#VENDOR_DOWN_BANK_DOWN">VENDOR_DOWN_BANK_DOWN</a> : <code>string</code></dt>
<dd><p>Unavailable bank website</p>
</dd>
<dt><a href="#VENDOR_DOWN_LINXO_DOWN">VENDOR_DOWN_LINXO_DOWN</a> : <code>string</code></dt>
<dd><p>Unavailable bank website</p>
</dd>
</dl>

<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<dl>
<dt><a href="#attachProcessEventHandlers">attachProcessEventHandlers(prcs)</a> ⇒ <code>function</code></dt>
<dd><p>Attach event handlers to catch uncaught exceptions/rejections and signals.
Log them as critical and exit the process accordingly.
If the cleanup function has not been called, calling again the function
is a no-op.</p>
</dd>
<dt><a href="#mkSpec">mkSpec()</a></dt>
<dd><p>Declarative scraping.</p>
<p>Describe your items attributes and where to find/parse them
instead of imperatively building them.</p>
<p>Heavily inspired by <a href="https://medialab.github.io/artoo/">artoo</a> scraping method.</p>
</dd>
<dt><a href="#scrape">scrape($, specs, [childSelector])</a> ⇒ <code>object</code> | <code>Array</code></dt>
<dd><p>Scrape a cheerio object for properties</p>
</dd>
</dl>

<p><a name="module_CozyBrowser"></a></p>
<h2 id="cozybrowser">CozyBrowser<a class="headerlink" href="#cozybrowser" title="Permanent link">&para;</a></h2>
<p>Get a javascript simulation of a real browser (jsdom)</p>
<ul>
<li><a href="#module_CozyBrowser">CozyBrowser</a><ul>
<li><a href="#exp_module_CozyBrowser--defaultOptions">defaultOptions</a> ⇒ <code>object</code> ⏏<ul>
<li><a href="#module_CozyBrowser--defaultOptions..addListeners">~addListeners()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="exp_module_CozyBrowser--defaultOptions"></a></p>
<h3 id="defaultoptions-object">defaultOptions ⇒ <code>object</code> ⏏<a class="headerlink" href="#defaultoptions-object" title="Permanent link">&para;</a></h3>
<p>Get a preconfigured jsdom browser simulator using the zombie npm package
See http://zombie.js.org/ for complete documentation
The connector has to import the zombie npm package itself.</p>
<p><strong>Kind</strong>: Exported constant<br />
<strong>Returns</strong>: <code>object</code> - Zombie browser extended class  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options.userAgent</td>
<td><code>string</code></td>
<td>The user agent string used by the browser</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">Browser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs/libs/CozyBrowser&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">browser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Browser</span><span class="p">()</span>
<span class="nx">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nx">visit</span><span class="p">(</span><span class="s1">&#39;http://quotes.toscrape.com/&#39;</span><span class="p">)</span>
</pre></div>


<p><a name="module_CozyBrowser--defaultOptions..addListeners"></a></p>
<h4 id="defaultoptionsaddlisteners">defaultOptions~addListeners()<a class="headerlink" href="#defaultoptionsaddlisteners" title="Permanent link">&para;</a></h4>
<p>Add cozy-konnector-libs specific logs to browser events</p>
<p><strong>Kind</strong>: inner method of <a href="#exp_module_CozyBrowser--defaultOptions"><code>defaultOptions</code></a><br />
<a name="module_addData"></a></p>
<h2 id="adddata">addData<a class="headerlink" href="#adddata" title="Permanent link">&para;</a></h2>
<p>Saves the data into the cozy blindly without check.</p>
<p><a name="exp_module_addData--addData"></a></p>
<h3 id="adddata_1">addData() ⏏<a class="headerlink" href="#adddata_1" title="Permanent link">&para;</a></h3>
<p>Saves the data into the cozy blindly without check.</p>
<p>You need at least the <code>POST</code> permission for the given doctype in your manifest, to be able to
use this function.</p>
<p>Parameters:</p>
<p><code>documents</code>: an array of objects corresponding to the data you want to save in the cozy
<code>doctype</code> (string): the doctype where you want to save data (ex: &lsquo;io.cozy.bills&rsquo;)
<code>options</code> (object): option object
  + <code>sourceAccount</code> (String): id of the source account
  + <code>sourceAccountIdentifier</code> (String): identifier unique to the account targetted by the connector. It is the login most of the time</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">documents</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;toto&#39;</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mf">1.8</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;titi&#39;</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mf">1.7</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="k">return</span> <span class="nx">addData</span><span class="p">(</span><span class="nx">documents</span><span class="p">,</span> <span class="s1">&#39;io.cozy.height&#39;</span><span class="p">)</span>
</pre></div>


<p><strong>Kind</strong>: Exported function<br />
<a name="module_cozyClient"></a></p>
<h2 id="cozyclient">cozyClient<a class="headerlink" href="#cozyclient" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/cozy/cozy-client-js">cozy-client-js</a> instance already
initialized and ready to use.</p>
<p><a name="exp_module_cozyClient--cozyClient"></a></p>
<h3 id="cozyclient_1">cozyClient ⏏<a class="headerlink" href="#cozyclient_1" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/cozy/cozy-client-js">cozy-client-js</a> instance already initialized and ready to use.</p>
<p>If you want to access cozy-client-js directly, this method gives you directly an instance of it,
initialized according to <code>COZY_URL</code> and <code>COZY_CREDENTIALS</code> environment variable given by cozy-stack
You can refer to the <a href="https://github.com/cozy/cozy-client-js">cozy-client-js documentation</a> for more information.</p>
<p>Example :</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span><span class="nx">cozyClient</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="nx">cozyClient</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">defineIndex</span><span class="p">(</span><span class="s1">&#39;my.doctype&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">])</span>
</pre></div>


<p><strong>Kind</strong>: Exported constant<br />
<a name="module_hydrateAndFilter"></a></p>
<h2 id="hydrateandfilter">hydrateAndFilter<a class="headerlink" href="#hydrateandfilter" title="Permanent link">&para;</a></h2>
<p>Filters the passed array from data already present in the cozy so that there is
not duplicated data in the Cozy.</p>
<ul>
<li><a href="#module_hydrateAndFilter">hydrateAndFilter</a><ul>
<li><a href="#exp_module_hydrateAndFilter--hydrateAndFilter">hydrateAndFilter()</a> ⏏<ul>
<li><a href="#module_hydrateAndFilter--hydrateAndFilter..suitableCall">~suitableCall()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="exp_module_hydrateAndFilter--hydrateAndFilter"></a></p>
<h3 id="hydrateandfilter_1">hydrateAndFilter() ⏏<a class="headerlink" href="#hydrateandfilter_1" title="Permanent link">&para;</a></h3>
<p>Filters the passed array from data already present in the cozy so that there is
not duplicated data in the Cozy.</p>
<p>You need at least the <code>GET</code> permission for the given doctype in your manifest, to be able to
use this function.</p>
<p>Parameters:</p>
<p><code>documents</code>: an array of objects corresponding to the data you want to save in the cozy
<code>doctype</code> (string): the doctype where you want to save data (ex: &lsquo;io.cozy.bills&rsquo;)
<code>options</code> :
   - <code>keys</code> (array) : List of keys used to check that two items are the same. By default it is set to <code>['id']'.
   -</code>index<code>(optionnal) : Return value returned by</code>cozy.data.defineIndex<code>, the default will correspond to all documents of the selected doctype.
   -</code>selector<code __id:="{_id:" _gt_:="{&quot;$gt&quot;:" null="null" selector:="selector:">(optionnal object) : Mango request to get records. Default is built from the keys</code>}}` to get all the records.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">documents</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;toto&#39;</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mf">1.8</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;titi&#39;</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mf">1.7</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="k">return</span> <span class="nx">hydrateAndFilter</span><span class="p">(</span><span class="nx">documents</span><span class="p">,</span> <span class="s1">&#39;io.cozy.height&#39;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">keys</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">filteredDocuments</span> <span class="p">=&gt;</span> <span class="nx">addData</span><span class="p">(</span><span class="nx">filteredDocuments</span><span class="p">,</span> <span class="s1">&#39;io.cozy.height&#39;</span><span class="p">))</span>
</pre></div>


<p><strong>Kind</strong>: Exported function<br />
<a name="module_hydrateAndFilter--hydrateAndFilter..suitableCall"></a></p>
<h4 id="hydrateandfiltersuitablecall">hydrateAndFilter~suitableCall()<a class="headerlink" href="#hydrateandfiltersuitablecall" title="Permanent link">&para;</a></h4>
<p>Since we can use methods or basic functions for
<code>shouldSave</code> and <code>shouldUpdate</code> we pass the
appropriate <code>this</code> and <code>arguments</code>.</p>
<p>If <code>funcOrMethod</code> is a method, it will be called
with args[0] as <code>this</code> and the rest as <code>arguments</code>
Otherwise, <code>this</code> will be null and <code>args</code> will be passed
as <code>arguments</code>.</p>
<p><strong>Kind</strong>: inner method of <a href="#exp_module_hydrateAndFilter--hydrateAndFilter"><code>hydrateAndFilter</code></a><br />
<a name="module_linkBankOperations"></a></p>
<h2 id="linkbankoperations">linkBankOperations<a class="headerlink" href="#linkbankoperations" title="Permanent link">&para;</a></h2>
<p>Finds links between bills and bank operations.</p>
<p><a name="exp_module_linkBankOperations--linkBankOperations"></a></p>
<h3 id="linkbankoperations_1">linkBankOperations() ⏏<a class="headerlink" href="#linkbankoperations_1" title="Permanent link">&para;</a></h3>
<p>Will soon move to a dedicated service. You should not use it.</p>
<p>Finds links between bills and bank operations.</p>
<p><strong>Kind</strong>: Exported function<br />
<a name="module_mkdirp"></a></p>
<h2 id="mkdirp">mkdirp<a class="headerlink" href="#mkdirp" title="Permanent link">&para;</a></h2>
<p><a name="exp_module_mkdirp--mkdirp"></a></p>
<h3 id="mkdirp_1">mkdirp ⏏<a class="headerlink" href="#mkdirp_1" title="Permanent link">&para;</a></h3>
<p>Creates a directory and its missing ancestors as needed.</p>
<p>Options :</p>
<ul>
<li><code>...pathComponents</code>:  one or many path components to be joined</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/foo&#39;</span><span class="p">)</span> <span class="c1">// Creates /foo</span>
<span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/foo&#39;</span><span class="p">)</span> <span class="c1">// Does nothing as /foo already exists</span>
<span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/bar/baz&#39;</span><span class="p">)</span> <span class="c1">// Creates /bar, then /bar/baz</span>
<span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/foo/bar/baz&#39;</span><span class="p">)</span> <span class="c1">// Creates /foo/bar, then /foo/bar/baz, not /foo</span>
<span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="c1">// Does nothing</span>
<span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;/qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux2/qux3&#39;</span><span class="p">,</span> <span class="s1">&#39;qux4&#39;</span><span class="p">)</span> <span class="c1">// Creates /qux, then /qux/qux2,</span>
                                          <span class="c1">// then /qux/qux2/qux3 and</span>
                                          <span class="c1">// finally /qux/qux2/qux3/qux4</span>
</pre></div>


<p>The function will automatically add a leading slash when missing:</p>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="nx">mkdirp</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="c1">// Creates /foo, then /foo/bar</span>
</pre></div>


<p><strong>Kind</strong>: Exported constant<br />
<a name="module_normalizeFilename"></a></p>
<h2 id="normalizefilename">normalizeFilename<a class="headerlink" href="#normalizefilename" title="Permanent link">&para;</a></h2>
<p>Returns the given name, replacing characters that could be an issue when
used in a filename with spaces.</p>
<p><a name="exp_module_normalizeFilename--normalizeFilename"></a></p>
<h3 id="normalizefilename_1">normalizeFilename() ⏏<a class="headerlink" href="#normalizefilename_1" title="Permanent link">&para;</a></h3>
<p>Returns the given name, replacing characters that could be an issue when
used in a filename with spaces.</p>
<p>Replaced characters include:</p>
<ul>
<li>Those forbidden on one or many popular OS or filesystem: <code>&lt;&gt;:"/\|?*</code></li>
<li>Those forbidden by the cozy-stack <code>\0</code>, <code>\r</code> and <code>\n</code></li>
<li>Multiple spaces and/or tabs are replaced with a single space</li>
<li>Leading &amp; trailing spaces and/or tabs are removed</li>
</ul>
<p>An exception will be thrown in case there is not any filename-compatible
character in the given name.</p>
<p>Parameters:</p>
<ul>
<li><code>basename</code> is whatever string you want to generate the filename from</li>
<li><code>ext</code> is an optional file extension, with or without leading dot</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">normalizeFilename</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">normalizeFilename</span><span class="p">(</span><span class="s1">&#39;*foo/bar: &lt;baz&gt; \\&quot;qux&quot;\t???&#39;</span><span class="p">,</span> <span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
<span class="c1">// `filename` === `foo bar baz qux.txt`</span>
</pre></div>


<p><strong>Kind</strong>: Exported function<br />
<a name="module_saveBills"></a></p>
<h2 id="savebills">saveBills<a class="headerlink" href="#savebills" title="Permanent link">&para;</a></h2>
<p>Encapsulates the saving of Bills : saves the files, saves the new data, and associate the files
to an existing bank operation</p>
<p><a name="exp_module_saveBills--saveBills"></a></p>
<h3 id="savebills_1">saveBills() ⏏<a class="headerlink" href="#savebills_1" title="Permanent link">&para;</a></h3>
<p>Combines the features of <code>saveFiles</code>, <code>hydrateAndFilter</code>, <code>addData</code> and <code>linkBankOperations</code> for a
common case: bills.
Will create <code>io.cozy.bills</code> objects. The default deduplication keys are <code>['date', 'amount', 'vendor']</code>.
You need the full permission on <code>io.cozy.bills</code>, full permission on <code>io.cozy.files</code> and also
full permission on <code>io.cozy.bank.operations</code> in your manifest, to be able to use this function.</p>
<p>Parameters:</p>
<ul>
<li><code>documents</code> is an array of objects with any attributes with some mandatory attributes :</li>
<li><code>amount</code> (Number): the amount of the bill used to match bank operations</li>
<li><code>date</code> (Date): the date of the bill also used to match bank operations</li>
<li><code>vendor</code> (String): the name of the vendor associated to the bill. Ex: &lsquo;trainline&rsquo;</li>
<li><code>currency</code> (String) default: EUR:  The ISO currency value (not mandatory since there is a
  default value.</li>
<li><code>contractId</code> (String): Contract unique identicator used to deduplicate bills</li>
<li><code>contractLabel</code>: (String) User label if define, must be used with contractId</li>
<li><code>matchingCriterias</code> (Object): criterias that can be used by an external service to match bills
  with bank operations. If not specified but the &lsquo;banksTransactionRegExp&rsquo; attribute is specified in the
  manifest of the connector, this value is automatically added to the bill</li>
</ul>
<p>You can also pass attributes expected by <code>saveFiles</code> : fileurl, filename, requestOptions
  and more</p>
<p>Please take a look at <a href="https://github.com/cozy/cozy-doctypes/blob/master/docs/io.cozy.bills.md">io.cozy.bills doctype documentation</a>
- <code>fields</code> (object) this is the first parameter given to BaseKonnector&rsquo;s constructor
- <code>options</code> is passed directly to <code>saveFiles</code>, <code>hydrateAndFilter</code>, <code>addData</code> and <code>linkBankOperations</code>.</p>
<p><strong>Kind</strong>: Exported function<br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">BaseKonnector</span><span class="p">,</span> <span class="nx">saveBills</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseKonnector</span><span class="p">(</span><span class="kd">function</span> <span class="nx">fetch</span> <span class="p">(</span><span class="nx">fields</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">documents</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="c1">// some code which fills documents</span>
  <span class="k">return</span> <span class="nx">saveBills</span><span class="p">(</span><span class="nx">documents</span><span class="p">,</span> <span class="nx">fields</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">identifiers</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vendor&#39;</span><span class="p">]</span>
  <span class="p">})</span>
<span class="p">})</span>
</pre></div>


<p><a name="module_saveFiles"></a></p>
<h2 id="savefiles">saveFiles<a class="headerlink" href="#savefiles" title="Permanent link">&para;</a></h2>
<p>Saves the given files in the given folder via the Cozy API.</p>
<p><a name="exp_module_saveFiles--saveFiles"></a></p>
<h3 id="savefilesentries-fields-options-contract">saveFiles(entries, fields, options, [contract]) ⏏<a class="headerlink" href="#savefilesentries-fields-options-contract" title="Permanent link">&para;</a></h3>
<p>Saves the files given in the fileurl attribute of each entries</p>
<p>You need the full permission on <code>io.cozy.files</code> in your manifest to use this function.</p>
<p><strong>Kind</strong>: Exported function  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entries</td>
<td><code>Array</code></td>
<td>list of object describing files to save</td>
</tr>
<tr>
<td>entries.fileurl</td>
<td><code>string</code></td>
<td>The url of the file (can be a function returning the value). Ignored if <code>filestream</code> is given</td>
</tr>
<tr>
<td>entries.fetchFile</td>
<td><code>function</code></td>
<td>the connector can give it&rsquo;s own function to fetch the file from the website, which will be run only when necessary (if the corresponding file is missing on the cozy) function returning the stream). This function must return a promise resolved as a stream</td>
</tr>
<tr>
<td>entries.filestream</td>
<td><code>object</code> | <code>string</code></td>
<td>the stream which will be directly passed to cozyClient.files.create (can also be function returning the stream)</td>
</tr>
<tr>
<td>entries.requestOptions</td>
<td><code>object</code></td>
<td>The options passed to request to fetch fileurl (can be a function returning the value)</td>
</tr>
<tr>
<td>entries.filename</td>
<td><code>string</code></td>
<td>The file name of the item written on disk. This attribute is optional and as default value, the file name will be &ldquo;smartly&rdquo; guessed by the function. Use this attribute if the guess is not smart enough for you, or if you use <code>filestream</code> (can be a function returning the value).</td>
</tr>
<tr>
<td>entries.shouldReplaceName</td>
<td><code>string</code></td>
<td>used to migrate filename. If saveFiles finds a file linked to this entry and this file name matches <code>shouldReplaceName</code>, the file is renamed to <code>filename</code> (can be a function returning the value)</td>
</tr>
<tr>
<td>entries.shouldReplaceFile</td>
<td><code>function</code></td>
<td>use this function to state if the current entry should be forced to be redownloaded and replaced. Usefull if we know the file content can change and we always want the last version.</td>
</tr>
<tr>
<td>entries.fileAttributes</td>
<td><code>object</code></td>
<td>ex: <code>{created_at: new Date()}</code> sets some additionnal file attributes passed to cozyClient.file.create</td>
</tr>
<tr>
<td>entries.subPath</td>
<td><code>string</code></td>
<td>A subpath to save all files, will be created if needed.</td>
</tr>
<tr>
<td>entries.contract</td>
<td><code>object</code></td>
<td>contract object associated to the files</td>
</tr>
<tr>
<td>entries.contract.id</td>
<td><code>string</code></td>
<td>id of the contract</td>
</tr>
<tr>
<td>entries.contract.name</td>
<td><code>string</code></td>
<td>name of the contract</td>
</tr>
<tr>
<td>fields</td>
<td><code>object</code></td>
<td>is the argument given to the main function of your connector by the BaseKonnector.  It especially contains a <code>folderPath</code> which is the string path configured by the user in collect/home</td>
</tr>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>global options</td>
</tr>
<tr>
<td>options.timeout</td>
<td><code>number</code></td>
<td>timestamp which can be used if your connector needs to fetch a lot of files and if the stack does not give enough time to your connector to fetch it all. It could happen that the connector is stopped right in the middle of the download of the file and the file will be broken. With the <code>timeout</code> option, the <code>saveFiles</code> function will check if the timeout has passed right after downloading each file and then will be sure to be stopped cleanly if the timeout is not too long. And since it is really fast to check that a file has already been downloaded, on the next run of the connector, it will be able to download some more files, and so on. If you want the timeout to be in 10s, do <code>Date.now() + 10*1000</code>.  You can try it in the previous code.</td>
</tr>
<tr>
<td>options.contentType</td>
<td><code>number</code> | <code>boolean</code></td>
<td>ex: &lsquo;application/pdf&rsquo; used to force the contentType of documents when they are badly recognized by cozy. If &ldquo;true&rdquo; the content type will be recognized from the file name and forced the same way.</td>
</tr>
<tr>
<td>options.concurrency</td>
<td><code>number</code></td>
<td>default: <code>1</code> sets the maximum number of concurrent downloads</td>
</tr>
<tr>
<td>options.validateFile</td>
<td><code>function</code></td>
<td>default: do not validate if file is empty or has bad mime type</td>
</tr>
<tr>
<td>options.validateFileContent</td>
<td><code>boolean</code> | <code>function</code></td>
<td>default false. Also check the content of the file to recognize the mime type</td>
</tr>
<tr>
<td>options.fileIdAttributes</td>
<td><code>Array</code></td>
<td>array of strings : Describes which attributes of files will be taken as primary key for files to check if they already exist, even if they are moved. If not given, the file path will used for deduplication as before.</td>
</tr>
<tr>
<td>options.subPath</td>
<td><code>string</code></td>
<td>A subpath to save this file, will be created if needed.</td>
</tr>
<tr>
<td>[contract]</td>
<td><code>object</code></td>
<td>contract object associated to the file</td>
</tr>
<tr>
<td>[contract.id]</td>
<td><code>string</code></td>
<td>id of the contract</td>
</tr>
<tr>
<td>[contract.name]</td>
<td><code>string</code></td>
<td>name of the contract</td>
</tr>
<tr>
<td>options.fetchFile</td>
<td><code>function</code></td>
<td>the connector can give it&rsquo;s own function to fetch the file from the website, which will be run only when necessary (if the corresponding file is missing on the cozy) function returning the stream). This function must return a promise resolved as a stream</td>
</tr>
<tr>
<td>options.verboseFilesLog</td>
<td><code>boolean</code></td>
<td>the connector will send saveFiles result as a warning</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="nx">saveFiles</span><span class="p">([{</span><span class="nx">fileurl</span><span class="o">:</span> <span class="s1">&#39;https://...&#39;</span><span class="p">,</span> <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;bill1.pdf&#39;</span><span class="p">}],</span> <span class="nx">fields</span><span class="p">,</span> <span class="p">{</span>
   <span class="nx">fileIdAttributes</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;fileurl&#39;</span><span class="p">]</span>
<span class="p">})</span>
</pre></div>


<p><a name="module_saveIdentity"></a></p>
<h2 id="saveidentity">saveIdentity<a class="headerlink" href="#saveidentity" title="Permanent link">&para;</a></h2>
<p>Helper to set or merge io.cozy.identities
See https://github.com/cozy/cozy-doctypes/blob/master/docs/io.cozy.identities.md</p>
<p><a name="exp_module_saveIdentity--saveIdentity"></a></p>
<h3 id="saveidentity_1">saveIdentity() ⏏<a class="headerlink" href="#saveidentity_1" title="Permanent link">&para;</a></h3>
<p>Set or merge a io.cozy.identities</p>
<p>You need full permission for the doctype io.cozy.identities in your
manifest, to be able to use this function.
Parameters:</p>
<p><code>identity</code> (object): the identity to create/update as an io.cozy.identities object
<code>accountIdentifier</code> (string): a string that represent the account use, if available fields.login
<code>options</code> (object): options which will be given to updateOrCreate directly :
  + <code>sourceAccount</code> (String): id of the source account
  + <code>sourceAccountIdentifier</code> (String): identifier unique to the account targetted by the connector. It is the login most of the time</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">saveIdentity</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span>
  <span class="p">{</span>
    <span class="nx">contact</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;toto&#39;</span><span class="p">,</span>
      <span class="nx">email</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;address&#39;</span><span class="o">:</span> <span class="s1">&#39;toto@example.com&#39;</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="k">return</span> <span class="nx">saveIdentity</span><span class="p">(</span><span class="nx">identity</span><span class="p">,</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">login</span><span class="p">)</span>
</pre></div>


<p><strong>Kind</strong>: Exported function<br />
<a name="module_signin"></a></p>
<h2 id="signin">signin<a class="headerlink" href="#signin" title="Permanent link">&para;</a></h2>
<p>Provides an handy method to log the user in,
on HTML form pages. On success, it resolves to a promise with a parsed body.</p>
<p><a name="exp_module_signin--signin"></a></p>
<h3 id="signin_1">signin() ⏏<a class="headerlink" href="#signin_1" title="Permanent link">&para;</a></h3>
<p>Provides an handy method to log the user in,
on HTML form pages. On success, it resolves to a promise with a parsed body.</p>
<p>Errors:</p>
<ul>
<li>LOGIN_FAILED if the validate predicate is false</li>
<li>INVALID_FORM if the element matched by <code>formSelector</code> is not a form or has
  no <code>action</code> attribute</li>
<li>UNKNOWN_PARSING_STRATEGY if <code>parse</code> is not one of the accepted values:
  <code>raw</code>, <code>cheerio</code>, <code>json</code>.</li>
<li>VENDOR_DOWN if a request throws a RequestError, or StatusCodeError</li>
</ul>
<p>It does not submit values provided through <code>select</code> tags, except if populated
by user with <code>formData</code>.</p>
<ul>
<li>
<p><code>url</code> is the url to access the html form</p>
</li>
<li>
<p><code>formSelector</code> is used by cheerio to uniquely identify the form in which to
  log in</p>
</li>
<li>
<p><code>formData</code> is an object <code>{ name: value, … }</code>. It is used to populate the
  form, in the proper inputs with the same name as the properties of this
  object, before submitting it. It can also be a function that returns this
  object. The page at <code>url</code> would be given as argument, right after having
  been parsed through <code>cheerio</code>.</p>
</li>
<li>
<p><code>parse</code> allow the user to resolve <code>signin</code> with a preparsed body. The
  choice of the strategy for the parsing is one of : <code>raw</code>, <code>json</code> or
  <code>cheerio</code>. <code>cheerio</code> being the default.</p>
</li>
<li>
<p><code>validate</code> is a predicate taking three arguments <code>statusCode</code>, <code>parsedBody</code> and <code>fullResponse</code>.
  If it is false, <code>LOGIN_FAILED</code> is thrown, otherwise the
  signin resolves with <code>parsedBody</code> value.</p>
</li>
<li>
<p><code>requestOpts</code> allows to pass eventual options to the <code>signin</code>&lsquo;s
  <code>requestFactory</code>. It could be useful for pages using <code>latin1</code> <code>encoding</code>
  for instance.</p>
</li>
</ul>
<p><strong>Kind</strong>: Exported function<br />
<strong>Example</strong><br />
== basic example : ==</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">signin</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="sb">`http://quotes.toscrape.com/login`</span><span class="p">,</span>
  <span class="nx">formSelector</span><span class="o">:</span> <span class="s1">&#39;form&#39;</span><span class="p">,</span>
  <span class="nx">formData</span><span class="o">:</span> <span class="p">{</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span>
<span class="p">})</span>
</pre></div>


<p>If the behavior of the targeted website is not standard. You can pass a validate function which
will allow you to:
 - detect if the credentials work or not -&gt; LOGIN_FAILED
 - detect if actions from the user are needed -&gt; USER_ACTION_NEEDED
 - detect if the targeted website is out -&gt; VENDOR_DOWN
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">signin</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="sb">`http://quotes.toscrape.com/login`</span><span class="p">,</span>
  <span class="nx">formSelector</span><span class="o">:</span> <span class="s1">&#39;form&#39;</span><span class="p">,</span>
  <span class="nx">formData</span><span class="o">:</span> <span class="p">{</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span>
  <span class="nx">validate</span><span class="o">:</span> <span class="p">(</span><span class="nx">statusCode</span><span class="p">,</span> <span class="nx">$</span><span class="p">,</span> <span class="nx">fullResponse</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">statusCode</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span> <span class="c1">// LOGIN_FAILED</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.cgu&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;USER_ACTION_NEEDED&#39;</span><span class="p">)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">fullResponse</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">uri</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;VENDOR_DOWN&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>


<p>Do not forget that the use of the signin function is not mandatory in a connector and won&rsquo;t work
if the signin page does not use html forms. Here, a simple POST request may be a lot more
simple.
<a name="module_solveCaptcha"></a></p>
<h2 id="solvecaptcha">solveCaptcha<a class="headerlink" href="#solvecaptcha" title="Permanent link">&para;</a></h2>
<p>Use every possible means to solve a captcha. At the moment, Anticaptcha web service is used if
any related secret key is found in COZY_PARAMETERS environment variable.</p>
<p><a name="exp_module_solveCaptcha--solveCaptcha"></a></p>
<h3 id="solvecaptcha_1">solveCaptcha() ⏏<a class="headerlink" href="#solvecaptcha_1" title="Permanent link">&para;</a></h3>
<p>Use every possible means to solve a captcha. At the moment, Anticaptcha web service is used if
any related secret key is found in COZY_PARAMETERS environment variable.
If you do not want to solve the captcha each time the connector is run, please also use
CookieKonnector which will help you save the session.</p>
<p>Parameters:</p>
<ul>
<li><code>params</code> is an array of objects with any attributes with some mandatory attributes :</li>
<li><code>type</code> (String): (default recaptcha) type of captcha to solve. can be &ldquo;recaptcha&rdquo; or &ldquo;image&rdquo; at the moment</li>
<li><code>timeout</code> (Number): (default 3 minutes after now) time when the solver should stop trying to
  solve the captcha</li>
<li><code>withFullSolution</code>(Boolean): (default false) Change the return to an object containing full solution</li>
<li><code>websiteKey</code> (String): the key you can find on the targeted website (for recaptcha)</li>
<li><code>websiteURL</code> (String): The URL of the page showing the captcha (for recaptcha)</li>
<li><code>body</code> (String): The base64 encoded image (for image captcha)
Returns: Promise with the solved captcha response as a string</li>
</ul>
<p><strong>Kind</strong>: Exported function<br />
<strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">solveCaptcha</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">solvedKey</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">solveCaptcha</span><span class="p">({</span>
  <span class="nx">websiteKey</span><span class="o">:</span> <span class="s1">&#39;the key in the webpage&#39;</span><span class="p">,</span>
  <span class="nx">websiteURL</span><span class="o">:</span> <span class="s1">&#39;http://quotes.toscrape.com/login&#39;</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1">// now use the solveKey to submit your form</span>
</pre></div>


<p><a name="module_updateOrCreate"></a></p>
<h2 id="updateorcreate">updateOrCreate<a class="headerlink" href="#updateorcreate" title="Permanent link">&para;</a></h2>
<p>Creates or updates the given entries according to if they already
exist in the cozy or not</p>
<p><a name="exp_module_updateOrCreate--updateOrCreate"></a></p>
<h3 id="updateorcreate_1">updateOrCreate() ⏏<a class="headerlink" href="#updateorcreate_1" title="Permanent link">&para;</a></h3>
<p>Creates or updates the given entries according to if they already
exist in the cozy or not</p>
<p>You need the full permission for the given doctype in your manifest, to be able to
use this function.</p>
<p><code>entries</code> (object array): Documents to save
<code>doctype</code> (string): Doctype of the documents
<code>matchingAttributes</code> (string array): attributes in each entry used to check if an entry already exists in the Cozy
<code>options</code> (object): general option affecting metadata :
  + <code>sourceAccount</code> (String): id of the source account
  + <code>sourceAccountIdentifier</code> (String): identifier unique to the account targetted by the connector. It is the login most of the time</p>
<p><strong>Kind</strong>: Exported function<br />
<a name="module_utils"></a></p>
<h2 id="utils">utils<a class="headerlink" href="#utils" title="Permanent link">&para;</a></h2>
<p>Small utilities helping to develop konnectors.</p>
<ul>
<li><a href="#module_utils">utils</a><ul>
<li><a href="#module_utils..fetchAll">~fetchAll()</a></li>
<li><a href="#module_utils..queryAll">~queryAll()</a></li>
<li><a href="#module_utils..findDuplicates">~findDuplicates()</a></li>
<li><a href="#module_utils..batchUpdateAttributes">~batchUpdateAttributes()</a></li>
<li><a href="#module_utils..batchDelete">~batchDelete()</a></li>
<li><a href="#module_utils..getPdfText">~getPdfText()</a></li>
<li><a href="#module_utils..formatDate">~formatDate()</a></li>
</ul>
</li>
</ul>
<p><a name="module_utils..fetchAll"></a></p>
<h3 id="utilsfetchall">utils~fetchAll()<a class="headerlink" href="#utilsfetchall" title="Permanent link">&para;</a></h3>
<p>This function allows to fetch all documents for a given doctype. It is the fastest to get all
documents but without filtering possibilities
deprecated by the findAll method from cozyClient</p>
<p>Parameters:</p>
<p><code>doctype</code> (string): the doctype from which you want to fetch the data</p>
<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..queryAll"></a></p>
<h3 id="utilsqueryall">utils~queryAll()<a class="headerlink" href="#utilsqueryall" title="Permanent link">&para;</a></h3>
<p>This function allows to fetch all documents for a given doctype exceeding the 100 limit.
It is slower that fetchAll because it fetches the data 100 by 100 but allows to filter the data
with a selector and an index</p>
<p>Parameters:</p>
<p><code>doctype</code> (string): the doctype from which you want to fetch the data
<code>selector</code> (object): the mango query selector
<code>index</code> (object): (optional) the query selector index. If not defined, the function will
create it&rsquo;s own index with the keys specified in the selector</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">documents</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">queryAll</span><span class="p">(</span><span class="s1">&#39;io.cozy.bills&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">vendor</span><span class="o">:</span> <span class="s1">&#39;Direct Energie&#39;</span><span class="p">})</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..findDuplicates"></a></p>
<h3 id="utilsfindduplicates">utils~findDuplicates()<a class="headerlink" href="#utilsfindduplicates" title="Permanent link">&para;</a></h3>
<p>This function find duplicates in a given doctype, filtered by an optional mango selector</p>
<p>Parameters:</p>
<p><code>doctype</code> (string): the doctype from which you want to fetch the data
<code>selector</code> (object): (optional) the mango query selector
<code>options</code> :
   - <code>keys</code> (array) : List of keys used to check that two items are the same.
   - <code>index</code> (optionnal) : Return value returned by <code>cozy.data.defineIndex</code>, the default will correspond to all documents of the selected doctype.
   - <code>selector</code> (optionnal object) : Mango request to get records. Gets all the records by default</p>
<p>Returns an object with the following keys:
<code>toKeep</code>: this is the list of unique documents that you should keep in db
<code>toRemove</code>: this is the list of documents that can remove from db. If this is io.cozy.bills
documents, do not forget to clean linked bank operations</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span><span class="nx">toKeep</span><span class="p">,</span> <span class="nx">toRemove</span><span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">findDuplicates</span><span class="p">(</span><span class="s1">&#39;io.cozy.bills&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">selector</span><span class="o">:</span> <span class="p">{</span><span class="nx">vendor</span><span class="o">:</span> <span class="s1">&#39;Direct Energie&#39;</span><span class="p">}})</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..batchUpdateAttributes"></a></p>
<h3 id="utilsbatchupdateattributes">utils~batchUpdateAttributes()<a class="headerlink" href="#utilsbatchupdateattributes" title="Permanent link">&para;</a></h3>
<p>This is a shortcut to update multiple documents in one call</p>
<p>Parameters:</p>
<p><code>doctype</code> (string): the doctype from which you want to fetch the data
<code>ids</code> (array): array of ids of documents to update
<code>transformation</code> (object): attributes to change with their values
<code>options</code> :
   - <code>keys</code> (array) : List of keys used to check that two items are the same.
   - <code>index</code> (optionnal) : Return value returned by <code>cozy.data.defineIndex</code>, the default will correspond to all documents of the selected doctype.
   - <code>selector</code> (optionnal object) : Mango request to get records. Gets all the records by default</p>
<p>Returns a promise which resolves with all the return values of updateAttributes</p>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="nx">batchUpdateAttributes</span><span class="p">(</span><span class="s1">&#39;io.cozy.bills&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">{</span><span class="nx">vendor</span><span class="o">:</span> <span class="s1">&#39;Direct Energie&#39;</span><span class="p">})</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..batchDelete"></a></p>
<h3 id="utilsbatchdelete">utils~batchDelete()<a class="headerlink" href="#utilsbatchdelete" title="Permanent link">&para;</a></h3>
<p>This is a shortcut to delete multiple documents in one call</p>
<p>Parameters:</p>
<p><code>doctype</code> (string): the doctype from which you want to fetch the data
<code>documents</code> (array): documents to delete with their ids
<code>transformation</code> (object): attributes to change with their values
<code>options</code> :
   - <code>keys</code> (array) : List of keys used to check that two items are the same.
   - <code>index</code> (optionnal) : Return value returned by <code>cozy.data.defineIndex</code>, the default will correspond to all documents of the selected doctype.
   - <code>selector</code> (optionnal object) : Mango request to get records. Gets all the records by default</p>
<p>Returns a promise which resolves with all the return values of updateAttributes</p>
<p>Example to remove all the documents for a given doctype</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">documents</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetchAll</span><span class="p">(</span><span class="s1">&#39;io.cozy.marvel&#39;</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">batchDelete</span><span class="p">(</span><span class="s1">&#39;io.cozy.marvel&#39;</span><span class="p">,</span> <span class="nx">documents</span><span class="p">)</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..getPdfText"></a></p>
<h3 id="utilsgetpdftext">utils~getPdfText()<a class="headerlink" href="#utilsgetpdftext" title="Permanent link">&para;</a></h3>
<p>This function can read the content of a cozy pdf file and output its text</p>
<p>Parameters:</p>
<p><code>fileId</code> (string): the id of the file in the cozy
<code>options</code> :
   - <code>pages</code> (array or number) : The list of page you want to interpret</p>
<p>You need to add pdfjs-dist package as a dependency to your connector to allow this to work</p>
<p>Returns a promise which resolves with an object with the following attributes:
   - <code>text</code> (string) : The full text of the pdf
   - <code>1</code> : The full pdfjs data for page 1
   - <code>n</code> : The full pdfjs data for page n</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">pdfText</span> <span class="o">=</span> <span class="p">(</span><span class="nx">await</span> <span class="nx">getPdfText</span><span class="p">(</span><span class="s1">&#39;887ABCFE87687&#39;</span><span class="p">)).</span><span class="nx">text</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_utils..formatDate"></a></p>
<h3 id="utilsformatdate">utils~formatDate()<a class="headerlink" href="#utilsformatdate" title="Permanent link">&para;</a></h3>
<p>This function convert a Date Object to a ISO date string (2018-07-31)</p>
<p>Parameters:</p>
<p><code>date</code> (Date): the id of the file in the cozy</p>
<p>Returns a string</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">formatFrenchDate</span><span class="p">(</span><span class="nx">New</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">())</span>
</pre></div>


<p><strong>Kind</strong>: inner method of <a href="#module_utils"><code>utils</code></a><br />
<a name="module_categorization"></a></p>
<h2 id="categorization">categorization<a class="headerlink" href="#categorization" title="Permanent link">&para;</a></h2>
<p>Bank transactions categorization</p>
<ul>
<li><a href="#module_categorization">categorization</a><ul>
<li><a href="#module_categorization..createCategorizer">~createCategorizer(options)</a> ⇒ <code>Object</code></li>
<li><a href="#module_categorization..categorize">~categorize(transactions, options)</a> ⇒ <code>Array.&lt;object&gt;</code></li>
<li><a href="#module_categorization..CreateCategorizerOptions">~CreateCategorizerOptions</a></li>
</ul>
</li>
</ul>
<p><a name="module_categorization..createCategorizer"></a></p>
<h3 id="categorizationcreatecategorizeroptions-object">categorization~createCategorizer(options) ⇒ <code>Object</code><a class="headerlink" href="#categorizationcreatecategorizeroptions-object" title="Permanent link">&para;</a></h3>
<p>Initialize global and local models and return an object exposing a
<code>categorize</code> function that applies both models on an array of transactions</p>
<p>The global model is a model specific to hosted Cozy instances. It is not available for self-hosted instances. It will just do nothing in that case.</p>
<p>The local model is based on the user manual categorizations.</p>
<p>Each model adds two properties to the transactions:
  The global model adds <code>cozyCategoryId</code> and <code>cozyCategoryProba</code>
  The local model adds <code>localCategoryId</code> and <code>localCategoryProba</code></p>
<p>In the end, each transaction can have up to four different categories. An application can use these categories to show the most significant for the user. See https://github.com/cozy/cozy-doctypes/blob/master/docs/io.cozy.bank.md#categories for more informations.</p>
<p><strong>Kind</strong>: inner method of <a href="#module_categorization"><code>categorization</code></a><br />
<strong>Returns</strong>: <code>Object</code> - A method to categorize transactions and the classifiers it uses.  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>CreateCategorizerOptions</code></td>
<td>Options used to build the categorizer</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">BaseKonnector</span><span class="p">,</span> <span class="nx">createCategorizer</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="kr">class</span> <span class="nx">BankingKonnector</span> <span class="kr">extends</span> <span class="nx">BaseKonnector</span> <span class="p">{</span>
  <span class="nx">async</span> <span class="nx">saveTransactions</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">transactions</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchTransactions</span><span class="p">()</span>
    <span class="kr">const</span> <span class="nx">categorizer</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">createCategorizer</span>
    <span class="kr">const</span> <span class="nx">categorizedTransactions</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">categorizer</span><span class="p">.</span><span class="nx">categorize</span><span class="p">(</span><span class="nx">transactions</span><span class="p">)</span>

    <span class="c1">// Save categorizedTransactions</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a name="module_categorization..categorize"></a></p>
<h3 id="categorizationcategorizetransactions-options-arrayobject">categorization~categorize(transactions, options) ⇒ <code>Array.&lt;object&gt;</code><a class="headerlink" href="#categorizationcategorizetransactions-options-arrayobject" title="Permanent link">&para;</a></h3>
<p>Initialize global and local models and categorize the given array of transactions</p>
<p><strong>Kind</strong>: inner method of <a href="#module_categorization"><code>categorization</code></a><br />
<strong>Returns</strong>: <code>Array.&lt;object&gt;</code> - the categorized transactions<br />
<strong>See</strong>: <a href="createCategorizer">createCategorizer</a> for more informations about models initialization  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>transactions</td>
<td><code>Array.&lt;object&gt;</code></td>
<td>The transactions to categorize</td>
</tr>
<tr>
<td>options</td>
<td><code>CreateCategorizerOptions</code></td>
<td>Options passed to create the categorizer</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">BaseKonnector</span><span class="p">,</span> <span class="nx">categorize</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="kr">class</span> <span class="nx">BankingKonnector</span> <span class="kr">extends</span> <span class="nx">BaseKonnector</span> <span class="p">{</span>
  <span class="nx">async</span> <span class="nx">saveTransactions</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">transactions</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchTransactions</span><span class="p">()</span>
    <span class="kr">const</span> <span class="nx">categorizedTransactions</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">categorize</span><span class="p">(</span><span class="nx">transactions</span><span class="p">)</span>

    <span class="c1">// Save categorizedTransactions</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a name="module_categorization..CreateCategorizerOptions"></a></p>
<h3 id="categorizationcreatecategorizeroptions">categorization~CreateCategorizerOptions<a class="headerlink" href="#categorizationcreatecategorizeroptions" title="Permanent link">&para;</a></h3>
<p><strong>Kind</strong>: inner typedef of <a href="#module_categorization"><code>categorization</code></a><br />
<strong>Properties</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>useGlobalModel</td>
<td><code>boolean</code></td>
<td>Whether to use the globally trained model</td>
</tr>
<tr>
<td>customTransactionFetcher</td>
<td><code>function</code></td>
<td>A custom training transaction fetcher</td>
</tr>
<tr>
<td>pretrainedClassifier</td>
<td><code>object</code></td>
<td>A pretrained instance of a bayes classifier</td>
</tr>
</tbody>
</table>
<p><a name="BaseKonnector"></a></p>
<h2 id="basekonnector">BaseKonnector<a class="headerlink" href="#basekonnector" title="Permanent link">&para;</a></h2>
<p>The class from which all the connectors must inherit.
It takes a fetch function in parameter that must return a <code>Promise</code>.
You need at least the <code>GET</code> permission on <code>io.cozy.accounts</code> in your manifest to allow it to
fetch account information for your connector.</p>
<p>Its role is twofold :</p>
<ul>
<li>Make the link between account data and konnector</li>
<li>Handle errors</li>
</ul>
<p>⚠️  A promise should be returned from the <code>fetch</code> function otherwise
the konnector cannot know that asynchronous code has been called.</p>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#BaseKonnector">BaseKonnector</a><ul>
<li><a href="#new_BaseKonnector_new">new BaseKonnector(fetch)</a></li>
<li><a href="#BaseKonnector+run">.run()</a></li>
<li><a href="#BaseKonnector+main">.main()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+end">.end()</a></li>
<li><a href="#BaseKonnector+fail">.fail()</a></li>
<li><a href="#BaseKonnector+readPayload">.readPayload()</a> ⇒ <code>Object</code> | <code>null</code></li>
<li><a href="#BaseKonnector+initAttributes">.initAttributes()</a></li>
<li><a href="#BaseKonnector+saveAccountData">.saveAccountData(data, options)</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+getAccountData">.getAccountData()</a> ⇒ <code>object</code></li>
<li><a href="#BaseKonnector+updateAccountAttributes">.updateAccountAttributes()</a></li>
<li><a href="#BaseKonnector+setTwoFAState">.setTwoFAState(options)</a></li>
<li><a href="#BaseKonnector+resetTwoFAState">.resetTwoFAState()</a></li>
<li><a href="#BaseKonnector+waitForTwoFaCode">.waitForTwoFaCode(options)</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+notifySuccessfulLogin">.notifySuccessfulLogin()</a></li>
<li><a href="#BaseKonnector+deactivateAutoSuccessfulLogin">.deactivateAutoSuccessfulLogin()</a></li>
<li><a href="#BaseKonnector+saveBills">.saveBills()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+saveFiles">.saveFiles()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+updateOrCreate">.updateOrCreate()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+saveIdentity">.saveIdentity()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+signin">.signin()</a> ⇒ <code>Promise</code></li>
<li><a href="#BaseKonnector+terminate">.terminate(err)</a></li>
<li><a href="#BaseKonnector+getCozyMetadata">.getCozyMetadata(data)</a></li>
</ul>
</li>
</ul>
<p><a name="new_BaseKonnector_new"></a></p>
<h3 id="new-basekonnectorfetch">new BaseKonnector(fetch)<a class="headerlink" href="#new-basekonnectorfetch" title="Permanent link">&para;</a></h3>
<p>Constructor</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fetch</td>
<td><code>function</code></td>
<td>Function to be run automatically after account data is fetched. This function will be binded to the current connector. If not fetch function is given. The connector will have to handle itself it&rsquo;s own exection and error handling</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">BaseKonnector</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseKonnector</span><span class="p">(</span><span class="kd">function</span> <span class="nx">fetch</span> <span class="p">()</span> <span class="p">{</span>
 <span class="c1">// use this to access the instance of the konnector to</span>
 <span class="c1">// store any information that needs to be passed to</span>
 <span class="c1">// different stages of the konnector</span>
 <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="s1">&#39;http://ameli.fr&#39;</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">computeReimbursements</span><span class="p">)</span>
   <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">saveBills</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>


<p><a name="BaseKonnector+run"></a></p>
<h3 id="basekonnectorrun">baseKonnector.run()<a class="headerlink" href="#basekonnectorrun" title="Permanent link">&para;</a></h3>
<p>Entrypoint of the konnector</p>
<ul>
<li>Initializes connector attributes</li>
<li>Awaits this.main</li>
<li>Ensures errors are handled via this.fail</li>
<li>Calls this.end when the main function succeeded</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+main"></a></p>
<h3 id="basekonnectormain-promise">baseKonnector.main() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectormain-promise" title="Permanent link">&para;</a></h3>
<p>Main runs after konnector has been initialized.
Errors thrown will be automatically handled.</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - - The konnector is considered successful when it resolves<br />
<a name="BaseKonnector+end"></a></p>
<h3 id="basekonnectorend">baseKonnector.end()<a class="headerlink" href="#basekonnectorend" title="Permanent link">&para;</a></h3>
<p>Hook called when the connector has ended successfully</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+fail"></a></p>
<h3 id="basekonnectorfail">baseKonnector.fail()<a class="headerlink" href="#basekonnectorfail" title="Permanent link">&para;</a></h3>
<p>Hook called when the connector fails</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+readPayload"></a></p>
<h3 id="basekonnectorreadpayload-object-null">baseKonnector.readPayload() ⇒ <code>Object</code> | <code>null</code><a class="headerlink" href="#basekonnectorreadpayload-object-null" title="Permanent link">&para;</a></h3>
<p>Read an eventual payload from COZY_PAYLOAD env var, wether it is a JSON string or a reference
to a file containing a JSON string</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Object</code> | <code>null</code> - Promise&lt;&gt; result of JSON.parse from the JSON string or null if no payload<br />
<a name="BaseKonnector+initAttributes"></a></p>
<h3 id="basekonnectorinitattributes">baseKonnector.initAttributes()<a class="headerlink" href="#basekonnectorinitattributes" title="Permanent link">&para;</a></h3>
<p>Initializes konnector attributes that will be used during its lifetime</p>
<ul>
<li>this._account</li>
<li>this.fields</li>
</ul>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+saveAccountData"></a></p>
<h3 id="basekonnectorsaveaccountdatadata-options-promise">baseKonnector.saveAccountData(data, options) ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorsaveaccountdatadata-options-promise" title="Permanent link">&para;</a></h3>
<p>Saves data to the account that is passed to the konnector.
Use it to persist data that needs to be passed to each
konnector run.</p>
<p>By default, the data is merged to the remote data, use
<code>options.merge = false</code> to overwrite the data.</p>
<p>The data is saved under the <code>.data</code> attribute of the cozy
account.</p>
<p>Don&rsquo;t forget to modify the manifest.konnector file to give the right to write on the
<code>io.cozy.accounts</code> doctype. The syntax can be : <code>"permissions": {"accounts": {"type": "io.cozy.accounts"}}</code> (here we juste removed the verb <code>GET</code>)</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - : resolved with the modified account  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td><code>object</code></td>
<td>Attributes to be merged</td>
</tr>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>{ merge: true</td>
</tr>
</tbody>
</table>
<p><a name="BaseKonnector+getAccountData"></a></p>
<h3 id="basekonnectorgetaccountdata-object">baseKonnector.getAccountData() ⇒ <code>object</code><a class="headerlink" href="#basekonnectorgetaccountdata-object" title="Permanent link">&para;</a></h3>
<p>Get the data saved by saveAccountData</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>object</code> - the account data<br />
<a name="BaseKonnector+updateAccountAttributes"></a></p>
<h3 id="basekonnectorupdateaccountattributes">baseKonnector.updateAccountAttributes()<a class="headerlink" href="#basekonnectorupdateaccountattributes" title="Permanent link">&para;</a></h3>
<p>Update account attributes and cache the account</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+setTwoFAState"></a></p>
<h3 id="basekonnectorsettwofastateoptions">baseKonnector.setTwoFAState(options)<a class="headerlink" href="#basekonnectorsettwofastateoptions" title="Permanent link">&para;</a></h3>
<p>Sets the 2FA state, according to the type passed.
Doing so resets the twoFACode field</p>
<p>Typically you should not use that directly, prefer to use waitForTwoFaCode since
the wait for user input will be handled for you. It is useful though for the &ldquo;app&rdquo;
type where no user input (inside Cozy) is needed.</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>The list of options</td>
</tr>
<tr>
<td>options.type</td>
<td><code>string</code></td>
<td>Used by the front to show the right message (email/sms/app/app_code)</td>
</tr>
<tr>
<td>options.retry</td>
<td><code>boolean</code></td>
<td>Is this function call a retry ? This changes the resulting message to the user</td>
</tr>
</tbody>
</table>
<p><a name="BaseKonnector+resetTwoFAState"></a></p>
<h3 id="basekonnectorresettwofastate">baseKonnector.resetTwoFAState()<a class="headerlink" href="#basekonnectorresettwofastate" title="Permanent link">&para;</a></h3>
<p>Resets 2FA state when not needed anymore</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+waitForTwoFaCode"></a></p>
<h3 id="basekonnectorwaitfortwofacodeoptions-promise">baseKonnector.waitForTwoFaCode(options) ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorwaitfortwofacodeoptions-promise" title="Permanent link">&para;</a></h3>
<p>Notices that 2FA code is needed and wait for the user to submit it.
It uses the account to do the communication with the user.</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - Contains twoFa code entered by user<br />
<strong>Throws</strong>:</p>
<ul>
<li>Will throw <code>USER_ACTION_NEEDED.TWOFA_EXPIRED</code> if the konnector job is not run manually (we assume that
not run manually means that we do not have a graphic interface to fill the required information)</li>
<li>Will throw <code>USER_ACTION_NEEDED.TWOFA_EXPIRED</code> if 2FA is not filled by the user soon enough</li>
</ul>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>The list of options</td>
</tr>
<tr>
<td>options.type</td>
<td><code>string</code></td>
<td>(default: &ldquo;email&rdquo;) - Type of the expected 2FA code. The message displayed   to the user will depend on it. Possible values: email, sms</td>
</tr>
<tr>
<td>options.timeout</td>
<td><code>number</code></td>
<td>(default 3 minutes after now) - After this date, the stop will stop waiting and and an error will be shown to the user (deprecated and alias of endTime)</td>
</tr>
<tr>
<td>options.endTime</td>
<td><code>number</code></td>
<td>(default 3 minutes after now) - After this timestamp, the home will stop waiting and and an error will be shown to the user</td>
</tr>
<tr>
<td>options.heartBeat</td>
<td><code>number</code></td>
<td>(default: 5000) - How many milliseconds between each code check</td>
</tr>
<tr>
<td>options.retry</td>
<td><code>boolean</code></td>
<td>(default: false) - Is it a retry. If true, an error message will be   displayed to the user</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">BaseKonnector</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseKonnector</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">// we detect the need of a 2FA code</span>
   <span class="kr">const</span> <span class="nx">code</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForTwoFaCode</span><span class="p">({</span>
     <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;email&#39;</span>
   <span class="p">})</span>
   <span class="c1">// send the code to the targeted site</span>
<span class="p">}</span>
</pre></div>


<p><a name="BaseKonnector+notifySuccessfulLogin"></a></p>
<h3 id="basekonnectornotifysuccessfullogin">baseKonnector.notifySuccessfulLogin()<a class="headerlink" href="#basekonnectornotifysuccessfullogin" title="Permanent link">&para;</a></h3>
<p>Tells Cozy-Home that we have successfully logged in.
Useful when auto-success has been deactivated.
See <code>deactivateAutoSuccess</code></p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+deactivateAutoSuccessfulLogin"></a></p>
<h3 id="basekonnectordeactivateautosuccessfullogin">baseKonnector.deactivateAutoSuccessfulLogin()<a class="headerlink" href="#basekonnectordeactivateautosuccessfullogin" title="Permanent link">&para;</a></h3>
<p>By default, cozy-home considers that the konnector has successfully logged in
when the konnector has run for more than 8s. This is problematic for 2FA since
the konnector can sit idle, just waiting for the 2FA to come back.</p>
<p>When this method is called, cozy-home is notified and will not consider the
absence of error after 8s to be a success. Afterwards, to notify cozy-home when
the user has logged in successfully, for example, after the user has entered 2FA
codes, it is necessary to call <code>notifySuccessfulLogin</code>.</p>
<p>Does nothing if called more than once.</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<a name="BaseKonnector+saveBills"></a></p>
<h3 id="basekonnectorsavebills-promise">baseKonnector.saveBills() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorsavebills-promise" title="Permanent link">&para;</a></h3>
<p>This is saveBills function from cozy-konnector-libs which automatically adds sourceAccount in
metadata of each entry</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolves with entries hydrated with db data<br />
<a name="BaseKonnector+saveFiles"></a></p>
<h3 id="basekonnectorsavefiles-promise">baseKonnector.saveFiles() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorsavefiles-promise" title="Permanent link">&para;</a></h3>
<p>This is saveFiles function from cozy-konnector-libs which automatically adds sourceAccount and
sourceAccountIdentifier cozyMetadatas to files</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolves with the list of entries with file objects<br />
<a name="BaseKonnector+updateOrCreate"></a></p>
<h3 id="basekonnectorupdateorcreate-promise">baseKonnector.updateOrCreate() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorupdateorcreate-promise" title="Permanent link">&para;</a></h3>
<p>This is updateOrCreate function from cozy-konnector-libs which automatically adds sourceAccount in
metadata of each entry</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolves to an array of db objects<br />
<a name="BaseKonnector+saveIdentity"></a></p>
<h3 id="basekonnectorsaveidentity-promise">baseKonnector.saveIdentity() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorsaveidentity-promise" title="Permanent link">&para;</a></h3>
<p>This is saveIdentity function from cozy-konnector-libs which automatically adds sourceAccount in
metadata of each entry</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - empty promise<br />
<a name="BaseKonnector+signin"></a></p>
<h3 id="basekonnectorsignin-promise">baseKonnector.signin() ⇒ <code>Promise</code><a class="headerlink" href="#basekonnectorsignin-promise" title="Permanent link">&para;</a></h3>
<p>This is signin function from cozy-konnector-libs which automatically adds deactivateAutoSuccessfulLogin
and notifySuccessfulLogin calls</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolve with an object containing form data<br />
<a name="BaseKonnector+terminate"></a></p>
<h3 id="basekonnectorterminateerr">baseKonnector.terminate(err)<a class="headerlink" href="#basekonnectorterminateerr" title="Permanent link">&para;</a></h3>
<p>Send a special error code which is interpreted by the cozy stack to terminate the execution of the
connector now</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>err</td>
<td><code>string</code></td>
<td>The error code to be saved as connector result see [docs/ERROR_CODES.md]</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">terminate</span><span class="p">(</span><span class="s1">&#39;LOGIN_FAILED&#39;</span><span class="p">)</span>
</pre></div>


<p><a name="BaseKonnector+getCozyMetadata"></a></p>
<h3 id="basekonnectorgetcozymetadatadata">baseKonnector.getCozyMetadata(data)<a class="headerlink" href="#basekonnectorgetcozymetadatadata" title="Permanent link">&para;</a></h3>
<p>Get cozyMetaData from the context of the connector</p>
<p><strong>Kind</strong>: instance method of <a href="#BaseKonnector"><code>BaseKonnector</code></a>  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td><code>object</code></td>
<td>this data will be merged with cozyMetaData</td>
</tr>
</tbody>
</table>
<p><a name="CookieKonnector"></a></p>
<h2 id="cookiekonnector">CookieKonnector<a class="headerlink" href="#cookiekonnector" title="Permanent link">&para;</a></h2>
<p>Connector base class extending BaseKonnector which handles cookie session in a central way
It also handles saving cookie session in the account and automatically restore it for the next
connector run.
All cozy-konnector-libs tools using request are proposed as methods of this class to force them
to use the central cookie which can be saved/restored.
You need at least the <code>GET</code> and <code>PUT</code> permissions on <code>io.cozy.accounts</code> in your manifest to allow
it to save/restore cookies</p>
<p><strong>Kind</strong>: global class  </p>
<ul>
<li><a href="#CookieKonnector">CookieKonnector</a><ul>
<li><a href="#new_CookieKonnector_new">new CookieKonnector(requestFactoryOptions)</a></li>
<li><a href="#CookieKonnector+initAttributes">.initAttributes()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+end">.end()</a></li>
<li><a href="#CookieKonnector+requestFactory">.requestFactory(options)</a> ⇒ <code>object</code></li>
<li><a href="#CookieKonnector+resetSession">.resetSession()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+initSession">.initSession()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+saveSession">.saveSession()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+signin">.signin()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+saveFiles">.saveFiles()</a> ⇒ <code>Promise</code></li>
<li><a href="#CookieKonnector+saveBills">.saveBills()</a> ⇒ <code>Promise</code></li>
</ul>
</li>
</ul>
<p><a name="new_CookieKonnector_new"></a></p>
<h3 id="new-cookiekonnectorrequestfactoryoptions">new CookieKonnector(requestFactoryOptions)<a class="headerlink" href="#new-cookiekonnectorrequestfactoryoptions" title="Permanent link">&para;</a></h3>
<p>Constructor</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>requestFactoryOptions</td>
<td><code>function</code></td>
<td>Option object passed to requestFactory to initialize this.request. It is still possible to change this.request doing : <code>javascript this.request = this.requestFactory(...)</code> Please not you have to run the connector yourself doing : <code>javascript connector.run()</code></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>  </p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">CookieKonnector</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cozy-konnector-libs&#39;</span><span class="p">)</span>
<span class="kr">class</span> <span class="nx">MyConnector</span> <span class="kr">extends</span> <span class="nx">CookieKonnector</span> <span class="p">{</span>
  <span class="nx">async</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">fields</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// the code of your connector</span>
     <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">&#39;https://...&#39;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">async</span> <span class="nx">testSession</span><span class="p">()</span> <span class="p">{</span>
     <span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">&#39;https://...&#39;</span><span class="p">)</span>
     <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">connector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyKonnector</span><span class="p">({</span>
  <span class="nx">cheerio</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">json</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">})</span>
<span class="nx">connector</span><span class="p">.</span><span class="nx">run</span><span class="p">()</span>
</pre></div>


<p><a name="CookieKonnector+initAttributes"></a></p>
<h3 id="cookiekonnectorinitattributes-promise">cookieKonnector.initAttributes() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorinitattributes-promise" title="Permanent link">&para;</a></h3>
<p>Initializes the current connector with data coming from the associated account
and also the session</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - with the fields as an object<br />
<a name="CookieKonnector+end"></a></p>
<h3 id="cookiekonnectorend">cookieKonnector.end()<a class="headerlink" href="#cookiekonnectorend" title="Permanent link">&para;</a></h3>
<p>Hook called when the connector is ended</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<a name="CookieKonnector+requestFactory"></a></p>
<h3 id="cookiekonnectorrequestfactoryoptions-object">cookieKonnector.requestFactory(options) ⇒ <code>object</code><a class="headerlink" href="#cookiekonnectorrequestfactoryoptions-object" title="Permanent link">&para;</a></h3>
<p>Calls cozy-konnector-libs requestFactory forcing this._jar as the cookie</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>object</code> - - The resulting request object  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>options</td>
<td><code>object</code></td>
<td>requestFactory option</td>
</tr>
</tbody>
</table>
<p><a name="CookieKonnector+resetSession"></a></p>
<h3 id="cookiekonnectorresetsession-promise">cookieKonnector.resetSession() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorresetsession-promise" title="Permanent link">&para;</a></h3>
<p>Reset cookie session with a new empty session and save it to the associated account</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - empty promise<br />
<a name="CookieKonnector+initSession"></a></p>
<h3 id="cookiekonnectorinitsession-promise">cookieKonnector.initSession() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorinitsession-promise" title="Permanent link">&para;</a></h3>
<p>Get the cookie session from the account if any</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - true or false if the session in the account exists or not<br />
<a name="CookieKonnector+saveSession"></a></p>
<h3 id="cookiekonnectorsavesession-promise">cookieKonnector.saveSession() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorsavesession-promise" title="Permanent link">&para;</a></h3>
<p>Saves the current cookie session to the account</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - empty promise<br />
<a name="CookieKonnector+signin"></a></p>
<h3 id="cookiekonnectorsignin-promise">cookieKonnector.signin() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorsignin-promise" title="Permanent link">&para;</a></h3>
<p>This is signin function from cozy-konnector-libs which is forced to use the current cookies
and current request from CookieKonnector. It also automatically saves the session after
signin if it is a success.</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolve with an object containing form data<br />
<a name="CookieKonnector+saveFiles"></a></p>
<h3 id="cookiekonnectorsavefiles-promise">cookieKonnector.saveFiles() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorsavefiles-promise" title="Permanent link">&para;</a></h3>
<p>This is saveFiles function from cozy-konnector-libs which is forced to use the current cookies
and current request from CookieKonnector.</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolves with the list of entries with file objects<br />
<a name="CookieKonnector+saveBills"></a></p>
<h3 id="cookiekonnectorsavebills-promise">cookieKonnector.saveBills() ⇒ <code>Promise</code><a class="headerlink" href="#cookiekonnectorsavebills-promise" title="Permanent link">&para;</a></h3>
<p>This is saveBills function from cozy-konnector-libs which is forced to use the current cookies
and current request from CookieKonnector.</p>
<p><strong>Kind</strong>: instance method of <a href="#CookieKonnector"><code>CookieKonnector</code></a><br />
<strong>Returns</strong>: <code>Promise</code> - resolves with entries hydrated with db data<br />
<a name="Document"></a></p>
<h2 id="document">Document<a class="headerlink" href="#document" title="Permanent link">&para;</a></h2>
<p>Simple Model for Documents. Allows to specify
<code>shouldSave</code>, <code>shouldUpdate</code> as methods.</p>
<p>Has useful <code>isEqual</code> method</p>
<p><strong>Kind</strong>: global class<br />
<a name="Document+isEqual"></a></p>
<h3 id="documentisequal">document.isEqual()<a class="headerlink" href="#documentisequal" title="Permanent link">&para;</a></h3>
<p>Compares to another document deeply.</p>
<p><code>_id</code> and <code>_rev</code> are by default ignored in the comparison.</p>
<p>By default, will compare dates loosely since you often
compare existing documents (dates in ISO string) with documents
that just have been scraped where dates are <code>Date</code>s.</p>
<p><strong>Kind</strong>: instance method of <a href="#Document"><code>Document</code></a><br />
<a name="fs"></a></p>
<h2 id="fs">fs<a class="headerlink" href="#fs" title="Permanent link">&para;</a></h2>
<p>Manifest is provided differently in developement that in production.</p>
<ul>
<li>
<p>In production, the manifest has been &ldquo;merged&rdquo; via Webpack via the
  DefinePlugin</p>
</li>
<li>
<p>In development/test, we simply read the manifest from the fs</p>
</li>
</ul>
<p><strong>Kind</strong>: global constant<br />
<a name="LOGIN_FAILED"></a></p>
<h2 id="login_failed-string">LOGIN_FAILED : <code>string</code><a class="headerlink" href="#login_failed-string" title="Permanent link">&para;</a></h2>
<p>The konnector could not login</p>
<p><strong>Kind</strong>: global constant<br />
<a name="NOT_EXISTING_DIRECTORY"></a></p>
<h2 id="not_existing_directory-string">NOT_EXISTING_DIRECTORY : <code>string</code><a class="headerlink" href="#not_existing_directory-string" title="Permanent link">&para;</a></h2>
<p>The folder specified as folder_to_save does not exist (checked by BaseKonnector)</p>
<p><strong>Kind</strong>: global constant<br />
<a name="VENDOR_DOWN"></a></p>
<h2 id="vendor_down-string">VENDOR_DOWN : <code>string</code><a class="headerlink" href="#vendor_down-string" title="Permanent link">&para;</a></h2>
<p>The vendor&rsquo;s website is down</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED"></a></p>
<h2 id="user_action_needed-string">USER_ACTION_NEEDED : <code>string</code><a class="headerlink" href="#user_action_needed-string" title="Permanent link">&para;</a></h2>
<p>There was an unexpected error, please take a look at the logs to know what happened</p>
<p><strong>Kind</strong>: global constant<br />
<a name="FILE_DOWNLOAD_FAILED"></a></p>
<h2 id="file_download_failed-string">FILE_DOWNLOAD_FAILED : <code>string</code><a class="headerlink" href="#file_download_failed-string" title="Permanent link">&para;</a></h2>
<p>There was a problem while downloading a file</p>
<p><strong>Kind</strong>: global constant<br />
<a name="SAVE_FILE_FAILED"></a></p>
<h2 id="save_file_failed-string">SAVE_FILE_FAILED : <code>string</code><a class="headerlink" href="#save_file_failed-string" title="Permanent link">&para;</a></h2>
<p>There was a problem while saving a file</p>
<p><strong>Kind</strong>: global constant<br />
<a name="DISK_QUOTA_EXCEEDED"></a></p>
<h2 id="disk_quota_exceeded-string">DISK_QUOTA_EXCEEDED : <code>string</code><a class="headerlink" href="#disk_quota_exceeded-string" title="Permanent link">&para;</a></h2>
<p>Could not save a file to the cozy because of disk quota exceeded</p>
<p><strong>Kind</strong>: global constant<br />
<a name="CHALLENGE_ASKED"></a></p>
<h2 id="challenge_asked-string">CHALLENGE_ASKED : <code>string</code><a class="headerlink" href="#challenge_asked-string" title="Permanent link">&para;</a></h2>
<p>It seems that the website requires a second authentification factor that we don’t support yet.</p>
<p><strong>Kind</strong>: global constant<br />
<a name="LOGIN_FAILED_TOO_MANY_ATTEMPTS"></a></p>
<h2 id="login_failed_too_many_attempts-string">LOGIN_FAILED_TOO_MANY_ATTEMPTS : <code>string</code><a class="headerlink" href="#login_failed_too_many_attempts-string" title="Permanent link">&para;</a></h2>
<p>Temporarily blocked</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_OAUTH_OUTDATED"></a></p>
<h2 id="user_action_needed_oauth_outdated-string">USER_ACTION_NEEDED_OAUTH_OUTDATED : <code>string</code><a class="headerlink" href="#user_action_needed_oauth_outdated-string" title="Permanent link">&para;</a></h2>
<p>Access refresh required</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_ACCOUNT_REMOVED"></a></p>
<h2 id="user_action_needed_account_removed-string">USER_ACTION_NEEDED_ACCOUNT_REMOVED : <code>string</code><a class="headerlink" href="#user_action_needed_account_removed-string" title="Permanent link">&para;</a></h2>
<p>Unavailable account</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_CHANGE_PASSWORD"></a></p>
<h2 id="user_action_needed_change_password-string">USER_ACTION_NEEDED_CHANGE_PASSWORD : <code>string</code><a class="headerlink" href="#user_action_needed_change_password-string" title="Permanent link">&para;</a></h2>
<p>Unavailable account</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_PERMISSIONS_CHANGED"></a></p>
<h2 id="user_action_needed_permissions_changed-string">USER_ACTION_NEEDED_PERMISSIONS_CHANGED : <code>string</code><a class="headerlink" href="#user_action_needed_permissions_changed-string" title="Permanent link">&para;</a></h2>
<p>Password update required</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_CGU_FORM"></a></p>
<h2 id="user_action_needed_cgu_form-string">USER_ACTION_NEEDED_CGU_FORM : <code>string</code><a class="headerlink" href="#user_action_needed_cgu_form-string" title="Permanent link">&para;</a></h2>
<p>The user needs to accept a CGU form before accessing the rest of the website</p>
<p><strong>Kind</strong>: global constant<br />
<a name="CAPTCHA_RESOLUTION_FAILED"></a></p>
<h2 id="captcha_resolution_failed-string">CAPTCHA_RESOLUTION_FAILED : <code>string</code><a class="headerlink" href="#captcha_resolution_failed-string" title="Permanent link">&para;</a></h2>
<p>solveCaptcha failed to solve the captcha</p>
<p><strong>Kind</strong>: global constant<br />
<a name="LOGIN_FAILED_NEEDS_SECRET"></a></p>
<h2 id="login_failed_needs_secret-string">LOGIN_FAILED_NEEDS_SECRET : <code>string</code><a class="headerlink" href="#login_failed_needs_secret-string" title="Permanent link">&para;</a></h2>
<p>Additionnal information is needed to check your login details</p>
<p><strong>Kind</strong>: global constant<br />
<a name="MAINTENANCE"></a></p>
<h2 id="maintenance-string">MAINTENANCE : <code>string</code><a class="headerlink" href="#maintenance-string" title="Permanent link">&para;</a></h2>
<p>remote website seems to be unavailable</p>
<p><strong>Kind</strong>: global constant<br />
<a name="TERMS_VERSION_MISMATCH"></a></p>
<h2 id="terms_version_mismatch-string">TERMS_VERSION_MISMATCH : <code>string</code><a class="headerlink" href="#terms_version_mismatch-string" title="Permanent link">&para;</a></h2>
<p>User needs to accept new terms</p>
<p><strong>Kind</strong>: global constant<br />
<a name="UNKNOWN_ERROR"></a></p>
<h2 id="unknown_error-string">UNKNOWN_ERROR : <code>string</code><a class="headerlink" href="#unknown_error-string" title="Permanent link">&para;</a></h2>
<p>unkown error</p>
<p><strong>Kind</strong>: global constant<br />
<a name="UNKNOWN_ERROR_PARTIAL_SYNC"></a></p>
<h2 id="unknown_error_partial_sync-string">UNKNOWN_ERROR_PARTIAL_SYNC : <code>string</code><a class="headerlink" href="#unknown_error_partial_sync-string" title="Permanent link">&para;</a></h2>
<p>The synchronization is complete but some elements may be missing</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_SCA_REQUIRED"></a></p>
<h2 id="user_action_needed_sca_required-string">USER_ACTION_NEEDED_SCA_REQUIRED : <code>string</code><a class="headerlink" href="#user_action_needed_sca_required-string" title="Permanent link">&para;</a></h2>
<p>Renewal of authentication required</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_TWOFA_EXPIRED"></a></p>
<h2 id="user_action_needed_twofa_expired-string">USER_ACTION_NEEDED_TWOFA_EXPIRED : <code>string</code><a class="headerlink" href="#user_action_needed_twofa_expired-string" title="Permanent link">&para;</a></h2>
<p>Authentication renewal required</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_WEBAUTH_REQUIRED"></a></p>
<h2 id="user_action_needed_webauth_required-string">USER_ACTION_NEEDED_WEBAUTH_REQUIRED : <code>string</code><a class="headerlink" href="#user_action_needed_webauth_required-string" title="Permanent link">&para;</a></h2>
<p>Authentication on vendor website required</p>
<p><strong>Kind</strong>: global constant<br />
<a name="USER_ACTION_NEEDED_WRONG_TWOFA_CODE"></a></p>
<h2 id="user_action_needed_wrong_twofa_code-string">USER_ACTION_NEEDED_WRONG_TWOFA_CODE : <code>string</code><a class="headerlink" href="#user_action_needed_wrong_twofa_code-string" title="Permanent link">&para;</a></h2>
<p>Incorrect strong authentication code</p>
<p><strong>Kind</strong>: global constant<br />
<a name="VENDOR_DOWN_BANK_DOWN"></a></p>
<h2 id="vendor_down_bank_down-string">VENDOR_DOWN_BANK_DOWN : <code>string</code><a class="headerlink" href="#vendor_down_bank_down-string" title="Permanent link">&para;</a></h2>
<p>Unavailable bank website</p>
<p><strong>Kind</strong>: global constant<br />
<a name="VENDOR_DOWN_LINXO_DOWN"></a></p>
<h2 id="vendor_down_linxo_down-string">VENDOR_DOWN_LINXO_DOWN : <code>string</code><a class="headerlink" href="#vendor_down_linxo_down-string" title="Permanent link">&para;</a></h2>
<p>Unavailable bank website</p>
<p><strong>Kind</strong>: global constant<br />
<a name="attachProcessEventHandlers"></a></p>
<h2 id="attachprocesseventhandlersprcs-function">attachProcessEventHandlers(prcs) ⇒ <code>function</code><a class="headerlink" href="#attachprocesseventhandlersprcs-function" title="Permanent link">&para;</a></h2>
<p>Attach event handlers to catch uncaught exceptions/rejections and signals.
Log them as critical and exit the process accordingly.
If the cleanup function has not been called, calling again the function
is a no-op.</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>function</code> - When called, removes the signal handlers  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>prcs</td>
<td><code>object</code></td>
<td>Process object, default to current process</td>
</tr>
</tbody>
</table>
<p><a name="mkSpec"></a></p>
<h2 id="mkspec">mkSpec()<a class="headerlink" href="#mkspec" title="Permanent link">&para;</a></h2>
<p>Declarative scraping.</p>
<p>Describe your items attributes and where to find/parse them
instead of imperatively building them.</p>
<p>Heavily inspired by <a href="https://medialab.github.io/artoo/">artoo</a> scraping method.</p>
<p><strong>Kind</strong>: global function<br />
<a name="scrape"></a></p>
<h2 id="scrape-specs-childselector-object-array">scrape($, specs, [childSelector]) ⇒ <code>object</code> | <code>Array</code><a class="headerlink" href="#scrape-specs-childselector-object-array" title="Permanent link">&para;</a></h2>
<p>Scrape a cheerio object for properties</p>
<p><strong>Kind</strong>: global function<br />
<strong>Returns</strong>: <code>object</code> | <code>Array</code> - - Item(s) scraped  </p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$</td>
<td><code>object</code></td>
<td>Cheerio node which will be scraped</td>
</tr>
<tr>
<td>specs</td>
<td><code>object</code> | <code>string</code></td>
<td>Options object describing what you want to scrape</td>
</tr>
<tr>
<td>[childSelector]</td>
<td><code>string</code></td>
<td>If passed, scrape will return an array of items</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong><br />
<code>scrape</code> can be used to declaratively extract data :</p>
<ul>
<li>For one object :</li>
</ul>
<div class="codehilite"><pre><span></span>const item = scrape($(&#39;#item&#39;), {
  title: &#39;.title&#39;,
  content: &#39;.content&#39;
})
</pre></div>


<ul>
<li>For a list of objects :</li>
</ul>
<div class="codehilite"><pre><span></span>const items = scrape($(&#39;#content&#39;), {
  title: &#39;.title&#39;,
  content: &#39;.content&#39;
}, &#39;.item&#39;)
</pre></div>


<p>For more power, you can use <code>object</code>s for each retriever :</p>
<div class="codehilite"><pre><span></span>const items = scrape($(&#39;#content&#39;), {
  title: &#39;.title&#39;,
  content: &#39;.content&#39;,
  link: {
    sel: &#39;a&#39;,
    attr: &#39;href&#39;
  },
}, &#39;.item&#39;)
</pre></div>


<p>Here the <code>href</code> attribute of the <code>a</code> inside <code>.item</code>s would have been
put into the <code>link</code> attribute of the items returned by <code>scrape</code>.</p>
<p>Available options :</p>
<ul>
<li><code>sel</code>: the CSS selector used to target the HTML node from which data will be scraped</li>
<li><code>attr</code>: the HTML attribute from which to extract data</li>
<li><code>parse</code>: function applied to the value extracted (<code>{ sel: '.price', parse: parseAmount }</code>)</li>
<li><code>fn</code>: if you need something more complicated than <code>attr</code>, you can use this function, it receives
the complete DOM node. <code>{ sel: '.person', fn: $node =&gt; $node.attr('data-name') + $node.attr('data-firstname') }</code></li>
</ul>
<h3 id="permissions">⚠ Permissions<a class="headerlink" href="#permissions" title="Permanent link">&para;</a></h3>
<p>Please note that some classes require some permissions:</p>
<ul>
<li><code>io.cozy.accounts</code> for the <code>BaseKonnector</code> class (<code>GET</code> only)</li>
<li><code>io.cozy.files</code> to save files</li>
<li><code>io.cozy.bills</code> to save bills</li>
<li><code>io.cozy.bank.operations</code> for <code>linkBankOperations</code></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="README" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                README
              </span>
            </div>
          </a>
        
        
          <a href="../cli/" title="CLI" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                CLI
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="/en/privacy">privacy</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.2.3",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="https://matomo.cozycloud.cc/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '25']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->

  </body>
</html>