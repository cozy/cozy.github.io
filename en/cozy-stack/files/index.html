



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-stack/files/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.4.0">
    
    
      
        <title>/files - Virtual File System - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-app-publish"}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "cozy-desktop", "repo": "https://github.com/cozy-labs/cozy-desktop.git", "subdir": "doc"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-notifications", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-notifications"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "cozy-home", "repo": "https://github.com/cozy/cozy-home.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#virtual-file-system" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                /files - Virtual File System
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../tutorials/app/" title="Tutorials" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../cozy-client/getting-started/" title="Libraries" class="md-tabs__link">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../projects/" title="Projects" class="md-tabs__link">
          Projects
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Manipulate data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Manipulate data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/pouchdb/" title="PouchDB" class="md-nav__link">
      PouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/doctypes/" title="DocTypes" class="md-nav__link">
      DocTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/qualification/" title="Qualification" class="md-nav__link">
      Qualification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/data/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/translate/" title="Translate Apps" class="md-nav__link">
      Translate Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Self-Hosting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Self-Hosting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/docker/" title="Running inside Docker" class="md-nav__link">
      Running inside Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3" type="checkbox" id="nav-2-5-3">
    
    <label class="md-nav__link" for="nav-2-5-3">
      Traditional installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-5-3">
        Traditional installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-1" type="checkbox" id="nav-2-5-3-1">
    
    <label class="md-nav__link" for="nav-2-5-3-1">
      Requirements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-1">
        Requirements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/" title="What you need" class="md-nav__link">
      What you need
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/couchdb/" title="Installing CouchDB" class="md-nav__link">
      Installing CouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/requirements/nodejs/" title="Installing NodeJS" class="md-nav__link">
      Installing NodeJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-2" type="checkbox" id="nav-2-5-3-2">
    
    <label class="md-nav__link" for="nav-2-5-3-2">
      Installing cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-2">
        Installing cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/package/" title="From precompiled package" class="md-nav__link">
      From precompiled package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/install/sources/" title="From sources" class="md-nav__link">
      From sources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-3" type="checkbox" id="nav-2-5-3-3">
    
    <label class="md-nav__link" for="nav-2-5-3-3">
      Finalize installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-3">
        Finalize installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/nginx/" title="Nginx and certificates" class="md-nav__link">
      Nginx and certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/apache/" title="Using Apache instead of Nginx" class="md-nav__link">
      Using Apache instead of Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/finalize/create_instance/" title="Create first instance" class="md-nav__link">
      Create first instance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-4" type="checkbox" id="nav-2-5-3-4">
    
    <label class="md-nav__link" for="nav-2-5-3-4">
      Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-4">
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/more_instances/" title="Create more instances" class="md-nav__link">
      Create more instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/upgrade/" title="Upgrade cozy-stack" class="md-nav__link">
      Upgrade cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/mail/" title="Configure mail sending" class="md-nav__link">
      Configure mail sending
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhosting/administration/office/" title="Online edition of office documents" class="md-nav__link">
      Online edition of office documents
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/services/" title="Develop a service from your application" class="md-nav__link">
      Develop a service from your application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/run-connectors-on-local-cozy-stack/" title="Run Connectors With a Local cozy-stack" class="md-nav__link">
      Run Connectors With a Local cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1">
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/timeseries/" title="Using time series" class="md-nav__link">
      Using time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-pouch-link.md" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-ui/" title="Build the user interface (ui)" class="md-nav__link">
      Build the user interface (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.ai.chat.conversations/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.apps.suggestions/" title="App suggestions" class="md-nav__link">
      App suggestions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.coachco2/" title="CoachCO2" class="md-nav__link">
      CoachCO2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.docrules/" title="DocRules" class="md-nav__link">
      DocRules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.home.settings/" title="Home settings" class="md-nav__link">
      Home settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.notes/" title="Notes" class="md-nav__link">
      Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.timeseries/" title="Time series" class="md-nav__link">
      Time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.todos/" title="Todos" class="md-nav__link">
      Todos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.nextcloud.files/" title="Remote NextCloud files" class="md-nav__link">
      Remote NextCloud files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.organizations/" title="Bitwarden organizations" class="md-nav__link">
      Bitwarden organizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.bitwarden.contacts/" title="Bitwarden contacts" class="md-nav__link">
      Bitwarden contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/cc.cozycloud.announcements/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-notifications/" title="Send notifications (cozy-notifications)" class="md-nav__link">
      Send notifications (cozy-notifications)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6" checked>
    
    <label class="md-nav__link" for="nav-4-6">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1" type="checkbox" id="nav-4-6-1" checked>
    
    <label class="md-nav__link" for="nav-4-6-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-6-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-2" type="checkbox" id="nav-4-6-1-2">
    
    <label class="md-nav__link" for="nav-4-6-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../admin/" title="Using the admin API" class="md-nav__link">
      Using the admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../important-changes/" title="Important changes" class="md-nav__link">
      Important changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-3" type="checkbox" id="nav-4-6-1-3">
    
    <label class="md-nav__link" for="nav-4-6-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../http-api/" title="Using the HTTP API" class="md-nav__link">
      Using the HTTP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../konnectors-dev/" title="Running a konnector locally" class="md-nav__link">
      Running a konnector locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-4" type="checkbox" id="nav-4-6-1-4">
    
    <label class="md-nav__link" for="nav-4-6-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../flagship/" title="Flagship app" class="md-nav__link">
      Flagship app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../move-design/" title="Move design" class="md-nav__link">
      Move design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../realtime-internals/" title="Realtime internals" class="md-nav__link">
      Realtime internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-5" type="checkbox" id="nav-4-6-1-5" checked>
    
    <label class="md-nav__link" for="nav-4-6-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ai/" title="/ai - AI" class="md-nav__link">
      /ai - AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../delegated-auth/" title="/oidc - Delegated authentication" class="md-nav__link">
       /oidc - Delegated authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../connection-check/" title="/connection_check - Connection check" class="md-nav__link">
      /connection_check - Connection check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contacts/" title="/contacts - Contacts" class="md-nav__link">
      /contacts - Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        /files - Virtual File System
      </label>
    
    <a href="./" title="/files - Virtual File System" class="md-nav__link md-nav__link--active">
      /files - Virtual File System
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#directories" title="Directories" class="md-nav__link">
    Directories
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root-directory" title="Root directory" class="md-nav__link">
    Root directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdir-id" title="POST /files/:dir-id" class="md-nav__link">
    POST /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesshared-drives" title="POST /files/shared-drives" class="md-nav__link">
    POST /files/shared-drives
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_1" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_1" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-id" title="GET /files/:file-id" class="md-nav__link">
    GET /files/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_2" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_2" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idsize" title="GET /files/:file-id/size" class="md-nav__link">
    GET /files/:file-id/size
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_3" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_3" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-files_all_docs" title="POST /files/_all_docs" class="md-nav__link">
    POST /files/_all_docs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_4" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_4" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-files_changes" title="GET /files/_changes" class="md-nav__link">
    GET /files/_changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_5" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_5" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-files_find" title="POST /files/_find" class="md-nav__link">
    POST /files/_find
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_6" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_6" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesdir-id" title="DELETE /files/:dir-id" class="md-nav__link">
    DELETE /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-headers_1" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files" title="Files" class="md-nav__link">
    Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-filesdir-id_1" title="POST /files/:dir-id" class="md-nav__link">
    POST /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_1" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers_2" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_7" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_1" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_7" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesuploadmetadata" title="POST /files/upload/metadata" class="md-nav__link">
    POST /files/upload/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_8" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_8" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadfile-id" title="GET /files/download/:file-id" class="md-nav__link">
    GET /files/download/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_9" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_9" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownload" title="GET /files/download" class="md-nav__link">
    GET /files/download
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_10" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idiconsecret" title="GET /files/:file-id/icon/:secret" class="md-nav__link">
    GET /files/:file-id/icon/:secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idpreviewsecret" title="GET /files/:file-id/preview/:secret" class="md-nav__link">
    GET /files/:file-id/preview/:secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idthumbnailssecretformat" title="GET /files/:file-id/thumbnails/:secret/:format" class="md-nav__link">
    GET /files/:file-id/thumbnails/:secret/:format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#put-filesfile-id" title="PUT /files/:file-id" class="md-nav__link">
    PUT /files/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_2" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers_3" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_11" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_2" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_10" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesfile-idcopy" title="POST /files/:file-id/copy" class="md-nav__link">
    POST /files/:file-id/copy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_3" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_12" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_3" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_11" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesfile-id" title="DELETE /files/:file-id" class="md-nav__link">
    DELETE /files/:file-id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common" title="Common" class="md-nav__link">
    Common
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filesmetadata" title="GET /files/metadata" class="md-nav__link">
    GET /files/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_13" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_12" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-filesfile-id-and-patch-filesmetadata" title="PATCH /files/:file-id and PATCH /files/metadata" class="md-nav__link">
    PATCH /files/:file-id and PATCH /files/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-headers_4" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_14" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_4" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_13" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-files" title="PATCH /files/" class="md-nav__link">
    PATCH /files/
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_15" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_5" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesiddescription" title="POST /files/:id/description" class="md-nav__link">
    POST /files/:id/description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_16" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_14" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesarchive" title="POST /files/archive" class="md-nav__link">
    POST /files/archive
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_17" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_15" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesarchivekeyname" title="GET /files/archive/:key/:name" class="md-nav__link">
    GET /files/archive/:key/:name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadspathfile_path" title="POST /files/downloads?Path=file_path" class="md-nav__link">
    POST /files/downloads?Path=file_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadsidfile_id" title="POST /files/downloads?Id=file_id" class="md-nav__link">
    POST /files/downloads?Id=file_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadsversionidfile_idversion_id" title="POST /files/downloads?VersionId=file_id/version_id" class="md-nav__link">
    POST /files/downloads?VersionId=file_id/version_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadssecretname" title="GET /files/downloads/:secret/:name" class="md-nav__link">
    GET /files/downloads/:secret/:name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#versions" title="Versions" class="md-nav__link">
    Versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadfile-idversion-id" title="GET /files/download/:file-id/:version-id" class="md-nav__link">
    GET /files/download/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_18" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesfile-idversions" title="POST /files/:file-id/versions" class="md-nav__link">
    POST /files/:file-id/versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_4" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_19" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesrevertfile-idversion-id" title="POST /files/revert/:file-id/:version-id" class="md-nav__link">
    POST /files/revert/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_20" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-filesfile-idversion-id" title="PATCH /files/:file-id/:version-id" class="md-nav__link">
    PATCH /files/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_21" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesfile-idversion-id" title="DELETE /files/:file-id/:version-id" class="md-nav__link">
    DELETE /files/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_22" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_16" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesversions" title="DELETE /files/versions" class="md-nav__link">
    DELETE /files/versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_23" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_17" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trash" title="Trash" class="md-nav__link">
    Trash
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filestrash" title="GET /files/trash" class="md-nav__link">
    GET /files/trash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-string_5" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_24" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_18" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filestrashfile-id" title="POST /files/trash/:file-id" class="md-nav__link">
    POST /files/trash/:file-id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filestrashfile-id" title="DELETE /files/trash/:file-id" class="md-nav__link">
    DELETE /files/trash/:file-id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filestrash" title="DELETE /files/trash" class="md-nav__link">
    DELETE /files/trash
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trashed-attribute" title="Trashed attribute" class="md-nav__link">
    Trashed attribute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-time-via-websockets" title="Real-time via websockets" class="md-nav__link">
    Real-time via websockets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../not-synchronized-vfs/" title="/files - Not synchronized directories" class="md-nav__link">
       /files - Not synchronized directories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../konnectors/" title="/konnectors - Konnectors" class="md-nav__link">
      /konnectors - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../notes/" title="/notes - Notes for collaborative edition" class="md-nav__link">
      /notes - Notes for collaborative edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../office/" title="/office - Collaborative edition of Office documents" class="md-nav__link">
      /office - Collaborative edition of Office documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nextcloud/" title="/remote/nextcloud - NextCloud" class="md-nav__link">
       /remote/nextcloud - NextCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shortcuts/" title="/shortcuts - Shortcuts" class="md-nav__link">
      /shortcuts - Shortcuts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wellknown/" title="/.well-known - Well-known" class="md-nav__link">
      /.well-known - Well-known
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projects/" title="Documentations" class="md-nav__link">
      Documentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Cozy Desktop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Cozy Desktop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/file_systems/" title="Filesystems" class="md-nav__link">
      Filesystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/ignore_files/" title="Ignore files" class="md-nav__link">
      Ignore files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/inotify/" title="inotify" class="md-nav__link">
      inotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/limitations/" title="Limitations" class="md-nav__link">
      Limitations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/macos/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/usage/windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-3" type="checkbox" id="nav-5-2-3">
    
    <label class="md-nav__link" for="nav-5-2-3">
      Developer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-3">
        Developer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/api_doc/" title="API Documentation" class="md-nav__link">
      API Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/coffeescript/" title="Cofeescript" class="md-nav__link">
      Cofeescript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/log_analysis/" title="Log analysis" class="md-nav__link">
      Log analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/developer/setup/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-desktop/feedback/" title="Feddback" class="md-nav__link">
      Feddback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#directories" title="Directories" class="md-nav__link">
    Directories
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root-directory" title="Root directory" class="md-nav__link">
    Root directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdir-id" title="POST /files/:dir-id" class="md-nav__link">
    POST /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesshared-drives" title="POST /files/shared-drives" class="md-nav__link">
    POST /files/shared-drives
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_1" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_1" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-id" title="GET /files/:file-id" class="md-nav__link">
    GET /files/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_2" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_2" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idsize" title="GET /files/:file-id/size" class="md-nav__link">
    GET /files/:file-id/size
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_3" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_3" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-files_all_docs" title="POST /files/_all_docs" class="md-nav__link">
    POST /files/_all_docs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_4" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_4" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-files_changes" title="GET /files/_changes" class="md-nav__link">
    GET /files/_changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_5" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_5" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-files_find" title="POST /files/_find" class="md-nav__link">
    POST /files/_find
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_6" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_6" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesdir-id" title="DELETE /files/:dir-id" class="md-nav__link">
    DELETE /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-headers_1" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files" title="Files" class="md-nav__link">
    Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-filesdir-id_1" title="POST /files/:dir-id" class="md-nav__link">
    POST /files/:dir-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_1" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers_2" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_7" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_1" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_7" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesuploadmetadata" title="POST /files/upload/metadata" class="md-nav__link">
    POST /files/upload/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_8" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_8" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadfile-id" title="GET /files/download/:file-id" class="md-nav__link">
    GET /files/download/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_9" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_9" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownload" title="GET /files/download" class="md-nav__link">
    GET /files/download
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_10" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idiconsecret" title="GET /files/:file-id/icon/:secret" class="md-nav__link">
    GET /files/:file-id/icon/:secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idpreviewsecret" title="GET /files/:file-id/preview/:secret" class="md-nav__link">
    GET /files/:file-id/preview/:secret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesfile-idthumbnailssecretformat" title="GET /files/:file-id/thumbnails/:secret/:format" class="md-nav__link">
    GET /files/:file-id/thumbnails/:secret/:format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#put-filesfile-id" title="PUT /files/:file-id" class="md-nav__link">
    PUT /files/:file-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_2" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-headers_3" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_11" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_2" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_10" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesfile-idcopy" title="POST /files/:file-id/copy" class="md-nav__link">
    POST /files/:file-id/copy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_3" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_12" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_3" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_11" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesfile-id" title="DELETE /files/:file-id" class="md-nav__link">
    DELETE /files/:file-id
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common" title="Common" class="md-nav__link">
    Common
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filesmetadata" title="GET /files/metadata" class="md-nav__link">
    GET /files/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_13" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_12" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-filesfile-id-and-patch-filesmetadata" title="PATCH /files/:file-id and PATCH /files/metadata" class="md-nav__link">
    PATCH /files/:file-id and PATCH /files/metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-headers_4" title="HTTP headers" class="md-nav__link">
    HTTP headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_14" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_4" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_13" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-files" title="PATCH /files/" class="md-nav__link">
    PATCH /files/
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_15" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-codes_5" title="Status codes" class="md-nav__link">
    Status codes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesiddescription" title="POST /files/:id/description" class="md-nav__link">
    POST /files/:id/description
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_16" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_14" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesarchive" title="POST /files/archive" class="md-nav__link">
    POST /files/archive
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_17" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_15" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesarchivekeyname" title="GET /files/archive/:key/:name" class="md-nav__link">
    GET /files/archive/:key/:name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadspathfile_path" title="POST /files/downloads?Path=file_path" class="md-nav__link">
    POST /files/downloads?Path=file_path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadsidfile_id" title="POST /files/downloads?Id=file_id" class="md-nav__link">
    POST /files/downloads?Id=file_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesdownloadsversionidfile_idversion_id" title="POST /files/downloads?VersionId=file_id/version_id" class="md-nav__link">
    POST /files/downloads?VersionId=file_id/version_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadssecretname" title="GET /files/downloads/:secret/:name" class="md-nav__link">
    GET /files/downloads/:secret/:name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#versions" title="Versions" class="md-nav__link">
    Versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filesdownloadfile-idversion-id" title="GET /files/download/:file-id/:version-id" class="md-nav__link">
    GET /files/download/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_18" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesfile-idversions" title="POST /files/:file-id/versions" class="md-nav__link">
    POST /files/:file-id/versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-string_4" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request_19" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filesrevertfile-idversion-id" title="POST /files/revert/:file-id/:version-id" class="md-nav__link">
    POST /files/revert/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_20" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patch-filesfile-idversion-id" title="PATCH /files/:file-id/:version-id" class="md-nav__link">
    PATCH /files/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_21" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesfile-idversion-id" title="DELETE /files/:file-id/:version-id" class="md-nav__link">
    DELETE /files/:file-id/:version-id
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_22" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_16" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filesversions" title="DELETE /files/versions" class="md-nav__link">
    DELETE /files/versions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_23" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_17" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trash" title="Trash" class="md-nav__link">
    Trash
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-filestrash" title="GET /files/trash" class="md-nav__link">
    GET /files/trash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-string_5" title="Query-String" class="md-nav__link">
    Query-String
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request_24" title="Request" class="md-nav__link">
    Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_18" title="Response" class="md-nav__link">
    Response
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-filestrashfile-id" title="POST /files/trash/:file-id" class="md-nav__link">
    POST /files/trash/:file-id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filestrashfile-id" title="DELETE /files/trash/:file-id" class="md-nav__link">
    DELETE /files/trash/:file-id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-filestrash" title="DELETE /files/trash" class="md-nav__link">
    DELETE /files/trash
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trashed-attribute" title="Trashed attribute" class="md-nav__link">
    Trashed attribute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-time-via-websockets" title="Real-time via websockets" class="md-nav__link">
    Real-time via websockets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" title="Example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-stack/files.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <p><a href="../#table-of-contents">Table of contents</a></p>
<h1 id="virtual-file-system">Virtual File System<a class="headerlink" href="#virtual-file-system" title="Permanent link">&para;</a></h1>
<p>Cozy applications can use files for storing binary content, like photos or bills
in PDF. This service offers a REST API to manipulate easily without having to
know the underlying storage layer. The metadata are kept in CouchDB, but the
binaries can go to the local system, or a Swift instance.</p>
<h2 id="directories">Directories<a class="headerlink" href="#directories" title="Permanent link">&para;</a></h2>
<p>A directory is a container for files and sub-directories.</p>
<p>Its path is the path of its parent, a slash (<code>/</code>), and its name. It&rsquo;s case
sensitive.</p>
<h3 id="root-directory">Root directory<a class="headerlink" href="#root-directory" title="Permanent link">&para;</a></h3>
<p>The root of the virtual file system is a special directory with id
<code>io.cozy.files.root-dir</code>.</p>
<p>You can use it in any request where you would use a directory, except you cannot
delete it.</p>
<h3 id="post-filesdir-id">POST /files/:dir-id<a class="headerlink" href="#post-filesdir-id" title="Permanent link">&para;</a></h3>
<p>Create a new directory. The <code>dir-id</code> parameter is optional. When it&rsquo;s not given,
the directory is created at the root of the virtual file system.</p>
<h4 id="query-string">Query-String<a class="headerlink" href="#query-string" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>directory</code></td>
</tr>
<tr>
<td>Name</td>
<td>the directory name</td>
</tr>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
<tr>
<td>CreatedAt</td>
<td>the creation date</td>
</tr>
<tr>
<td>MetadataID</td>
<td>the identifier of a metadata object</td>
</tr>
</tbody>
</table>
<h4 id="http-headers">HTTP headers<a class="headerlink" href="#http-headers" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Date</td>
<td>The modification date of the directory</td>
</tr>
</tbody>
</table>
<h4 id="request">Request<a class="headerlink" href="#request" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?Type=directory&amp;Name=phone&amp;Tags=bills,konnectors</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 19 Sep 2016 12:35:08 GMT</span>
</pre></div>


<h4 id="status-codes">Status codes<a class="headerlink" href="#status-codes" title="Permanent link">&para;</a></h4>
<ul>
<li>201 Created, when the directory has been successfully created</li>
<li>404 Not Found, when the parent directory does not exist</li>
<li>409 Conflict, when a directory with the same name already exists</li>
<li>422 Unprocessable Entity, when the <code>Type</code>, <code>Name</code>, or <code>MetadataID</code> parameter
  is missing or invalid</li>
</ul>
<h4 id="response">Response<a class="headerlink" href="#response" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">https://cozy.example.com/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-ff3beeb456eb&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
      <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents/phone&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bills&quot;</span><span class="p">,</span> <span class="s2">&quot;konnectors&quot;</span><span class="p">],</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:48Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:48Z&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;not_synchronized_on&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee/relationships/not_synchronized_on&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.oauth.clients&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;653dfdb0-0595-0139-92df-543d7eb8149c&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><strong>Note</strong>: see <a href="../not-synchronized-vfs/">not synchronized directories</a> for
more informations about the <code>not_synchronized_on</code> field.</p>
<h3 id="post-filesshared-drives">POST /files/shared-drives<a class="headerlink" href="#post-filesshared-drives" title="Permanent link">&para;</a></h3>
<p>This endpoint returns the information about the Shared Drives directory. If the
directory does not exist, it is created.</p>
<h4 id="request_1">Request<a class="headerlink" href="#request_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="err">POST /files/shared-drives</span>
<span class="err">Accept: application/vnd.api+json</span>
</pre></div>


<h4 id="response_1">Response<a class="headerlink" href="#response_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.shared-drives-dir&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-e4abdb5a&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Drives&quot;</span><span class="p">,</span>
      <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Drives&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-03-25T15:22:00Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-03-25T15:22:00Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-03-25T15:22:00Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-03-25T15:22:00Z&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/io.cozy.files.root-dir&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.root-dir&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/io.cozy.files.shared-drives-dir&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesfile-id">GET /files/:file-id<a class="headerlink" href="#get-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Get a directory or a file informations. In the case of a directory, it contains
the list of files and sub-directories inside it. For a note, its images are
included.</p>
<p>Contents is paginated following <a href="../http-api/#pagination">jsonapi conventions</a>.
The default limit is 30 entries.</p>
<h4 id="request_2">Request<a class="headerlink" href="#request_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="response_2">Response<a class="headerlink" href="#response_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?page[cursor]=9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-e36ab092&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Documents&quot;</span><span class="p">,</span>
      <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:00Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:00Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:47Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:47Z&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;contents&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;included&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-ff3beeb456eb&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Documents/phone&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:35:08Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bills&quot;</span><span class="p">,</span> <span class="s2">&quot;konnectors&quot;</span><span class="p">],</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:47Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:47Z&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/6494e0ac-dfcb-11e5-88c1-472e84a9cbee&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.txt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesfile-idsize">GET /files/:file-id/size<a class="headerlink" href="#get-filesfile-idsize" title="Permanent link">&para;</a></h3>
<p>This endpoint returns the size taken by the files in a directory, including
those in subdirectories.</p>
<h4 id="request_3">Request<a class="headerlink" href="#request_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81/size</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="response_3">Response<a class="headerlink" href="#response_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.sizes&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-files_all_docs">POST <code>/files/_all_docs</code><a class="headerlink" href="#post-files_all_docs" title="Permanent link">&para;</a></h3>
<p>This route allows to fetch several files in one request. It is the same as the
<code>_all_docs</code> request for CouchDB, except the response is in the JSON-API format,
(with thumbnails and path for the files).</p>
<h3 id="request_4">Request<a class="headerlink" href="#request_4" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/_all_docs</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;e8c1561846c730428180a5f6c6107914&quot;</span><span class="p">,</span> <span class="s2">&quot;e8c1561846c730428180a5f6c6109007&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="response_4">Response<a class="headerlink" href="#response_4" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 27 Sept 2016 12:28:53 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">...</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;e8c1561846c730428180a5f6c6107914&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;nicepic1.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;345385&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;12cGYwT+RiNjFxf4f7AmzQ==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Pictures/nicepic1.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;extractor_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
          <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-235e715b1d82a93285be1b0bd691b779&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/tiny&quot;</span><span class="p">,</span>
        <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/small&quot;</span><span class="p">,</span>
        <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/medium&quot;</span><span class="p">,</span>
        <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/large&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f49b4087cbf946dfc759214394009a6c&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;e8c1561846c730428180a5f6c6109007&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;nicepic2.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;323009&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;Fla3ucNXuW2Xw/TK8pfsPA==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Pictures/nicepic2.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;extractor_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
          <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-4883d6b8ccad32f8fb056af9b7f8b37f&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/tiny&quot;</span><span class="p">,</span>
        <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/small&quot;</span><span class="p">,</span>
        <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/medium&quot;</span><span class="p">,</span>
        <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/large&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f49b4087cbf946dfc759214394009a6c&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-files_changes">GET <code>/files/_changes</code><a class="headerlink" href="#get-files_changes" title="Permanent link">&para;</a></h3>
<p>This endpoint is similar to the changes feed of CouchDB for io.cozy.files.
There are a few specificities:</p>
<ul>
<li>it is wrapped in the VFS lock to avoid seeing inconsistent results</li>
<li>it automatically skips design docs</li>
<li>if the requests is coming from an OAuth client, it excludes the files and directories that are in a not synchronized folder</li>
<li>it only supports the options <code>since</code>, <code>limit</code>, and <code>include_docs</code> of CouchDB</li>
<li>it has an option <code>fields</code> to only include those fields in the results</li>
<li>it has an option <code>include_file_path</code> to add the <code>path</code> for files</li>
<li>it has two options <code>skip_deleted</code> and <code>skip_trashed</code> to not send to the client the deleted/trashed files and directories.</li>
</ul>
<h3 id="request_5">Request<a class="headerlink" href="#request_5" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/_changes?include_docs=true&amp;fields=type,name,dir_id&amp;skip_deleted=true&amp;limit=3</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h3 id="response_5">Response<a class="headerlink" href="#response_5" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;last_seq&quot;</span><span class="p">:</span> <span class="s2">&quot;13-g1AAAABHeJzLYWBgYMxgTmHgzcvPy09JdcjLz8gvLskBCjMlMuSxMPwHgqwM5kTeXKAQe5Jpmrl5ojG68iwA2MMV1A&quot;</span><span class="p">,</span>
  <span class="nt">&quot;pending&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
  <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.root-dir&quot;</span><span class="p">,</span>
      <span class="nt">&quot;seq&quot;</span><span class="p">:</span> <span class="s2">&quot;11-g1AAAABHeJzLYWBgYMxgTmHgzcvPy09JdcjLz8gvLskBCjMlMuSxMPwHgqwM5kTuXKAQe5Jpmrl5ojG68iwA2IcV0g&quot;</span><span class="p">,</span>
      <span class="nt">&quot;doc&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-077f26acac6f0a5e1022f109e8d1dfc4&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.trash-dir&quot;</span><span class="p">,</span>
      <span class="nt">&quot;seq&quot;</span><span class="p">:</span> <span class="s2">&quot;12-g1AAAABHeJzLYWBgYMxgTmHgzcvPy09JdcjLz8gvLskBCjMlMuSxMPwHgqwM5kSeXKAQe5Jpmrl5ojG68iwA2KUV0w&quot;</span><span class="p">,</span>
      <span class="nt">&quot;doc&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.root-dir&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;.cozy_trash&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-de9c11dbc386b5f91adbe2aee4a3e754&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;d30b0dd6e0e8fefdac2a94cb2c00249f&quot;</span><span class="p">,</span>
      <span class="nt">&quot;seq&quot;</span><span class="p">:</span> <span class="s2">&quot;13-g1AAAABHeJzLYWBgYMxgTmHgzcvPy09JdcjLz8gvLskBCjMlMuSxMPwHgqwM5kTeXKAQe5Jpmrl5ojG68iwA2MMV1A&quot;</span><span class="p">,</span>
      <span class="nt">&quot;doc&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.root-dir&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Administratif&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;directory&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-24f2828e8dbe64135913072a4c92d846&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-files_find">POST <code>/files/_find</code><a class="headerlink" href="#post-files_find" title="Permanent link">&para;</a></h3>
<p>Find allows to find documents using a mango selector. You can read more about mango selectors <a href="http://docs.couchdb.org/en/stable/api/database/find.html#selector-syntax">here</a>.</p>
<p>Note that it returns a
<a href="https://github.com/cozy/cozy-stack/blob/master/docs/mango.md#pagination-cookbook">bookmark</a>
in the <code>links</code>, useful to paginate (following the <a href="../http-api/#pagination">JSON-API
pagination</a>). On the last page, there won&rsquo;t be a
<code>links.next</code>.</p>
<p>It is possible to pass a <code>execution_stats</code> parameter to get some information about the query execution. See <a href="https://docs.couchdb.org/en/stable/api/database/find.html#execution-statistics">here</a> for more details.</p>
<h3 id="request_6">Request<a class="headerlink" href="#request_6" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/_find</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;bookmark&quot;</span><span class="p">:</span> <span class="s2">&quot;g1AAAABjeJzLYWBgYMpgSmHgKy5JLCrJTq2MT8lPzkzJBYorpFokG5qaGVqYmCWbGxuYGFkYWhgkmqaZJZsZGpibWhiA9HHA9OWATAJpY83MTUxPTWFgTUvMKU7NygIA7IYZzA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;use_index&quot;</span><span class="p">:</span> <span class="s2">&quot;_design/a5f4711fc9448864a13c81dc71e660b524d7410c&quot;</span><span class="p">,</span>
    <span class="nt">&quot;execution_stats&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>


<h3 id="response_6">Response<a class="headerlink" href="#response_6" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 27 Sept 2016 12:28:53 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">...</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;e8c1561846c730428180a5f6c6107914&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;nicepic1.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;345385&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;12cGYwT+RiNjFxf4f7AmzQ==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Pictures/nicepic1.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.568155477+01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;extractor_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
          <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-235e715b1d82a93285be1b0bd691b779&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/tiny&quot;</span><span class="p">,</span>
        <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/small&quot;</span><span class="p">,</span>
        <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/medium&quot;</span><span class="p">,</span>
        <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6107914/thumbnails/377327a8e20d6a50/large&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f49b4087cbf946dfc759214394009a6c&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;e8c1561846c730428180a5f6c6109007&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;nicepic2.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;323009&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;Fla3ucNXuW2Xw/TK8pfsPA==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpeg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/Pictures/nicepic2.jpg&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-13T16:35:47.845049743+01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;extractor_version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
          <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-4883d6b8ccad32f8fb056af9b7f8b37f&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/tiny&quot;</span><span class="p">,</span>
        <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/small&quot;</span><span class="p">,</span>
        <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/medium&quot;</span><span class="p">,</span>
        <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/e8c1561846c730428180a5f6c6109007/thumbnails/58a4aea31b00c99d/large&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f49b4087cbf946dfc759214394009a6c&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f49b4087cbf946dfc759214394009a6c&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/_find?page[cursor]=g1AAAABjeJzLYWBgYMpgSmHgKy5JLCrJTq2MT8lPzkzJBYorpFokG5qaGVqYmCWbGxuYGFkYWhgkmqaZJZsZGlgaGJiD9HHA9OWATAJpY83MTUxPTWFgTUvMKU7NygIA694ZyA&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;execution_stats&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;total_docs_examined&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
      <span class="nt">&quot;results_returned&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;execution_time_ms&quot;</span><span class="p">:</span> <span class="mf">8.833</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="delete-filesdir-id">DELETE /files/:dir-id<a class="headerlink" href="#delete-filesdir-id" title="Permanent link">&para;</a></h3>
<p>Put a directory and its subtree in the trash. It requires the permissions on
<code>io.cozy.files</code> for <code>PATCH</code>.</p>
<h4 id="http-headers_1">HTTP headers<a class="headerlink" href="#http-headers_1" title="Permanent link">&para;</a></h4>
<p>It&rsquo;s possible to send the <code>If-Match</code> header, with the previous revision of the
file/directory (optional).</p>
<h2 id="files">Files<a class="headerlink" href="#files" title="Permanent link">&para;</a></h2>
<p>A file is a binary content with some metadata.</p>
<h3 id="post-filesdir-id_1">POST /files/:dir-id<a class="headerlink" href="#post-filesdir-id_1" title="Permanent link">&para;</a></h3>
<p>Upload a file in the directory identified by <code>:dir-id</code>.</p>
<p>The <code>created_at</code> field will be the first valid value in this list:</p>
<ul>
<li>the datetime extracted from the EXIF for a photo</li>
<li>the <code>CreatedAt</code> parameter from the query-string</li>
<li>the <code>Date</code> HTTP header</li>
<li>the current time from the server.</li>
</ul>
<p>The <code>updated_at</code> field will be the first value in this list:</p>
<ul>
<li>the datetime extracted from the EXIF for a photo if it is greater than the other values</li>
<li>the <code>UpdatedAt</code> parameter from the query-string</li>
<li>the <code>Date</code> HTTP header</li>
<li>the current time from the server.</li>
</ul>
<p>/!\ If the <code>updated_at</code> field is older than the <code>created_at</code> one,
then the <code>updated_at</code> will be set with the value of the <code>created_at</code>.</p>
<h4 id="query-string_1">Query-String<a class="headerlink" href="#query-string_1" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>file</code></td>
</tr>
<tr>
<td>Name</td>
<td>the file name</td>
</tr>
<tr>
<td>Size</td>
<td>the file size (when <code>Content-Length</code> can&rsquo;t be used)</td>
</tr>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
<tr>
<td>Executable</td>
<td><code>true</code> if the file is executable (UNIX permission)</td>
</tr>
<tr>
<td>Encrypted</td>
<td><code>true</code> if the file is client-side encrypted</td>
</tr>
<tr>
<td>Metadata</td>
<td>a JSON with metadata on this file (<em>not recommended</em>)</td>
</tr>
<tr>
<td>MetadataID</td>
<td>the identifier of a metadata object</td>
</tr>
<tr>
<td>CreatedAt</td>
<td>the creation date of the file</td>
</tr>
<tr>
<td>UpdatedAt</td>
<td>the modification date of the file</td>
</tr>
<tr>
<td>SourceAccount</td>
<td>the id of the source account used by a konnector</td>
</tr>
<tr>
<td>SourceAccountIdentifier</td>
<td>the unique identifier of the account targeted by the connector</td>
</tr>
</tbody>
</table>
<h4 id="http-headers_2">HTTP headers<a class="headerlink" href="#http-headers_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content-Length</td>
<td>The file size</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>A Base64-encoded binary MD5 sum of the file</td>
</tr>
<tr>
<td>Content-Type</td>
<td>The mime-type of the file</td>
</tr>
<tr>
<td>Date</td>
<td>The modification date of the file</td>
</tr>
</tbody>
</table>
<h4 id="request_7">Request<a class="headerlink" href="#request_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81?Type=file&amp;Name=hello.txt&amp;CreatedAt=2016-09-18T01:23:45Z</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-MD5</span><span class="o">:</span> <span class="l">hvsmnRkNLIX24EaM7KQqIA==</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>
<span class="na">Date</span><span class="o">:</span> <span class="l">Mon, 19 Sep 2016 12:38:04 GMT</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">cozy.example.com</span>

Hello world!
</pre></div>


<h4 id="status-codes_1">Status codes<a class="headerlink" href="#status-codes_1" title="Permanent link">&para;</a></h4>
<ul>
<li>201 Created, when the file has been successfully created</li>
<li>404 Not Found, when the parent directory does not exist</li>
<li>409 Conflict, when a file with the same name already exists</li>
<li>412 Precondition Failed, when the md5sum is <code>Content-MD5</code> is not equal to
  the md5sum computed by the server</li>
<li>413 Payload Too Large, when there is not enough available space on the cozy
  to upload the file or the file is larger than the server&rsquo;s filesystem maximum
  file size</li>
<li>422 Unprocessable Entity, when the sent data is invalid (for example, the
  parent doesn&rsquo;t exist, <code>Type</code>, <code>Name</code>, or <code>MetadataID</code> parameter is missing or
  invalid, etc.)</li>
</ul>
<h4 id="response_7">Response<a class="headerlink" href="#response_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">https://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;4-1482b88a&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;sunset.jpg&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-18T20:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-18T20:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1080</span><span class="p">,</span>
        <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1920</span>
      <span class="p">},</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;image/jpg&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T14:46:37Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:37:52Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;referenced_by&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81/relationships/references&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.albums&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;94375086-e2e2-11e6-81b9-5bc0b9dd4aa4&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">&quot;old_versions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.versions&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b/2-fa3a3bec&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.versions&quot;</span><span class="p">,</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b/1-0e6d5b72&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/tiny&quot;</span><span class="p">,</span>
      <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/small&quot;</span><span class="p">,</span>
      <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/medium&quot;</span><span class="p">,</span>
      <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/0f9cda56674282ac/large&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;included&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.versions&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b/2-fa3a3bec&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-26a331&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;file_id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T10:11:12Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;a2lth5syMW+4r7jwNhdk3A==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">123456</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:37:52Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:37:52Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:37:52Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.versions&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b/1-0e6d5b72&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-57b3e2&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;file_id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-18T20:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;FBA89XXOZKFhdv37iILb2Q==&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">159753</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p><strong>Note</strong>: see <a href="../references-docs-in-vfs/">references of documents in VFS</a> for
more informations about the references field.</p>
<h3 id="post-filesuploadmetadata">POST /files/upload/metadata<a class="headerlink" href="#post-filesuploadmetadata" title="Permanent link">&para;</a></h3>
<p>Send a metadata object that can be associated to a file (or directory) uploaded
after that, via the <code>MetadataID</code> query parameter. The <code>MetadataID</code> parameter is
only valid for 10 minutes, and will expire after that.</p>
<p><strong>Note:</strong> a special permission on <code>io.cozy.certified.carbon_copy</code> is required
to send a request with <code>carbonCopy</code> as key in the <code>attributes</code> map. Same for
<code>electronicSafe</code>.</p>
<p>See the <a href="https://docs.cozy.io/en/cozy-doctypes/docs/io.cozy.files_metadata/">metadata doctype</a> to know more about metadata attributes that can be set, notably for images and document qualification.</p>
<h4 id="request_8">Request<a class="headerlink" href="#request_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/upload/metadata</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.metadata&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;qualification&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom_invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;purpose&quot;</span><span class="p">:</span> <span class="s2">&quot;invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;sourceCategory&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-22T01:00:00-05:00&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="response_8">Response<a class="headerlink" href="#response_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.metadata&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;42E6BD48&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;qualification&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom_invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;purpose&quot;</span><span class="p">:</span> <span class="s2">&quot;invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;sourceCategory&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-22T01:00:00-05:00&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesdownloadfile-id">GET /files/download/:file-id<a class="headerlink" href="#get-filesdownloadfile-id" title="Permanent link">&para;</a></h3>
<p>Download the file content.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<p>For a PDF file, it&rsquo;s possible to get only a single page by using the <code>Page</code>
parameter in the query-string (1 is the first page).</p>
<h4 id="request_9">Request<a class="headerlink" href="#request_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/download/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_9">Response<a class="headerlink" href="#response_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-Disposition</span><span class="o">:</span> <span class="l">inline; filename=&quot;hello.txt&quot;</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

Hello world!
</pre></div>


<h3 id="get-filesdownload">GET /files/download<a class="headerlink" href="#get-filesdownload" title="Permanent link">&para;</a></h3>
<p>Download the file content from its path.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<p>For a PDF file, it&rsquo;s possible to get only a single page by using the <code>Page</code>
parameter in the query-string (1 is the first page).</p>
<h4 id="request_10">Request<a class="headerlink" href="#request_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/download?Path=/Documents/hello.txt&amp;Dl=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h3 id="get-filesfile-idiconsecret">GET /files/:file-id/icon/:secret<a class="headerlink" href="#get-filesfile-idiconsecret" title="Permanent link">&para;</a></h3>
<p>Get an image that shows the first page of a PDF in a small resolution (96x96).</p>
<p><strong>Note:</strong> this route is deprecated, you should use thumbnails instead.</p>
<h3 id="get-filesfile-idpreviewsecret">GET /files/:file-id/preview/:secret<a class="headerlink" href="#get-filesfile-idpreviewsecret" title="Permanent link">&para;</a></h3>
<p>Get an image that shows the first page of a PDF (at most 1080x1920).</p>
<p><strong>Note:</strong> this route is deprecated, you should use thumbnails instead.</p>
<h3 id="get-filesfile-idthumbnailssecretformat">GET /files/:file-id/thumbnails/:secret/:format<a class="headerlink" href="#get-filesfile-idthumbnailssecretformat" title="Permanent link">&para;</a></h3>
<p>Get a thumbnail of a file (for an image &amp; pdf only). <code>:format</code> can be <code>tiny</code> (96x96)
<code>small</code> (640x480), <code>medium</code> (1280x720), or <code>large</code> (1920x1080).</p>
<p>This API does not require authentication because the secret acts as a token.
This secret is valid for 10 minutes, after which the link will return an error.
To retrieve a new functional link, you must query the files API again to obtain
a new secret.</p>
<h3 id="put-filesfile-id">PUT /files/:file-id<a class="headerlink" href="#put-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Overwrite a file</p>
<p>The <code>updated_at</code> field will be the first value in this list:</p>
<ul>
<li>the datetime extracted from the EXIF for a photo if it is greater than the other values</li>
<li>the <code>UpdatedAt</code> parameter from the query-string</li>
<li>the <code>Date</code> HTTP header</li>
<li>the current time from the server.</li>
</ul>
<p>/!\ If the <code>updated_at</code> field is older than the <code>created_at</code> one, then the
<code>updated_at</code> will be set with the value of the <code>created_at</code>.</p>
<h4 id="query-string_2">Query-String<a class="headerlink" href="#query-string_2" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Size</td>
<td>the file size (when <code>Content-Length</code> can&rsquo;t be used)</td>
</tr>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
<tr>
<td>Executable</td>
<td><code>true</code> if the file is executable (UNIX permission)</td>
</tr>
<tr>
<td>Encrypted</td>
<td><code>true</code> if the file is client-side encrypted</td>
</tr>
<tr>
<td>MetadataID</td>
<td>the identifier of a metadata object</td>
</tr>
<tr>
<td>UpdatedAt</td>
<td>the modification date of the file</td>
</tr>
<tr>
<td>SourceAccount</td>
<td>the id of the source account used by a konnector</td>
</tr>
<tr>
<td>SourceAccountIdentifier</td>
<td>the unique identifier of the account targeted by the connector</td>
</tr>
</tbody>
</table>
<h4 id="http-headers_3">HTTP headers<a class="headerlink" href="#http-headers_3" title="Permanent link">&para;</a></h4>
<p>The HTTP headers are the same than for uploading a file. There is one additional
header, <code>If-Match</code>, with the previous revision of the file (optional).</p>
<h4 id="request_11">Request<a class="headerlink" href="#request_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PUT</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12</span>
<span class="na">Content-MD5</span><span class="o">:</span> <span class="l">hvsmnRkNLIX24EaM7KQqIA==</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>
<span class="na">If-Match</span><span class="o">:</span> <span class="l">1-0e6d5b72</span>

HELLO WORLD!
</pre></div>


<h4 id="status-codes_2">Status codes<a class="headerlink" href="#status-codes_2" title="Permanent link">&para;</a></h4>
<ul>
<li>200 OK, when the file has been successfully overwritten</li>
<li>404 Not Found, when the file wasn&rsquo;t existing</li>
<li>412 Precondition Failed, when the <code>If-Match</code> header is set and doesn&rsquo;t match
  the last revision of the file</li>
<li>413 Payload Too Large, when there is not enough available space on the cozy
  to upload the file or the file is larger than the server&rsquo;s filesystem maximum
  file size</li>
<li>422 Unprocessable Entity, when the sent data is invalid (for example, the
  <code>MetadataID</code> parameter has expired)</li>
</ul>
<h4 id="response_10">Response<a class="headerlink" href="#response_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-d903b54c&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YjU5YmMzN2Q2NDQxZDk2Nwo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T04:27:50Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T04:27:50Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
      <span class="nt">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/icon/543d7eb8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;preview&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/preview/77e117e0&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/93fd0a5d96b22e9d/tiny&quot;</span><span class="p">,</span>
      <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/93fd0a5d96b22e9d/small&quot;</span><span class="p">,</span>
      <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/93fd0a5d96b22e9d/medium&quot;</span><span class="p">,</span>
      <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/thumbnails/93fd0a5d96b22e9d/large&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-filesfile-idcopy">POST /files/:file-id/copy<a class="headerlink" href="#post-filesfile-idcopy" title="Permanent link">&para;</a></h3>
<p>Create a copy of a file in the same directory with a copy suffix in its name</p>
<h4 id="query-string_3">Query-String<a class="headerlink" href="#query-string_3" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>the file copy name (optional)</td>
</tr>
<tr>
<td>DirID</td>
<td>the destination directory id (optional)</td>
</tr>
</tbody>
</table>
<h4 id="request_12">Request<a class="headerlink" href="#request_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/copy</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="status-codes_3">Status codes<a class="headerlink" href="#status-codes_3" title="Permanent link">&para;</a></h4>
<ul>
<li>201 Created, when the file has been successfully copied</li>
<li>404 Not Found, when the file does not exist</li>
<li>409 Conflict, when a file with the same name as the copy would have already exists</li>
<li>413 Payload Too Large, when there is not enough available space on the cozy
  to copy the file</li>
</ul>
<h4 id="response_11">Response<a class="headerlink" href="#response_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;7382f28a-21d4-12d9-4438-3fd53e98a219&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-83a82e9&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello (copy).pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YjU5YmMzN2Q2NDQxZDk2Nwo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-10-18T18:33:24Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-10-18T18:33:24Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-10-18T18:33:24Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-10-18T18:33:24Z&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219&quot;</span><span class="p">,</span>
      <span class="nt">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/icon/543d7eb8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;preview&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/preview/77e117e0&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tiny&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/thumbnails/93fd0a5d96b22e9d/tiny&quot;</span><span class="p">,</span>
      <span class="nt">&quot;small&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/thumbnails/93fd0a5d96b22e9d/small&quot;</span><span class="p">,</span>
      <span class="nt">&quot;medium&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/thumbnails/93fd0a5d96b22e9d/medium&quot;</span><span class="p">,</span>
      <span class="nt">&quot;large&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/7382f28a-21d4-12d9-4438-3fd53e98a219/thumbnails/93fd0a5d96b22e9d/large&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="delete-filesfile-id">DELETE /files/:file-id<a class="headerlink" href="#delete-filesfile-id" title="Permanent link">&para;</a></h3>
<p>Put a file in the trash.</p>
<h2 id="common">Common<a class="headerlink" href="#common" title="Permanent link">&para;</a></h2>
<h3 id="get-filesmetadata">GET /files/metadata<a class="headerlink" href="#get-filesmetadata" title="Permanent link">&para;</a></h3>
<p>Same as <code>/files/:file-id</code> but to retrieve informations from a path.</p>
<h4 id="request_13">Request<a class="headerlink" href="#request_13" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/metadata?Path=/Documents/hello.txt</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_12">Response<a class="headerlink" href="#response_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">https://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hello.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fce1a6c0-dfc5-11e5-8d1a-1f854d4aaf81&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="patch-filesfile-id-and-patch-filesmetadata">PATCH /files/:file-id and PATCH /files/metadata<a class="headerlink" href="#patch-filesfile-id-and-patch-filesmetadata" title="Permanent link">&para;</a></h3>
<p>Both endpoints can be used to update the metadata of a file or directory, or to
rename/move it. The difference is the first one uses an id to identify the
file/directory to update, and the second one uses the path.</p>
<p>Some specific attributes of the patch can be used:</p>
<ul>
<li><code>dir_id</code> attribute can be updated to move a file or directory</li>
<li><code>move_to_trash</code> boolean to specify that the file needs to be moved to the
  trash</li>
<li><code>permanent_delete</code> boolean to specify that the files needs to be deleted
  (after being trashed)</li>
<li><code>cozyMetadata.favorite</code> boolean attribute to put/remove a file from the
  favorites</li>
</ul>
<h4 id="http-headers_4">HTTP headers<a class="headerlink" href="#http-headers_4" title="Permanent link">&para;</a></h4>
<p>It&rsquo;s possible to send the <code>If-Match</code> header, with the previous revision of the
file/directory (optional).</p>
<h4 id="request_14">Request<a class="headerlink" href="#request_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hi.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">],</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;favorite&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="status-codes_4">Status codes<a class="headerlink" href="#status-codes_4" title="Permanent link">&para;</a></h4>
<ul>
<li>200 OK, when the file or directory metadata has been successfully updated</li>
<li>400 Bad Request, when a the directory is asked to move to one of its
  sub-directories</li>
<li>404 Not Found, when the file/directory wasn&rsquo;t existing</li>
<li>412 Precondition Failed, when the <code>If-Match</code> header is set and doesn&rsquo;t match
  the last revision of the file/directory</li>
<li>422 Unprocessable Entity, when the sent data is invalid (for example, the
  parent doesn&rsquo;t exist)</li>
</ul>
<h4 id="response_13">Response<a class="headerlink" href="#response_13" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">https://cozy.example.com/files/9152d568-7e7c-11e6-a377-37cbfb190b4b</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hi.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">],</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-22T13:32:51Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T04:27:50Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="patch-files">PATCH /files/<a class="headerlink" href="#patch-files" title="Permanent link">&para;</a></h3>
<p>Endpoint to update the metadata of files and directories in batch. It can be
used, for instance, to move many files in a single request.</p>
<h4 id="request_15">Request<a class="headerlink" href="#request_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/files/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-0e6d5b72&quot;</span><span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4c&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-123123&quot;</span><span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;move_to_trash&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h4 id="status-codes_5">Status codes<a class="headerlink" href="#status-codes_5" title="Permanent link">&para;</a></h4>
<p>The same status codes can be encountered as the <code>PATCH /files/:file-id</code> route.</p>
<h3 id="post-filesiddescription">POST /files/:id/description<a class="headerlink" href="#post-filesiddescription" title="Permanent link">&para;</a></h3>
<p>This endpoint fills the <code>metadata.description</code> field of a file with a
description generated by the IA from the content of this file.</p>
<h4 id="request_16">Request<a class="headerlink" href="#request_16" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/description</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_14">Response<a class="headerlink" href="#response_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json.vnd+api</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span><span class="p">,</span>
    <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;2-20900ae0&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;hi.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;ODZmYjI2OWQxOTBkMmM4NQo=&quot;</span><span class="p">,</span>
      <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">],</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
      <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
      <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Explores love&#39;s complexities through vivid imagery and heartfelt emotions&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-22T13:32:51Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-21T04:27:50Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;parent&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;f2f36fec-8018-11e6-abd8-8b3814d9a465&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-filesarchive">POST /files/archive<a class="headerlink" href="#post-filesarchive" title="Permanent link">&para;</a></h3>
<p>Create an archive. The body of the request lists the files and directories that
will be included in the archive. For directories, it includes all the files and
sub-directories in the archive.</p>
<p>It&rsquo;s possible to give a file by its id (in the <code>ids</code> array) or by its path (in
the <code>files</code> array).</p>
<p>For PDF files, it&rsquo;s possible to put in the archive a single page, with the
<code>pages</code> argument: it&rsquo;s an array of objects, with <code>id</code> the file identifier of
the PDF file, and <code>page</code> the page number (1 is the first page).</p>
<p>The generated archive is temporary and is not persisted.</p>
<h4 id="request_17">Request<a class="headerlink" href="#request_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/archive</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.archives&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;project-X&quot;</span><span class="p">,</span>
      <span class="nt">&quot;ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a51aeeea-4f79-11e7-9dc4-83f67e9494ab&quot;</span><span class="p">],</span>
      <span class="nt">&quot;files&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;/Documents/bills&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/Documents/images/sunset.jpg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;/Documents/images/eiffel-tower.jpg&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;pages&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;3780caf0-104f-013d-3619-18c04daba326&quot;</span><span class="p">,</span> <span class="nt">&quot;page&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="response_15">Response<a class="headerlink" href="#response_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/archive/4521DC87/project-X.zip&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.archives&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4521DC87&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/archive/4521DC87/project-X.zip&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="get-filesarchivekeyname">GET /files/archive/:key/:name<a class="headerlink" href="#get-filesarchivekeyname" title="Permanent link">&para;</a></h3>
<p>Download a previously created archive. The name parameter is not used in the
stack but aims to allow setting a name even for browser / downloader that do not
support Content-Disposition filename.</p>
<p><strong>This route does not require Basic Authentification</strong></p>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/archive/4521DC87/project-X.zip</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/zip</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">12345</span>
<span class="na">Content-Disposition</span><span class="o">:</span> <span class="l">attachment; filename=&quot;project-X.zip&quot;</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/zip</span>
</pre></div>


<h3 id="post-filesdownloadspathfile_path">POST /files/downloads?Path=file_path<a class="headerlink" href="#post-filesdownloadspathfile_path" title="Permanent link">&para;</a></h3>
<p>Create a file download. The Path query parameter specifies the file to download.
The response json API links contains a <code>related</code> link for downloading the file,
see below.</p>
<h3 id="post-filesdownloadsidfile_id">POST /files/downloads?Id=file_id<a class="headerlink" href="#post-filesdownloadsidfile_id" title="Permanent link">&para;</a></h3>
<p>Also create a file download. But it takes the id of the file and not its path.</p>
<h3 id="post-filesdownloadsversionidfile_idversion_id">POST /files/downloads?VersionId=file_id/version_id<a class="headerlink" href="#post-filesdownloadsversionidfile_idversion_id" title="Permanent link">&para;</a></h3>
<p>This is a third way to create a file download. But, this time, it is for
downloading an old version of a file.</p>
<p>These 3 routes also accept a <code>Filename=...</code> parameter in the query-string to
change the filename that will be used for the downloaded file.</p>
<h3 id="get-filesdownloadssecretname">GET /files/downloads/:secret/:name<a class="headerlink" href="#get-filesdownloadssecretname" title="Permanent link">&para;</a></h3>
<p>Allows to download a file with a secret created from the route above.</p>
<p>The name parameter is not used in the stack but aims to allow setting a name
even for browser / downloader that do not support Content-Disposition filename.</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<p><strong>This route does not require Basic Authentification</strong></p>
<h2 id="versions">Versions<a class="headerlink" href="#versions" title="Permanent link">&para;</a></h2>
<p>The identifier of the <code>io.cozy.files.versions</code> is composed of the <code>file-id</code> and
another string called the <code>version-id</code>, separated by a <code>/</code>. So, when a route
makes reference to <code>/something/:file-id/:version-id</code>, you can use the identifier
of the version document (without having to prepend the file identifier).</p>
<h3 id="get-filesdownloadfile-idversion-id">GET /files/download/:file-id/:version-id<a class="headerlink" href="#get-filesdownloadfile-idversion-id" title="Permanent link">&para;</a></h3>
<p>Download an old version of the file content</p>
<p>By default the <code>content-disposition</code> will be <code>inline</code>, but it will be
<code>attachment</code> if the query string contains the parameter <code>Dl=1</code></p>
<h4 id="request_18">Request<a class="headerlink" href="#request_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/download/9152d568-7e7c-11e6-a377-37cbfb190b4b/1-0e6d5b72</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h3 id="post-filesfile-idversions">POST /files/:file-id/versions<a class="headerlink" href="#post-filesfile-idversions" title="Permanent link">&para;</a></h3>
<p>Create a new version of a file, with the same content but new metadata. It
requires a permission for PUT on the file, as it is equivalent to upload the
same content of the file.</p>
<h4 id="query-string_4">Query-String<a class="headerlink" href="#query-string_4" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tags</td>
<td>an array of tags</td>
</tr>
</tbody>
</table>
<h4 id="request_19">Request<a class="headerlink" href="#request_19" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/metadata</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.metadata&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;qualification&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom_invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;purpose&quot;</span><span class="p">:</span> <span class="s2">&quot;invoice&quot;</span><span class="p">,</span>
        <span class="nt">&quot;sourceCategory&quot;</span><span class="p">:</span> <span class="s2">&quot;telecom&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-04-22T01:00:00-05:00&quot;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-filesrevertfile-idversion-id">POST /files/revert/:file-id/:version-id<a class="headerlink" href="#post-filesrevertfile-idversion-id" title="Permanent link">&para;</a></h3>
<p>This endpoint can be used to revert to an old version of the content for a
file.</p>
<h4 id="request_20">Request<a class="headerlink" href="#request_20" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">POST</span> <span class="nn">/files/revert/9152d568-7e7c-11e6-a377-37cbfb190b4b/2-fa3a3bec</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h3 id="patch-filesfile-idversion-id">PATCH /files/:file-id/:version-id<a class="headerlink" href="#patch-filesfile-idversion-id" title="Permanent link">&para;</a></h3>
<p>This endpoint can be used to edit the tags of a previous version of the file.</p>
<h4 id="request_21">Request<a class="headerlink" href="#request_21" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/1-0e6d5b72</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.versions&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;9152d568-7e7c-11e6-a377-37cbfb190b4b/1-0e6d5b72&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;poem&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="delete-filesfile-idversion-id">DELETE /files/:file-id/:version-id<a class="headerlink" href="#delete-filesfile-idversion-id" title="Permanent link">&para;</a></h3>
<p>This endpoint can be used to delete an old version of the content for a file.</p>
<h4 id="request_22">Request<a class="headerlink" href="#request_22" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/files/9152d568-7e7c-11e6-a377-37cbfb190b4b/2-fa3a3bec</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_16">Response<a class="headerlink" href="#response_16" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</pre></div>


<h3 id="delete-filesversions">DELETE /files/versions<a class="headerlink" href="#delete-filesversions" title="Permanent link">&para;</a></h3>
<p>Deletes all the old versions of all files to make space for new files.</p>
<h4 id="request_23">Request<a class="headerlink" href="#request_23" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/files/versions</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</pre></div>


<h4 id="response_17">Response<a class="headerlink" href="#response_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</pre></div>


<h2 id="trash">Trash<a class="headerlink" href="#trash" title="Permanent link">&para;</a></h2>
<p>When a file is deleted, it is first moved to the trash. In the trash, it can be
restored. Or, after some time, it will be removed from the trash and permanently
destroyed.</p>
<p>The file <code>trashed</code> attribute will be set to true.</p>
<h3 id="get-filestrash">GET /files/trash<a class="headerlink" href="#get-filestrash" title="Permanent link">&para;</a></h3>
<p>List the files inside the trash. It&rsquo;s paginated.</p>
<h3 id="query-string_5">Query-String<a class="headerlink" href="#query-string_5" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>page[cursor]</td>
<td>the last id of the results</td>
</tr>
<tr>
<td>page[limit]</td>
<td>the number of entries (30 by default)</td>
</tr>
</tbody>
</table>
<h4 id="request_24">Request<a class="headerlink" href="#request_24" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nf">GET</span> <span class="nn">/files/trash</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<h4 id="response_18">Response<a class="headerlink" href="#response_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/vnd.api+json</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;df24aac0-7f3d-11e6-81c0-d38812bfa0a8&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-3b75377c&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.trash-dir&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;foo.txt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;restore_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/previous_parent&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YjAxMzQxZTc4MDNjODAwYwo=&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/trash/df24aac0-7f3d-11e6-81c0-d38812bfa0a8&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4a4fc582-7f3e-11e6-b9ca-278406b6ddd4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;rev&quot;</span><span class="p">:</span> <span class="s2">&quot;1-4a09030e&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dir_id&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files.trash-dir&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bar.txt&quot;</span><span class="p">,</span>
        <span class="nt">&quot;trashed&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;restore_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/other_parent&quot;</span><span class="p">,</span>
        <span class="nt">&quot;md5sum&quot;</span><span class="p">:</span> <span class="s2">&quot;YWVhYjg3ZWI0OWQzZjRlMAo=&quot;</span><span class="p">,</span>
        <span class="nt">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-19T12:38:04Z&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="mi">456</span><span class="p">,</span>
        <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;document&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mime&quot;</span><span class="p">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
        <span class="nt">&quot;cozyMetadata&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;doctypeVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;metadataVersion&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdByApp&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span><span class="p">,</span>
          <span class="nt">&quot;createdOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-09-20T18:32:49Z&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedOn&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cozy.example.com/&quot;</span><span class="p">,</span>
          <span class="nt">&quot;uploadedBy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;drive&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/files/trash/4a4fc582-7f3e-11e6-b9ca-278406b6ddd4&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<h3 id="post-filestrashfile-id">POST /files/trash/:file-id<a class="headerlink" href="#post-filestrashfile-id" title="Permanent link">&para;</a></h3>
<p>Restore the file with the <code>file-id</code> identifiant into its <code>restore_path</code>. If a file already exists at the restore path with the same name, a suffix will be added to avoid any conflict.</p>
<p>The file&rsquo;s <code>trashed</code> attributes will be set to false.</p>
<h3 id="delete-filestrashfile-id">DELETE /files/trash/:file-id<a class="headerlink" href="#delete-filestrashfile-id" title="Permanent link">&para;</a></h3>
<p>Destroy the file and make it unrecoverable (it will still be available in
backups).</p>
<h3 id="delete-filestrash">DELETE /files/trash<a class="headerlink" href="#delete-filestrash" title="Permanent link">&para;</a></h3>
<p>Clear out the trash.</p>
<h2 id="trashed-attribute">Trashed attribute<a class="headerlink" href="#trashed-attribute" title="Permanent link">&para;</a></h2>
<p>All files that are inside the trash will have a <code>trashed: true</code> attribute. This
attribute can be used in mango queries to only get &ldquo;interesting&rdquo; files.</p>
<h2 id="real-time-via-websockets">Real-time via websockets<a class="headerlink" href="#real-time-via-websockets" title="Permanent link">&para;</a></h2>
<p>In addition to the normal events for files, the stack also injects some events
when a thumbnail is generated. A permission on <code>io.cozy.files</code> is required to
subscribe to those events on <code>io.cozy.files.thumbnails</code>.</p>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>client &gt; {&quot;method&quot;: &quot;AUTH&quot;,
          &quot;payload&quot;: &quot;xxAppOrAuthTokenxx=&quot;}
client &gt; {&quot;method&quot;: &quot;SUBSCRIBE&quot;,
          &quot;payload&quot;: {&quot;type&quot;: &quot;io.cozy.files.thumbnails&quot;}}
server &gt; {&quot;event&quot;: &quot;CREATED&quot;,
          &quot;payload&quot;: {&quot;id&quot;: &quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;,
                      &quot;type&quot;: &quot;io.cozy.files.thumbnails&quot;,
                      &quot;doc&quot;: {&quot;format&quot;: &quot;large&quot;}}}
server &gt; {&quot;event&quot;: &quot;CREATED&quot;,
          &quot;payload&quot;: {&quot;id&quot;: &quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;,
                      &quot;type&quot;: &quot;io.cozy.files.thumbnails&quot;,
                      &quot;doc&quot;: {&quot;format&quot;: &quot;medium&quot;}}}
server &gt; {&quot;event&quot;: &quot;CREATED&quot;,
          &quot;payload&quot;: {&quot;id&quot;: &quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;,
                      &quot;type&quot;: &quot;io.cozy.files.thumbnails&quot;,
                      &quot;doc&quot;: {&quot;format&quot;: &quot;small&quot;}}}
server &gt; {&quot;event&quot;: &quot;CREATED&quot;,
          &quot;payload&quot;: {&quot;id&quot;: &quot;9152d568-7e7c-11e6-a377-37cbfb190b4b&quot;,
                      &quot;type&quot;: &quot;io.cozy.files.thumbnails&quot;,
                      &quot;doc&quot;: {&quot;format&quot;: &quot;tiny&quot;}}}
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../pouchdb-quirks/" title=" /data - PouchDB Quirks" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                 /data - PouchDB Quirks
              </span>
            </div>
          </a>
        
        
          <a href="../not-synchronized-vfs/" title=" /files - Not synchronized directories" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                 /files - Not synchronized directories
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="/en/privacy">privacy</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.2.3",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="https://matomo.cozycloud.cc/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '25']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->

  </body>
</html>