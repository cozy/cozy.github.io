



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-stack/archives/konnectors-design/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.4.0">
    
    
      
        <title>Konnectors design - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-app-publish"}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "cozy-desktop", "repo": "https://github.com/cozy-labs/cozy-desktop.git", "subdir": "doc"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-notifications", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-notifications"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "cozy-home", "repo": "https://github.com/cozy/cozy-home.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#konnectors" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Konnectors design
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../tutorials/app/" title="Tutorials" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../cozy-client/getting-started/" title="Libraries" class="md-tabs__link">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../projects/" title="Projects" class="md-tabs__link">
          Projects
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Manipulate data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Manipulate data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/pouchdb/" title="PouchDB" class="md-nav__link">
      PouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/doctypes/" title="DocTypes" class="md-nav__link">
      DocTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/qualification/" title="Qualification" class="md-nav__link">
      Qualification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/translate/" title="Translate Apps" class="md-nav__link">
      Translate Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Self-Hosting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Self-Hosting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/docker/" title="Running inside Docker" class="md-nav__link">
      Running inside Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3" type="checkbox" id="nav-2-5-3">
    
    <label class="md-nav__link" for="nav-2-5-3">
      Traditional installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-5-3">
        Traditional installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-1" type="checkbox" id="nav-2-5-3-1">
    
    <label class="md-nav__link" for="nav-2-5-3-1">
      Requirements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-1">
        Requirements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/" title="What you need" class="md-nav__link">
      What you need
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/couchdb/" title="Installing CouchDB" class="md-nav__link">
      Installing CouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/nodejs/" title="Installing NodeJS" class="md-nav__link">
      Installing NodeJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-2" type="checkbox" id="nav-2-5-3-2">
    
    <label class="md-nav__link" for="nav-2-5-3-2">
      Installing cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-2">
        Installing cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/package/" title="From precompiled package" class="md-nav__link">
      From precompiled package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/sources/" title="From sources" class="md-nav__link">
      From sources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-3" type="checkbox" id="nav-2-5-3-3">
    
    <label class="md-nav__link" for="nav-2-5-3-3">
      Finalize installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-3">
        Finalize installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/nginx/" title="Nginx and certificates" class="md-nav__link">
      Nginx and certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/apache/" title="Using Apache instead of Nginx" class="md-nav__link">
      Using Apache instead of Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/create_instance/" title="Create first instance" class="md-nav__link">
      Create first instance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5-3-4" type="checkbox" id="nav-2-5-3-4">
    
    <label class="md-nav__link" for="nav-2-5-3-4">
      Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-5-3-4">
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/more_instances/" title="Create more instances" class="md-nav__link">
      Create more instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/upgrade/" title="Upgrade cozy-stack" class="md-nav__link">
      Upgrade cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/mail/" title="Configure mail sending" class="md-nav__link">
      Configure mail sending
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/office/" title="Online edition of office documents" class="md-nav__link">
      Online edition of office documents
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/services/" title="Develop a service from your application" class="md-nav__link">
      Develop a service from your application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/run-connectors-on-local-cozy-stack/" title="Run Connectors With a Local cozy-stack" class="md-nav__link">
      Run Connectors With a Local cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1">
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/timeseries/" title="Using time series" class="md-nav__link">
      Using time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-pouch-link.md" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-ui/" title="Build the user interface (ui)" class="md-nav__link">
      Build the user interface (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.ai.chat.conversations/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps.suggestions/" title="App suggestions" class="md-nav__link">
      App suggestions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.coachco2/" title="CoachCO2" class="md-nav__link">
      CoachCO2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.docrules/" title="DocRules" class="md-nav__link">
      DocRules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.home.settings/" title="Home settings" class="md-nav__link">
      Home settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notes/" title="Notes" class="md-nav__link">
      Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.timeseries/" title="Time series" class="md-nav__link">
      Time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.todos/" title="Todos" class="md-nav__link">
      Todos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.nextcloud.files/" title="Remote NextCloud files" class="md-nav__link">
      Remote NextCloud files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.organizations/" title="Bitwarden organizations" class="md-nav__link">
      Bitwarden organizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.contacts/" title="Bitwarden contacts" class="md-nav__link">
      Bitwarden contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.announcements/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-notifications/" title="Send notifications (cozy-notifications)" class="md-nav__link">
      Send notifications (cozy-notifications)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1" type="checkbox" id="nav-4-6-1">
    
    <label class="md-nav__link" for="nav-4-6-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-6-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-2" type="checkbox" id="nav-4-6-1-2">
    
    <label class="md-nav__link" for="nav-4-6-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/" title="Using the admin API" class="md-nav__link">
      Using the admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../important-changes/" title="Important changes" class="md-nav__link">
      Important changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-3" type="checkbox" id="nav-4-6-1-3">
    
    <label class="md-nav__link" for="nav-4-6-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../http-api/" title="Using the HTTP API" class="md-nav__link">
      Using the HTTP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors-dev/" title="Running a konnector locally" class="md-nav__link">
      Running a konnector locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-4" type="checkbox" id="nav-4-6-1-4">
    
    <label class="md-nav__link" for="nav-4-6-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../flagship/" title="Flagship app" class="md-nav__link">
      Flagship app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../move-design/" title="Move design" class="md-nav__link">
      Move design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime-internals/" title="Realtime internals" class="md-nav__link">
      Realtime internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-5" type="checkbox" id="nav-4-6-1-5">
    
    <label class="md-nav__link" for="nav-4-6-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ai/" title="/ai - AI" class="md-nav__link">
      /ai - AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../delegated-auth/" title="/oidc - Delegated authentication" class="md-nav__link">
       /oidc - Delegated authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connection-check/" title="/connection_check - Connection check" class="md-nav__link">
      /connection_check - Connection check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contacts/" title="/contacts - Contacts" class="md-nav__link">
      /contacts - Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../not-synchronized-vfs/" title="/files - Not synchronized directories" class="md-nav__link">
       /files - Not synchronized directories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors/" title="/konnectors - Konnectors" class="md-nav__link">
      /konnectors - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/" title="/notes - Notes for collaborative edition" class="md-nav__link">
      /notes - Notes for collaborative edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../office/" title="/office - Collaborative edition of Office documents" class="md-nav__link">
      /office - Collaborative edition of Office documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../nextcloud/" title="/remote/nextcloud - NextCloud" class="md-nav__link">
       /remote/nextcloud - NextCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../shortcuts/" title="/shortcuts - Shortcuts" class="md-nav__link">
      /shortcuts - Shortcuts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../wellknown/" title="/.well-known - Well-known" class="md-nav__link">
      /.well-known - Well-known
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/" title="Documentations" class="md-nav__link">
      Documentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Cozy Desktop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Cozy Desktop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/file_systems/" title="Filesystems" class="md-nav__link">
      Filesystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/ignore_files/" title="Ignore files" class="md-nav__link">
      Ignore files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/inotify/" title="inotify" class="md-nav__link">
      inotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/limitations/" title="Limitations" class="md-nav__link">
      Limitations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/macos/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-3" type="checkbox" id="nav-5-2-3">
    
    <label class="md-nav__link" for="nav-5-2-3">
      Developer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-3">
        Developer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/api_doc/" title="API Documentation" class="md-nav__link">
      API Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/coffeescript/" title="Cofeescript" class="md-nav__link">
      Cofeescript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/log_analysis/" title="Log analysis" class="md-nav__link">
      Log analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/feedback/" title="Feddback" class="md-nav__link">
      Feddback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-we-want" title="What we want ?" class="md-nav__link">
    What we want ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" title="Security" class="md-nav__link">
    Security
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-risks" title="The risks" class="md-nav__link">
    The risks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-to-couchdb" title="Access to couchdb" class="md-nav__link">
    Access to couchdb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-the-stack" title="Access to the stack" class="md-nav__link">
    Access to the stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spying-other-connectors" title="Spying other connectors" class="md-nav__link">
    Spying other connectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dos" title="DoS" class="md-nav__link">
    DoS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exploiting-the-cpu-or-the-bandwidth" title="Exploiting the CPU or the bandwidth" class="md-nav__link">
    Exploiting the CPU or the bandwidth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-spam" title="Sending spam" class="md-nav__link">
    Sending spam
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#be-root" title="Be root" class="md-nav__link">
    Be root
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#possible-measures" title="Possible measures" class="md-nav__link">
    Possible measures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permissions" title="Permissions" class="md-nav__link">
    Permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore-scripts-for-npmyarn" title="ignore-scripts for npm/yarn" class="md-nav__link">
    ignore-scripts for npm/yarn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forbid-addons-in-nodejs" title="Forbid addons in nodejs" class="md-nav__link">
    Forbid addons in nodejs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vmsandbox-for-nodejs" title="vm/sandbox for Nodejs" class="md-nav__link">
    vm/sandbox for Nodejs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mock-net" title="Mock net" class="md-nav__link">
    Mock net
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeout" title="Timeout" class="md-nav__link">
    Timeout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chroot" title="Chroot" class="md-nav__link">
    Chroot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executing-as-another-user" title="Executing as another user" class="md-nav__link">
    Executing as another user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ulimit-prlimit" title="Ulimit &amp; Prlimit" class="md-nav__link">
    Ulimit &amp; Prlimit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-namespaces" title="Linux namespaces" class="md-nav__link">
    Linux namespaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cgroups" title="Cgroups" class="md-nav__link">
    Cgroups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seccomp-bpf" title="Seccomp BPF" class="md-nav__link">
    Seccomp BPF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-in-a-docker" title="Isolation in a docker" class="md-nav__link">
    Isolation in a docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rkt" title="Rkt" class="md-nav__link">
    Rkt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nsjail-firejail" title="NsJail / FireJail" class="md-nav__link">
    NsJail / FireJail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nacl-zerovm" title="NaCl / ZeroVM" class="md-nav__link">
    NaCl / ZeroVM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#konnector-isolation-study" title="Konnector isolation study" class="md-nav__link">
    Konnector isolation study
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nsjail" title="NsJail" class="md-nav__link">
    NsJail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rkt_1" title="Rkt" class="md-nav__link">
    Rkt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choice" title="Choice" class="md-nav__link">
    Choice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proposed-use-of-rkt-regarding-connectors" title="Proposed use of rkt regarding connectors" class="md-nav__link">
    Proposed use of rkt regarding connectors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-creation" title="Image creation" class="md-nav__link">
    Image creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-connector" title="Running a connector" class="md-nav__link">
    Running a connector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution-to-limit-access-of-the-container-to-5984-and-6060-ports-smtp" title="Solution to limit access of the container to 5984 and 6060 ports + SMTP" class="md-nav__link">
    Solution to limit access of the container to 5984 and 6060 ports + SMTP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#konnector-install-and-run-details" title="Konnector install and run details" class="md-nav__link">
    Konnector install and run details
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" title="Install" class="md-nav__link">
    Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#details-about-running-a-konnector" title="Details about running a konnector" class="md-nav__link">
    Details about running a konnector
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-account-handling" title="Multi-account handling" class="md-nav__link">
    Multi-account handling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-doctype-iocozyaccounts" title="New doctype : io.cozy.accounts" class="md-nav__link">
    New doctype : io.cozy.accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updates-needed-in-existing-application-and-konnectors" title="Updates needed in existing application and konnectors" class="md-nav__link">
    Updates needed in existing application and konnectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-path" title="Migration path" class="md-nav__link">
    Migration path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#study-on-konnectors-installation-on-vfs" title="Study on konnectors installation on VFS" class="md-nav__link">
    Study on konnectors installation on VFS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" title="TODO" class="md-nav__link">
    TODO
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-stack/archives/konnectors-design.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <p><a href="../../#table-of-contents">Table of contents</a></p>
<p>This document was written on february and march 2017.</p>
<h1 id="konnectors">Konnectors<a class="headerlink" href="#konnectors" title="Permanent link">&para;</a></h1>
<p><img alt="⚠️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/26a0.png" title=":warning:" /> <strong>Note:</strong> this documentation is outdated. It is kept for historical
reasons and shows the design and trade-offs we have made initially. But a lot
of things have changed since, so don&rsquo;t expect the things to be still the same.</p>
<h2 id="what-we-want">What we want ?<a class="headerlink" href="#what-we-want" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/cozy-labs/konnectors">Konnectors</a> is an application for Cozy
v2 that fetch data from different web sites and services, and save them into a
Cozy. The 50+ connectors represent a lot of work from the community. So, we want
to port it to Cozy v3. There will be 2 parts:</p>
<ul>
<li>My Accounts, a client-side app, that will offer the possibility for the user
    to configure her accounts, and choose when to start the import of data (see
    <a href="https://github.com/cozy-labs/konnectors/blob/development/docs/client-side-architecture.md">the architecture doc</a>).</li>
<li>Konnectors, a worker for the <a href="../../jobs/">job service</a>, with the code to import
    data from the web sites.</li>
</ul>
<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h2>
<h3 id="the-risks">The risks<a class="headerlink" href="#the-risks" title="Permanent link">&para;</a></h3>
<p>Konnectors is not just a random application. It&rsquo;s a very good target for attacks
on Cozy because of these specificities:</p>
<ul>
<li>It run on the server, where there is no Content Security Policy, or firewall
    to protect the stack.</li>
<li>It has access to Internet, by design.</li>
<li>It is written in nodejs, with a lot of dependencies where it is easy to hide
    malicious code.</li>
<li>It is a collection of connectors written by a lot of people. We welcome
    these contributions, but it also means that we take into account that we
    can&rsquo;t review in depth all the contributions.</li>
</ul>
<h4 id="access-to-couchdb">Access to couchdb<a class="headerlink" href="#access-to-couchdb" title="Permanent link">&para;</a></h4>
<p>The stack has the admin credentials of couchdb. If a rogue code can read its
configuration file or intercept connexions between the stack and couchdb, it
will have access to couchdb with the admin credentials, and can do anything on
couchdb.</p>
<h4 id="access-to-the-stack">Access to the stack<a class="headerlink" href="#access-to-the-stack" title="Permanent link">&para;</a></h4>
<p>An attacker can try to profit of konnectors for accessing the stack. It can
target the port 6060, used by the stack to manage the cozy instances. Or, it can
use its privileged position for timing attacks on passwords.</p>
<h4 id="spying-other-connectors">Spying other connectors<a class="headerlink" href="#spying-other-connectors" title="Permanent link">&para;</a></h4>
<p>A rogue connector may try to spy other connectors to pick the credentials for
external web sites. It can be done by reading the environment variables or
<a href="https://en.wikipedia.org/wiki/Ptrace">ptracing</a> them.</p>
<h4 id="dos">DoS<a class="headerlink" href="#dos" title="Permanent link">&para;</a></h4>
<p>A connector can use a lot of CPU, Ram, or generate a lot of disk I/O to make a
deny of service on the server. The connector can remove files on the server to
make konnectors stop working.</p>
<h4 id="exploiting-the-cpu-or-the-bandwidth">Exploiting the CPU or the bandwidth<a class="headerlink" href="#exploiting-the-cpu-or-the-bandwidth" title="Permanent link">&para;</a></h4>
<p>The resources of the server can be seen as valuable: the CPU can be used for
bitcoins mining. The bandwidth can be used for DDoS of an external target.</p>
<h4 id="sending-spam">Sending spam<a class="headerlink" href="#sending-spam" title="Permanent link">&para;</a></h4>
<p>Profit of the configured SMTP server to send spams.</p>
<h4 id="be-root">Be root<a class="headerlink" href="#be-root" title="Permanent link">&para;</a></h4>
<p><a href="https://en.wikipedia.org/wiki/Row_hammer">Row hammer</a> can be a way to gain root
access on a server.</p>
<h3 id="possible-measures">Possible measures<a class="headerlink" href="#possible-measures" title="Permanent link">&para;</a></h3>
<h4 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Permanent link">&para;</a></h4>
<p>We can forbid the konnectors to speak directly with couchdb, and pass by the
stack for that. And use the <a href="../../permissions/">permissions</a> to restrict what each
konnectors can do with the cozy-stack.</p>
<h4 id="ignore-scripts-for-npmyarn">ignore-scripts for npm/yarn<a class="headerlink" href="#ignore-scripts-for-npmyarn" title="Permanent link">&para;</a></h4>
<p>Npm and yarn can execute scripts defined in package.json when installing nodejs
dependencies. We can use the
<a href="https://docs.npmjs.com/misc/config#ignore-scripts"><code>ignore-scripts</code></a> option to
disable this behaviour.</p>
<h4 id="forbid-addons-in-nodejs">Forbid addons in nodejs<a class="headerlink" href="#forbid-addons-in-nodejs" title="Permanent link">&para;</a></h4>
<p>Nodejs can require <a href="https://nodejs.org/api/addons.html">addons</a>, ie C/C++
compiled libraries. I&rsquo;ve found no flag to disable the install of such modules
for npm/yarn, and no flag for nodejs to prevent loading them. We can try to
detect and remove such modules just after the installation of node modules. They
should have a <code>.node</code> extension.</p>
<p><strong>Note</strong>: not having a compiler on the server is not enough. Npm can install
precompiled modules.</p>
<h4 id="vmsandbox-for-nodejs">vm/sandbox for Nodejs<a class="headerlink" href="#vmsandbox-for-nodejs" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/patriksimek/vm2">vm2</a> is a sandbox that can run untrusted
code with allowed Node&rsquo;s built-in modules.</p>
<h4 id="mock-net">Mock net<a class="headerlink" href="#mock-net" title="Permanent link">&para;</a></h4>
<p>We can mock the net module of nodejs to add some restrictions on what it can do.
For example, we can check that it does only http/https, and block connection
to localhost:6060. It is only effective if the konnector has no way to start a
new node processus.</p>
<h4 id="timeout">Timeout<a class="headerlink" href="#timeout" title="Permanent link">&para;</a></h4>
<p>If a konnector takes too long, after a timeout, it should be killed. It implies
that the cozy-stacks supervises the konnectors.</p>
<h4 id="chroot">Chroot<a class="headerlink" href="#chroot" title="Permanent link">&para;</a></h4>
<p><a href="https://en.wikipedia.org/wiki/Chroot">Chroot</a> is a UNIX syscall that makes an
application see only a part of the file-system. In particular, we can remove
access to <code>/proc</code> and <code>/sys</code> by not mounting them, and limit access to <code>/dev</code> to
just <code>/dev/null</code>, <code>/dev/zero</code>, and <code>/dev/random</code> by symlinks them.</p>
<h4 id="executing-as-another-user">Executing as another user<a class="headerlink" href="#executing-as-another-user" title="Permanent link">&para;</a></h4>
<p>We can create UNIX users that will just serve to execute the konnectors, and
nothing else. It&rsquo;s a nice way to give more isolation, but it means that we have
to find a way to execute the konnectors: either run the cozy-stack as root, or
have a daemon that launches the konnectors.</p>
<h4 id="ulimit-prlimit">Ulimit &amp; Prlimit<a class="headerlink" href="#ulimit-prlimit" title="Permanent link">&para;</a></h4>
<p><a href="http://ss64.com/bash/ulimit.html">ulimit</a> provides control over the resources
available to the shell and to processes started by it, on systems that allow
such control. It can be used to linit the number of processes (protection
against fork bombs), or the memory that can be used.</p>
<p><a href="http://man7.org/linux/man-pages/man1/prlimit.1.html">prlimit</a> can do the same
for just one command (technically, for a new session, not the current one).</p>
<h4 id="linux-namespaces">Linux namespaces<a class="headerlink" href="#linux-namespaces" title="Permanent link">&para;</a></h4>
<p>One feature Linux provides here is namespaces. There are a bunch of different
kinds:</p>
<ul>
<li>in a pid namespace you become PID 1 and then your children are other
    processes. All the other programs are gone</li>
<li>in a networking namespace you can run programs on any port you want without
    it conflicting with what’s already running</li>
<li>in a mount namespace you can mount and unmount filesystems without it
    affecting the host filesystem. So you can have a totally different set of
    devices mounted (usually less).</li>
</ul>
<p>It turns out that making namespaces is totally easy! You can just run a program
called <a href="http://man7.org/linux/man-pages/man1/unshare.1.html">unshare</a>.</p>
<p>Source:
<a href="https://jvns.ca/blog/2016/10/10/what-even-is-a-container/">What even is a container, by Julia Evans</a></p>
<h4 id="cgroups">Cgroups<a class="headerlink" href="#cgroups" title="Permanent link">&para;</a></h4>
<p><a href="https://en.wikipedia.org/wiki/Cgroups">cgroups</a> (abbreviated from control
groups) is a Linux kernel feature that limits, accounts for, and isolates the
resource usage (CPU, memory, disk I/O, network, etc.) of a collection of
processes.</p>
<h4 id="seccomp-bpf">Seccomp BPF<a class="headerlink" href="#seccomp-bpf" title="Permanent link">&para;</a></h4>
<p>Seccomp BPF is an extension to seccomp that allows filtering of system calls
using a configurable policy implemented using Berkeley Packet Filter rules.</p>
<h4 id="isolation-in-a-docker">Isolation in a docker<a class="headerlink" href="#isolation-in-a-docker" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/tjanczuk/isode">Isode</a> is a 3 years old project that aims to
isolate nodejs apps in docker containers. A possibility would be to follow this
path and isolate the konnectors inside docker.</p>
<p>It&rsquo;s a real burden for administrators. And its command line options often
changes from one version to another, making difficult to deploy something
reliable for self-hosted users. So we will try to avoid it.</p>
<p>Isolation in docker contains is mostly a combination of Linux Namespaces,
Cgroups, and Seccomp BPF. There are other options with those (see below).</p>
<h4 id="rkt">Rkt<a class="headerlink" href="#rkt" title="Permanent link">&para;</a></h4>
<p><a href="https://coreos.com/rkt/">Rkt</a> is a security-minded, standard-based container
engine. It is similar to Docker, but Docker needs running a daemon whereas rkt
can be launched from command-line with no daemon.</p>
<h4 id="nsjail-firejail">NsJail / FireJail<a class="headerlink" href="#nsjail-firejail" title="Permanent link">&para;</a></h4>
<p><a href="https://google.github.io/nsjail/">NsJail</a> and
<a href="https://firejail.wordpress.com/">FireJail</a> are two tools that use Linux
Namespaces and Seccomp BPF to reduce the risks to run untrusted applications on
Linux. FireJail seems to be more suited for graphical apps, and NsJail for
networking services.</p>
<h4 id="nacl-zerovm">NaCl / ZeroVM<a class="headerlink" href="#nacl-zerovm" title="Permanent link">&para;</a></h4>
<p><a href="http://www.zerovm.org/">ZeroVM</a> is an open source virtualization technology
that is based on the Chromium
<a href="https://en.wikipedia.org/wiki/Google_Native_Client">Native Client</a> (NaCl)
project. ZeroVM creates a secure and isolated execution environment which can
run a single thread or application. But NaCl is
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=239656#c160">no longer maintained</a>
and ZeroVM has some severe limitations, so, it won&rsquo;t be used.</p>
<h2 id="konnector-isolation-study">Konnector isolation study<a class="headerlink" href="#konnector-isolation-study" title="Permanent link">&para;</a></h2>
<p>The short list of tools which will be tested to isolate connectors is Rkt and
NsJail which on paper better fullfill our needs.</p>
<h3 id="nsjail">NsJail<a class="headerlink" href="#nsjail" title="Permanent link">&para;</a></h3>
<p>NsJail is a lightweight process isolation tool, making use of Linux namespaces
and seccomp-bpf syscall filters. It is not a container tool like docker. Its
features are quite extensive regarding isolation. The
<a href="https://github.com/google/nsjail">README</a> gives the full list of available
options. Although available in the google github, it is not an official google
tool.</p>
<p>NsJail is:</p>
<ul>
<li>easy to install : just a make away with standard build tools</li>
<li>offers a full list or isolation tools</li>
<li>lightly documented the only documentation is nsjail -h (also available in
    the main github page) and it is quite cryptic for a non-sysadmin like me. I
    could not find any help in any search engine. Some examples are available to
    run a back in an isolated process and work but I could not run a full nodejs
    (only nodejs -v worked)</li>
<li>The konnectors will need a full nodejs installed on the host</li>
<li>Is still actively maintained</li>
</ul>
<h3 id="rkt_1">Rkt<a class="headerlink" href="#rkt_1" title="Permanent link">&para;</a></h3>
<p>Rkt is very similar to docker. It can even directly run docker images from the
docker registry, which gives us a lot of existing images to use, even if we want
to be able to use other languages than node. For example, we could have also a
container dedicated to weboob, another container could use phantomjs or casper
and without forcing self-hosted users to do complicated installation procedures.</p>
<p>Rkt is :</p>
<ul>
<li>easy to install : debian, rpm package available, archlinux community package
    : https://github.com/coreos/rkt/releases</li>
<li>has network isolation like docker</li>
<li>offers CPU, memory limitation, seccomp isolation (but the set of rules to
    use is out of my understanding)</li>
<li>is well <a href="https://coreos.com/rkt/docs/latest/">documented</a>, complete man
    pages, but not as well known as docker, then there is not a lot of things to
    find outside the official documentation.</li>
<li>can use docker image directly or can convert them to one runnable aci file
    with one simple cli command (rkt export)</li>
<li>is in active developpement but relatively stable regarding core features.</li>
<li>container images can be easily signed and the signature is checked by
    default when running a container.</li>
</ul>
<p>I managed to run a nodejs container with just the following commands :</p>
<div class="codehilite"><pre><span></span>rkt run --insecure-options=image --interactive docker://node:slim --name nodeslim -- -v
rkt list   # to get the container uuid
rkt export --app=nodeslim &lt;uuid&gt; nodeslim.aci
rkt run --insecure-options=image --interactive nodeslim.aci -- -v  # to run node -v in the new container
</pre></div>


<p>Note: the &ndash;insecure-options param is to avoid the check of the image signature
to ease the demonstration</p>
<h3 id="choice">Choice<a class="headerlink" href="#choice" title="Permanent link">&para;</a></h3>
<p>The best choice would be Rkt for it&rsquo;s ease of use (which is good for
contribution) and wide range of isolation features + access to the big docker
ecosystem without beeing a burden for the host administrator. Note : the
limitation of NsJail I saw might be due to my lack of knowledge regarding system
administration.</p>
<h3 id="proposed-use-of-rkt-regarding-connectors">Proposed use of rkt regarding connectors<a class="headerlink" href="#proposed-use-of-rkt-regarding-connectors" title="Permanent link">&para;</a></h3>
<h4 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h4>
<p>As stated before, rkt is easy to install. It may also be possible to make it
available in the cozy-stack docker image but I did not test it (TODO)</p>
<h4 id="image-creation">Image creation<a class="headerlink" href="#image-creation" title="Permanent link">&para;</a></h4>
<p>To create an ACI file image, you just need to run a docker image one time :</p>
<div class="codehilite"><pre><span></span>rkt run  --uuid-file-save=$PWD/uuid --insecure-options=image --interactive docker://node:slim --name nodeslim -- -v
rkt export --app=nodeslim `cat uuid` nodeslim.aci &amp;&amp; rm uuid
</pre></div>


<p>The node:slim image weights 84M at this time. The node:alpine image also exists
and is way lighter (19M) but I had problems with DNS with this, and alpine can
cause some nasty bugs that are difficult to track.</p>
<h4 id="running-a-connector">Running a connector<a class="headerlink" href="#running-a-connector" title="Permanent link">&para;</a></h4>
<p>A path dedicated to run the konnectors with a predefined list of node packages
available (the net module could be mocked with special limitations to block
some urls)</p>
<p>A script will run the node container giving as option the script to launch. The
path is mounted inside the container. The following script does just that</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
rm -rf ./container_dir
cp -r ./container_dir_template ./container_dir
rkt run --net<span class="o">=</span>host --environment<span class="o">=</span><span class="nv">CREDENTIAL</span><span class="o">=</span>value<span class="p">;</span><span class="nv">COZY_URL</span><span class="o">=</span>url --uuid-file-save<span class="o">=</span><span class="nv">$PWD</span>/uuid --volume data,kind<span class="o">=</span>host,source<span class="o">=</span><span class="nv">$PWD</span>/container_dir --insecure-options<span class="o">=</span>image nodeslim.aci --cpu<span class="o">=</span>100m --memory<span class="o">=</span>128M --name rktnode --mount <span class="nv">volume</span><span class="o">=</span>data,target<span class="o">=</span>/usr/src/app --exec node -- /usr/src/app/<span class="nv">$1</span> <span class="nv">$2</span> <span class="p">&amp;</span>
<span class="c1"># the container will handle itself the communication with the stack</span>
sleep <span class="m">60</span>
rkt stop --force --uuid-file<span class="o">=</span>uuid
rkt rm --uuid-file<span class="o">=</span>uuid
rm -rf ./container_dir
</pre></div>
</td></tr></table>

<p>This script can be run like this :</p>
<div class="codehilite"><pre><span></span>./rkt.sh mynewkonnector.js
</pre></div>


<p>If the mynewkonnector.js file is available in the container_dir_template
directory.</p>
<p>Cons : must forbid access to port 5984 and 6060 + SMTP server</p>
<p>The limitation of time, CPU and memory will avoid most DOS attacks (to my
knowledge). For memory use, I still don&rsquo;t see a way to prevent the excessive use
of swap from the container. To prevent the connectors from listening to each
other, they should be run in containers with different uid, avoiding them to
listen to each other.</p>
<h4 id="solution-to-limit-access-of-the-container-to-5984-and-6060-ports-smtp">Solution to limit access of the container to 5984 and 6060 ports + SMTP<a class="headerlink" href="#solution-to-limit-access-of-the-container-to-5984-and-6060-ports-smtp" title="Permanent link">&para;</a></h4>
<p>The container must be started in bridged mode. With that, the container still
has access to localhost but through a specific IP address visible with ifconfig.
That way, the host can have iptable rules to forbid access to specified ports to
the bridge.</p>
<p>To connect a container in bridge mode :</p>
<p>On the host create the file /etc/rkt/net.d/10-containers.conf</p>
<div class="codehilite"><pre><span></span>{
    &quot;name&quot;: &quot;bridge&quot;,
    &quot;type&quot;: &quot;bridge&quot;,
    &quot;bridge&quot;: &quot;rkt-bridge-nat&quot;,
    &quot;ipMasq&quot;: true,
    &quot;isGateway&quot;: true,
    &quot;ipam&quot;: {
        &quot;type&quot;: &quot;host-local&quot;,
        &quot;subnet&quot;: &quot;10.2.0.0/24&quot;,
        &quot;routes&quot;: [
               { &quot;dst&quot;: &quot;0.0.0.0/0&quot; }
        ]
    }
}
</pre></div>


<p>and run your container with the &ldquo;&ndash;net=bridge&rdquo; option. That way, a new interface
is available in the container and gives you access to the host.</p>
<h2 id="konnector-install-and-run-details">Konnector install and run details<a class="headerlink" href="#konnector-install-and-run-details" title="Permanent link">&para;</a></h2>
<h3 id="install">Install<a class="headerlink" href="#install" title="Permanent link">&para;</a></h3>
<p>The konnectors will be installed in the .cozy_konnectors directory which is in
the VFS using git clone (like the apps at the moment).</p>
<p>The konnectors installation may be triggered when the user says he wants to use
it. The resulting repository is then kept for each run of the konnector. It may
then be given to the user the possibility to upgrade the konnector to the latest
version if any.</p>
<p>To update a given konnector, a <code>git pull</code> command is run on the konnector.</p>
<h3 id="details-about-running-a-konnector">Details about running a konnector<a class="headerlink" href="#details-about-running-a-konnector" title="Permanent link">&para;</a></h3>
<p>To run a given konnector, the stack will copy this connector in a &ldquo;run&rdquo;
directory, which is not in the VFS. This directory will be given to the rocket
container as the current working directory with full read and write access on
it. This is where the container will put its logs and any temp file needed.
There will be also cozy-client.js and the shared libraries in a lib directory
inside this directory. The lib directory will be the content of the
<a href="https://github.com/cozy-labs/konnectors/tree/master/server/lib">actual server lib directory</a>.</p>
<p>The konnector will be run with the following environment variables :</p>
<ul>
<li><code>COZY_CREDENTIALS</code> : containing the response to Oauth request as json string</li>
<li><code>COZY_URL</code> : to know what instance is running the konnector</li>
<li><code>COZY_FIELDS</code> : as a json string with all the values from the account
    associated to the konnector.</li>
<li><code>COZY_PARAMETERS</code> : optional json string associated with the application,
    used to parameterize a konnector based on a common set of code.</li>
</ul>
<p>In the end of the konnector execution (or timeout), the logs are read in the
log.txt file and added to the konnector own log file (in VFS) and the run
directory is then destroyed.</p>
<h2 id="multi-account-handling">Multi-account handling<a class="headerlink" href="#multi-account-handling" title="Permanent link">&para;</a></h2>
<p>This section is devoted to allow the user to use one account for multiple
konnectors. It will follow the following constraints in mind:</p>
<ul>
<li>The migration path must be as easy as possible</li>
<li>The developpement and maintainance of konnector must also be as easy as
    possible</li>
</ul>
<h3 id="new-doctype-iocozyaccounts">New doctype : io.cozy.accounts<a class="headerlink" href="#new-doctype-iocozyaccounts" title="Permanent link">&para;</a></h3>
<p>A new doctype will have to be created to allow to keep konnector accounts
independently from each konnector. The one once used by the email application
seems to be a good candidate : io.cozy.accounts</p>
<p>Here is an example document with this doctype :</p>
<div class="codehilite"><pre><span></span>{
    _id: &quot;ojpiojpoij&quot;,
    name: &quot;user decided name for the account&quot;,
    accountType: &quot;google&quot;,
    login: &quot;mylogin&quot;,
    password: &quot;123456&quot;
}
</pre></div>


<p>Any attribute needed for the account may be added : email, etc&hellip;</p>
<h3 id="updates-needed-in-existing-application-and-konnectors">Updates needed in existing application and konnectors<a class="headerlink" href="#updates-needed-in-existing-application-and-konnectors" title="Permanent link">&para;</a></h3>
<p>CRUD manipulation of io.cozy.accounts and linking them with konnectors will be
handled by the &ldquo;my accounts&rdquo; client application.</p>
<p>Each konnector need also to declare a new field in the &ldquo;fields&rdquo; attribute which
will be the type of account, related to the accountType field in the new account
docType.</p>
<p>Ex:</p>
<div class="codehilite"><pre><span></span><span class="k">module</span>.<span class="n">exports</span> = <span class="n">baseKonnector</span>.<span class="n">createNew</span>({
  <span class="n">name:</span> <span class="s">&#39;Trainline&#39;</span>,
  <span class="n">vendorLink:</span> <span class="s">&#39;www.captaintrain.com&#39;</span>,
  <span class="n">category:</span> <span class="s">&#39;transport&#39;</span>,
  <span class="n">color:</span> {
    <span class="n">hex:</span> <span class="s">&#39;#48D5B5&#39;</span>,
    <span class="n">css:</span> <span class="s">&#39;#48D5B5&#39;</span>
  },
  <span class="n">fields:</span> {
    <span class="n">login:</span> {
      <span class="n">type:</span> <span class="s">&#39;text&#39;</span>
    },
    <span class="n">password:</span> {
      <span class="n">type:</span> <span class="s">&#39;password&#39;</span>
    },
    <span class="n">folderPath:</span> {
      <span class="n">type:</span> <span class="s">&#39;folder&#39;</span>,
      <span class="n">advanced:</span> <span class="nb">true</span>
    },
    <span class="n">accountType:</span> <span class="s">&quot;trainline&quot;</span>
  },
  <span class="n">dataType:</span> [<span class="s">&#39;bill&#39;</span>],
  <span class="n">models:</span> [<span class="n">Bill</span>],
  <span class="n">fetchOperations:</span> [
    ...
  ]
})
</pre></div>


<p>With this new field, which will appear also in the io.cozy.konnectors docType,
the &ldquo;my account&rdquo; client appliction will be able to propose existing accounts of
the good type for activating a new konnector.</p>
<h3 id="migration-path">Migration path<a class="headerlink" href="#migration-path" title="Permanent link">&para;</a></h3>
<p>For the migration of existing, activated konnectors in V2, the type of account
for each konnector will have to be indicated in a V2 &ldquo;my account&rdquo; application
update. After that, it will be possible to create the accounts associated to
each activated konnectors an link the konnectors to these accounts in a
migration script.</p>
<h2 id="study-on-konnectors-installation-on-vfs">Study on konnectors installation on VFS<a class="headerlink" href="#study-on-konnectors-installation-on-vfs" title="Permanent link">&para;</a></h2>
<p>The VFS is slow and installing npm packages on it will cause some performance
problem. We are trying to find solution to handle that.</p>
<p>We found 3 possible solutions :</p>
<ul>
<li>Install the konnector on VFS as tar.gz files with all the dependencies
    included by the konnector developper<ul>
<li>advantages : easy for the konnector developper, as performant as a cp,
    no nedd for a compiled version of the konnector source, no duplication
    of code in the repo</li>
<li>drawbacks : The source are not readable in files application then more
    complicated to study the konnector source, not really nice&hellip; , still
    could take a lot of space on VFS</li>
</ul>
</li>
<li>Use webpack with <code>target: node</code> option to make a node bundle of the
    dependencies<ul>
<li>advantages : the konnector itself stays in clear on the VFS</li>
<li>drawbacks : forces a compilation of the sources and then a sync between
    the source and bundle in the git repo by the konnector developper,
    forces konnector developpers to use webpack.</li>
</ul>
</li>
<li>Install the npm dependencies with yarn in an immutable cache (&ndash;cache-folder
    option) in a directory like deps-${konnector-git-sha1} not in VFS.<ul>
<li>advantages : easier for the konnector developper, no particular
    dependency handling, no mandatory compilation, just a package.json in
    the git repository, the cache can be shared by instances</li>
<li>drawbacks : node only solution, maybe more work on the cozy-stack side</li>
</ul>
</li>
</ul>
<h2 id="todo">TODO<a class="headerlink" href="#todo" title="Permanent link">&para;</a></h2>
<ul>
<li>[x] How to install and update the konnectors?</li>
<li>[x] Are the konnectors installed once per server or per instance (in the VFS
        like client-side apps)?</li>
<li>[x] One git repository with all the konnectors (like now), or one repos per
        konnector? Same question for package.json</li>
<li>[ ] What API to list the konnectors for My Accounts?</li>
<li>[ ] What workflow for developing a konnector?</li>
<li>[ ] How to test konnectors?</li>
<li>[x] How are managed the locales? : declared in manfiest.konnector</li>
<li>[x] Which version of nodejs? Last LTS version bundled in a rocket container</li>
<li>[ ] Do you keep coffeescript? Or move every konnector to ES2017? _ 28
        konnectors in coffee _ 22 konnectors in JS</li>
<li>[ ] What about weboob?</li>
<li>[ ] What roadmap for transforming the konnectors-v2 in konnectors-v3?</li>
<li>[x] What format for the konnectors manifest?</li>
<li>[x] What permissions for a konnector?</li>
<li>[ ] For konnectors that import files, how can we let the user select a
        folder and have an associated permission for the konnector in this
        folder (and not anywhere else on the virtual file system)?</li>
<li>[ ] Can we associate the data retrieved by a konnector to a &ldquo;profile&rdquo;? The
        goal is to allow a client-side to have a permission on this profile and
        be able to read all the data fetched by a given konnector (or is tied to
        an account)?</li>
<li>[ ] How are logged the data exported/synchronized by a &ldquo;push&rdquo; konnector?</li>
<li>[x] Analyze the konnectors node_modules _ no compiled modules currently _ 28
        dependencies that install 65 MB for 271 modules in production * 71
        dependencies that install 611 MB for 858 modules with dev dependencies</li>
<li>[ ] How are persisted the accounts?</li>
<li>[x] How is executed a konnector? In particular, how the credentials are
        given to the konnector?</li>
<li>[ ] what should expose a konnector (data, functions, etc)? *
        https://github.com/cozy-labs/konnectors/issues/695</li>
<li>[ ] How can we support konnectors with OAuth?</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="/en/privacy">privacy</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.2.3",url:{base:"../../.."}})</script>
      
        <script src="../../../extra.js"></script>
      
    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="https://matomo.cozycloud.cc/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '25']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->

  </body>
</html>