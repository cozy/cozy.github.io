



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-stack/archives/architecture/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.4.0">
    
    
      
        <title>Architecture - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-app-publish"}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "cozy-desktop", "repo": "https://github.com/cozy-labs/cozy-desktop.git", "subdir": "doc"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-notifications", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-notifications"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "cozy-home", "repo": "https://github.com/cozy/cozy-home.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#cozy-stack-architecture" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Architecture
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../tutorials/app/" title="Tutorials" class="md-tabs__link">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../cozy-client/getting-started/" title="Libraries" class="md-tabs__link">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../projects/" title="Projects" class="md-tabs__link">
          Projects
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Develop a Client-Side Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Develop a Client-Side Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/clisk-creation/" title="CliSK Creation" class="md-nav__link">
      CliSK Creation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/clisk-lib-doc/" title="Library Documentation" class="md-nav__link">
      Library Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/best-practice/" title="Best Practice" class="md-nav__link">
      Best Practice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/contributions/" title="Contributions" class="md-nav__link">
      Contributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/client-side-konnector/additional-ressources/" title="Additional Ressources" class="md-nav__link">
      Additional Ressources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Manipulate data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Manipulate data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/pouchdb/" title="PouchDB" class="md-nav__link">
      PouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/doctypes/" title="DocTypes" class="md-nav__link">
      DocTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/qualification/" title="Qualification" class="md-nav__link">
      Qualification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/data/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/translate/" title="Translate Apps" class="md-nav__link">
      Translate Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Self-Hosting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Self-Hosting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/docker/" title="Running inside Docker" class="md-nav__link">
      Running inside Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3" type="checkbox" id="nav-2-6-3">
    
    <label class="md-nav__link" for="nav-2-6-3">
      Traditional installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-6-3">
        Traditional installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-1" type="checkbox" id="nav-2-6-3-1">
    
    <label class="md-nav__link" for="nav-2-6-3-1">
      Requirements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-1">
        Requirements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/" title="What you need" class="md-nav__link">
      What you need
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/couchdb/" title="Installing CouchDB" class="md-nav__link">
      Installing CouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/requirements/nodejs/" title="Installing NodeJS" class="md-nav__link">
      Installing NodeJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-2" type="checkbox" id="nav-2-6-3-2">
    
    <label class="md-nav__link" for="nav-2-6-3-2">
      Installing cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-2">
        Installing cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/package/" title="From precompiled package" class="md-nav__link">
      From precompiled package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/install/sources/" title="From sources" class="md-nav__link">
      From sources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-3" type="checkbox" id="nav-2-6-3-3">
    
    <label class="md-nav__link" for="nav-2-6-3-3">
      Finalize installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-3">
        Finalize installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/nginx/" title="Nginx and certificates" class="md-nav__link">
      Nginx and certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/apache/" title="Using Apache instead of Nginx" class="md-nav__link">
      Using Apache instead of Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/finalize/create_instance/" title="Create first instance" class="md-nav__link">
      Create first instance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-4" type="checkbox" id="nav-2-6-3-4">
    
    <label class="md-nav__link" for="nav-2-6-3-4">
      Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-4">
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/more_instances/" title="Create more instances" class="md-nav__link">
      Create more instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/upgrade/" title="Upgrade cozy-stack" class="md-nav__link">
      Upgrade cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/mail/" title="Configure mail sending" class="md-nav__link">
      Configure mail sending
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/selfhosting/administration/office/" title="Online edition of office documents" class="md-nav__link">
      Online edition of office documents
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/services/" title="Develop a service from your application" class="md-nav__link">
      Develop a service from your application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/run-connectors-on-local-cozy-stack/" title="Run Connectors With a Local cozy-stack" class="md-nav__link">
      Run Connectors With a Local cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1">
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/timeseries/" title="Using time series" class="md-nav__link">
      Using time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-pouch-link.md" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-ui/" title="Build the user interface (ui)" class="md-nav__link">
      Build the user interface (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.ai.chat.conversations/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps.suggestions/" title="App suggestions" class="md-nav__link">
      App suggestions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.coachco2/" title="CoachCO2" class="md-nav__link">
      CoachCO2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.docrules/" title="DocRules" class="md-nav__link">
      DocRules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.home.settings/" title="Home settings" class="md-nav__link">
      Home settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notes/" title="Notes" class="md-nav__link">
      Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.timeseries/" title="Time series" class="md-nav__link">
      Time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.todos/" title="Todos" class="md-nav__link">
      Todos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.nextcloud.files/" title="Remote NextCloud files" class="md-nav__link">
      Remote NextCloud files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.organizations/" title="Bitwarden organizations" class="md-nav__link">
      Bitwarden organizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.contacts/" title="Bitwarden contacts" class="md-nav__link">
      Bitwarden contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.announcements/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-notifications/" title="Send notifications (cozy-notifications)" class="md-nav__link">
      Send notifications (cozy-notifications)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1" type="checkbox" id="nav-4-6-1">
    
    <label class="md-nav__link" for="nav-4-6-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-6-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-2" type="checkbox" id="nav-4-6-1-2">
    
    <label class="md-nav__link" for="nav-4-6-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/" title="Using the admin API" class="md-nav__link">
      Using the admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../important-changes/" title="Important changes" class="md-nav__link">
      Important changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-3" type="checkbox" id="nav-4-6-1-3">
    
    <label class="md-nav__link" for="nav-4-6-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../http-api/" title="Using the HTTP API" class="md-nav__link">
      Using the HTTP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors-dev/" title="Running a konnector locally" class="md-nav__link">
      Running a konnector locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-4" type="checkbox" id="nav-4-6-1-4">
    
    <label class="md-nav__link" for="nav-4-6-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../flagship/" title="Flagship app" class="md-nav__link">
      Flagship app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../move-design/" title="Move design" class="md-nav__link">
      Move design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime-internals/" title="Realtime internals" class="md-nav__link">
      Realtime internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-5" type="checkbox" id="nav-4-6-1-5">
    
    <label class="md-nav__link" for="nav-4-6-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ai/" title="/ai - AI" class="md-nav__link">
      /ai - AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../delegated-auth/" title="/oidc - Delegated authentication" class="md-nav__link">
       /oidc - Delegated authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connection-check/" title="/connection_check - Connection check" class="md-nav__link">
      /connection_check - Connection check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contacts/" title="/contacts - Contacts" class="md-nav__link">
      /contacts - Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../not-synchronized-vfs/" title="/files - Not synchronized directories" class="md-nav__link">
       /files - Not synchronized directories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnectors/" title="/konnectors - Konnectors" class="md-nav__link">
      /konnectors - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/" title="/notes - Notes for collaborative edition" class="md-nav__link">
      /notes - Notes for collaborative edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../office/" title="/office - Collaborative edition of Office documents" class="md-nav__link">
      /office - Collaborative edition of Office documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../nextcloud/" title="/remote/nextcloud - NextCloud" class="md-nav__link">
       /remote/nextcloud - NextCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../rabbitmq/" title="/rabbitmq - RabbitMQ integration" class="md-nav__link">
      /rabbitmq - RabbitMQ integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../shared-drives/" title="/sharings/drives - Shared drives" class="md-nav__link">
       /sharings/drives - Shared drives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../shortcuts/" title="/shortcuts - Shortcuts" class="md-nav__link">
      /shortcuts - Shortcuts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../wellknown/" title="/.well-known - Well-known" class="md-nav__link">
      /.well-known - Well-known
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/" title="Documentations" class="md-nav__link">
      Documentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Cozy Desktop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Cozy Desktop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/file_systems/" title="Filesystems" class="md-nav__link">
      Filesystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/ignore_files/" title="Ignore files" class="md-nav__link">
      Ignore files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/inotify/" title="inotify" class="md-nav__link">
      inotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/limitations/" title="Limitations" class="md-nav__link">
      Limitations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/macos/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-3" type="checkbox" id="nav-5-2-3">
    
    <label class="md-nav__link" for="nav-5-2-3">
      Developer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-3">
        Developer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/api_doc/" title="API Documentation" class="md-nav__link">
      API Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/coffeescript.md" title="Cofeescript" class="md-nav__link">
      Cofeescript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/log_analysis/" title="Log analysis" class="md-nav__link">
      Log analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/feedback/" title="Feddback" class="md-nav__link">
      Feddback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-cozy" title="What is Cozy?" class="md-nav__link">
    What is Cozy?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reverse-proxy" title="Reverse proxy" class="md-nav__link">
    Reverse proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-cozy-stack" title="The Cozy Stack" class="md-nav__link">
    The Cozy Stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#databases" title="Databases" class="md-nav__link">
    Databases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" title="Metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossary" title="Glossary" class="md-nav__link">
    Glossary
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instance" title="Instance" class="md-nav__link">
    Instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cozy-stack-build-mode" title="Cozy Stack Build Mode" class="md-nav__link">
    Cozy Stack Build Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#services" title="Services" class="md-nav__link">
    Services
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication-auth" title="Authentication /auth" class="md-nav__link">
    Authentication /auth
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applications-apps" title="Applications /apps" class="md-nav__link">
    Applications /apps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-system-data" title="Data System /data" class="md-nav__link">
    Data System /data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtual-file-system-files" title="Virtual File System /files" class="md-nav__link">
    Virtual File System /files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharing-sharings" title="Sharing /sharings" class="md-nav__link">
    Sharing /sharings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-jobs" title="Jobs /jobs" class="md-nav__link">
    Jobs /jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync-sync" title="Sync /sync" class="md-nav__link">
    Sync /sync
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings-settings" title="Settings /settings" class="md-nav__link">
    Settings /settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifications-notifications" title="Notifications /notifications" class="md-nav__link">
    Notifications /notifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-realtime" title="Real-time /realtime" class="md-nav__link">
    Real-time /realtime
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-catcher-errors" title="Error catcher /errors" class="md-nav__link">
    Error catcher /errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-proxy" title="Proxy /proxy" class="md-nav__link">
    Proxy /proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status-status" title="Status /status" class="md-nav__link">
    Status /status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workers" title="Workers" class="md-nav__link">
    Workers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetch-emails-jobsmailbox" title="Fetch emails /jobs/mailbox" class="md-nav__link">
    Fetch emails /jobs/mailbox
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send-email-jobssendmail" title="Send email /jobs/sendmail" class="md-nav__link">
    Send email /jobs/sendmail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-metadata-jobsmetadata" title="Extract metadata /jobs/metadata" class="md-nav__link">
    Extract metadata /jobs/metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konnectors-jobskonnector" title="Konnectors /jobs/konnector" class="md-nav__link">
    Konnectors /jobs/konnector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registry-jobsregistry" title="Registry /jobs/registry" class="md-nav__link">
    Registry /jobs/registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexer-jobsindexer" title="Indexer /jobs/indexer" class="md-nav__link">
    Indexer /jobs/indexer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serverless-apps" title="Serverless apps" class="md-nav__link">
    Serverless apps
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#home-appshome" title="Home /apps/home" class="md-nav__link">
    Home /apps/home
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-was-marketplace-appsstore" title="Store (was marketplace) /apps/store" class="md-nav__link">
    Store (was marketplace) /apps/store
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings-was-my-apps-appssettings" title="Settings (was My apps) /apps/settings" class="md-nav__link">
    Settings (was My apps) /apps/settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collect-was-konnectors-appscollect" title="Collect (was konnectors) /apps/collect" class="md-nav__link">
    Collect (was konnectors) /apps/collect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#devtools-appsdevtools" title="Devtools /apps/devtools" class="md-nav__link">
    Devtools /apps/devtools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contacts-appscontacts" title="Contacts /apps/contacts" class="md-nav__link">
    Contacts /apps/contacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calendar-appscalendar" title="Calendar /apps/calendar" class="md-nav__link">
    Calendar /apps/calendar
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drive-appsdrive" title="Drive /apps/drive" class="md-nav__link">
    Drive /apps/drive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#photos-appsphotos" title="Photos /apps/photos" class="md-nav__link">
    Photos /apps/photos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#todo-list-appstodo" title="Todo list /apps/todo" class="md-nav__link">
    Todo list /apps/todo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onboarding-appsonboarding" title="Onboarding /apps/onboarding" class="md-nav__link">
    Onboarding /apps/onboarding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clients" title="Clients" class="md-nav__link">
    Clients
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mobile" title="Mobile" class="md-nav__link">
    Mobile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#desktop" title="Desktop" class="md-nav__link">
    Desktop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guidelines" title="Guidelines" class="md-nav__link">
    Guidelines
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-go-programming-language" title="The Go Programming Language" class="md-nav__link">
    The Go Programming Language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository-organisation" title="Repository organisation" class="md-nav__link">
    Repository organisation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-api" title="Rest API" class="md-nav__link">
    Rest API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#http-status-codes" title="HTTP status codes" class="md-nav__link">
    HTTP status codes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#doctypes" title="DocTypes" class="md-nav__link">
    DocTypes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-and-export" title="Import and export" class="md-nav__link">
    Import and export
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-contribute" title="How to contribute?" class="md-nav__link">
    How to contribute?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-new-konnector" title="Adding a new konnector" class="md-nav__link">
    Adding a new konnector
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-new-application" title="Creating a new application" class="md-nav__link">
    Creating a new application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting-a-bug-or-suggesting-a-new-feature" title="Reporting a bug or suggesting a new feature" class="md-nav__link">
    Reporting a bug or suggesting a new feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translating-to-a-new-language" title="Translating to a new language" class="md-nav__link">
    Translating to a new language
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" title="FAQ" class="md-nav__link">
    FAQ
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-stack/archives/architecture.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <p><a href="../../#table-of-contents">Table of contents</a></p>
<p>This document was written in september 2016.</p>
<h1 id="cozy-stack-architecture">Cozy Stack Architecture<a class="headerlink" href="#cozy-stack-architecture" title="Permanent link">&para;</a></h1>
<h2 id="what-is-cozy">What is Cozy?<a class="headerlink" href="#what-is-cozy" title="Permanent link">&para;</a></h2>
<p>Cozy is a personal platform as a service with a focus on data. Cozy can be seen
as 4 layers, from inside to outside:</p>
<ol>
<li>A place to keep your personal data</li>
<li>A core API to handle the data</li>
<li>Your web apps, and also the mobile &amp; desktop clients</li>
<li>A coherent User Experience.</li>
</ol>
<p>It&rsquo;s also a set of values: Simple, Versatile, Yours. These values mean a lot for
Cozy in all aspects. From an architectural point of view, it declines to:</p>
<ul>
<li>Simple to deploy and understand, not built as a galaxy of optimized
    microservices managed by kubernetes that only experts can debug.</li>
<li>Versatile, can be hosted on a Raspberry Pi for geeks to massive scale on
    multiple servers by specialized hosting. Users can install apps.</li>
<li>Yours, you own your data and you control it. If you want to take back your
    data to go elsewhere, you can.</li>
</ul>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The architecture of Cozy is composed of:</p>
<ul>
<li>A reverse proxy</li>
<li>The cozy stack</li>
<li>A CouchDB instance to persist the JSON documents</li>
<li>A space for storing files</li>
<li>Optionally, Redis for caching and synchronization</li>
<li>Optionally, a metrics server.</li>
</ul>
<p>All of this can run on a personal server, self-hosted at home, like a Raspberry
Pi:</p>
<p><img alt="Architecture for a self-hosted" src="../../diagrams/self-hosted.png" /></p>
<p>But it&rsquo;s also possible to deploy a cozy on a more powerful server in order to
host dozens of cozy instances (an association for example). It will looks like
this:</p>
<p><img alt="Architecture for a medium instance" src="../../diagrams/middle-instance.png" /></p>
<p>And even to scale to thousands of cozy instances on a server farm, with high
availability:</p>
<p><img alt="Architecture for a big instance" src="../../diagrams/big-instance.png" /></p>
<p>This elasticity comes with some constraints:</p>
<ul>
<li>Most applications are run in the browser, not in the server.</li>
<li>What must run on the server is mutualized inside the cozy stack.</li>
<li>The cozy stack is stateless.</li>
<li>The data is stored in couchdb and a space for files.</li>
<li>A couchdb database is specific to an instance (no mix of data from 2 users
    in the same database).</li>
</ul>
<h3 id="reverse-proxy">Reverse proxy<a class="headerlink" href="#reverse-proxy" title="Permanent link">&para;</a></h3>
<p>The reverse proxy is here to accept HTTPS connexions and forward the request to
the cozy stack. It&rsquo;s here mainly to manage the TLS part and binding a port &lt;
1024 without needing to launch the cozy stack as root. And it&rsquo;s better if http/2
is supported, as it will make the web interface to load faster.</p>
<h3 id="the-cozy-stack">The Cozy Stack<a class="headerlink" href="#the-cozy-stack" title="Permanent link">&para;</a></h3>
<p>The Cozy Stack is a single executable. It can do several things but its most
important usage is starting an HTTP server to serve as an API for all the
services of Cozy, from authentication to real-time events. This API can be used
on several domains. Each domain is a cozy instance for a specific user
(&ldquo;multi-tenant&rdquo;).</p>
<h3 id="redis">Redis<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h3>
<p>Redis is optional when there is a single cozy stack running. When available, it
is used to synchronize the Cozy Stacks: distributed locks for special operations
like installing an application, queues for recurrent jobs, etc. As a bonus, it
can also be used to cache some frequently used documents.</p>
<h3 id="databases">Databases<a class="headerlink" href="#databases" title="Permanent link">&para;</a></h3>
<p>The JSON documents that represent the users data are stored in CouchDB, but they
are not mixed in a single database. We don&rsquo;t mix data from 2 users in the same
database. It&rsquo;s easier and safer to control the access to the data by using
different databases per user.</p>
<p>But we think to go even further by splitting the data of a user in several
databases, one per document type. For example, we can have a database for the
emails of a user and one for her todo list. This can simplify the implementation
of permissions (this app has access to these document types) and can improve
performance. CouchDB queries work with views. A view is defined ahead of its
usage and is built by CouchDB when it is requested and is stale, i.e. there were
writes in the database since the last time it was updated. So, with a single
database per user, it&rsquo;s possible to experience lag when the todolist view is
requested after fetching a long list of emails. By splitting the databases per
doctypes, we gain on two fronts:</p>
<ol>
<li>The views are updated less frequently, only when documents of the matching
   doctypes are written.</li>
<li>Some views are no longer necessary: those to access documents of a specific
   doctypes.</li>
</ol>
<p>There are downsides, mostly:</p>
<ol>
<li>It can be harder to manage more databases.</li>
<li>It&rsquo;s no longer possible to use a single view for documents from doctypes that
   are no longer in the same database.</li>
</ol>
<p>We think that we can work on that and the pros will outweigh the cons.</p>
<h3 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h3>
<p>The Cozy Stack can generate some metrics about its usage (the size of the files
transfered, the number of opened connexions, the number of requests to redis,
etc.) and export them to a metrics backend. It will help identify the
bottlenecks when scaling to add more users.</p>
<p><a href="http://www.warp10.io/">The Warp 10 Platform</a> looks like a good candidate for
this.</p>
<h3 id="glossary">Glossary<a class="headerlink" href="#glossary" title="Permanent link">&para;</a></h3>
<h4 id="instance">Instance<a class="headerlink" href="#instance" title="Permanent link">&para;</a></h4>
<p>An instance is a logical space owned by a user and identified by a domain. For
example, zoe.cozycloud.cc can be the cozy instance of Zoé. This instance has a
space for storing files and some CouchDB databases for storing the documents of
its owner.</p>
<h4 id="environment">Environment<a class="headerlink" href="#environment" title="Permanent link">&para;</a></h4>
<p>When creating an instance, it&rsquo;s possible to give an environment, <code>dev</code>, <code>test</code>
or <code>prod</code>. The default apps won&rsquo;t be the same on all environments. For example,
in the <code>dev</code> environment, some devtools will be installed to help the front
developers to create their own apps.</p>
<h4 id="cozy-stack-build-mode">Cozy Stack Build Mode<a class="headerlink" href="#cozy-stack-build-mode" title="Permanent link">&para;</a></h4>
<p>The cozy stack can run in several modes, set by a UNIX environment variable:</p>
<ul>
<li><code>production</code>, the default</li>
<li><code>development</code>, for coding on the cozy stack.</li>
</ul>
<p>This mode is set when compiling the cozy-stack. It is used to show more or less
logs, and what is acceptable to be displayed in errors.</p>
<p>Even if the Cozy Stack Build Mode and Environment have similar values, they are
not the same. The Cozy Stack Mode will be used by core developers to hack on the
cozy stack. The environment will be used by front developers to hack on cozy
apps.</p>
<h2 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h2>
<p>The cozy stack came with several services. They run on the server, inside the
golang process and have an HTTP interface.</p>
<h3 id="authentication-auth">Authentication <code>/auth</code><a class="headerlink" href="#authentication-auth" title="Permanent link">&para;</a></h3>
<p>The cozy stack can authenticate the owner of a cozy instance. This can happen in
the classical web style, with a form and a cookie, but also with OAuth2 for
remote interactions like cozy-mobile and cozy-desktop.</p>
<h3 id="applications-apps">Applications <code>/apps</code><a class="headerlink" href="#applications-apps" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s possible to manage serverless applications from the cozy stack and serve
them via cozy stack. The stack does the routing and serve the HTML and the
assets for the applications.</p>
<p>The assets of the applications are installed in the virtual file system. On the
big instances, it means that even if it is the frontal 1 that installs the
application, frontal 2 will still be able to serve the application by getting
its assets from Swift.</p>
<p>It will be possible to install applications from several sources (git,
mercurial, npm or even just a tarball). Also, we want to offer two channels for
our official apps: one with a stable and well tested release, and one with more
frequent updates for our more adventurous users.</p>
<p>More informations <a href="../../apps/">here</a>.</p>
<h3 id="data-system-data">Data System <code>/data</code><a class="headerlink" href="#data-system-data" title="Permanent link">&para;</a></h3>
<p>CouchDB is used for persistence of JSON documents. The data service is a layer
on top of it for routing the requests to the corresponding CouchDB database and
checking the permissions.</p>
<p>In particular, a serverless application can declare some contexts and access
data in those contexts even if it&rsquo;s not the owner of the cozy instance that
access it. For example, the owner of a cozy can create a photo album with a
selection of photos. This album can then be associated to a context to be shared
with friends of the owner. These friends can access the album and see the
photos, but not anonymous people.</p>
<p>More informations <a href="../../data-system/">here</a>.</p>
<h3 id="virtual-file-system-files">Virtual File System <code>/files</code><a class="headerlink" href="#virtual-file-system-files" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s possible to store files on the cozy, including binary ones like photos and
movies, thanks to the virtual file system. It&rsquo;s a facade, with several
implementations, depending on where the files are effectively stored:</p>
<ul>
<li>In a directory of a local file system (easier for self-hosted users)</li>
<li>Swift from Open Stack (convenient for massive hosting)</li>
<li>And more storage providers, like <a href="https://minio.io/">minio</a>, later.</li>
</ul>
<p>The range of possible operations with this endpoint goes from simple ones, like
uploading a file, to more complex ones, like renaming a folder. It also ensure
that an instance is not exceeding its quota, and keeps a trash to recover files
recently deleted.</p>
<p>More informations <a href="../../files/">here</a>.</p>
<h3 id="sharing-sharings">Sharing <code>/sharings</code><a class="headerlink" href="#sharing-sharings" title="Permanent link">&para;</a></h3>
<p>Users will want to share things like calendars. This service is there for
sharing JSON documents between cozy instances, with respect to the access
control.</p>
<h3 id="jobs-jobs">Jobs <code>/jobs</code><a class="headerlink" href="#jobs-jobs" title="Permanent link">&para;</a></h3>
<p>The cozy stack has queues where job descriptions can be put. For example, a job
can be to fetch the latest bills from a specific provider. These queues can be
consumed by external workers to complete the associated jobs.</p>
<p>We can imagine having a media worker that extract thumbnails from photos and
videos. It will fetch jobs from a media queue and each job description will
contain the path to the photo or video from which the thumbnail will be
extracted.</p>
<p>There is also a scheduler that acts like a crontab. It can add jobs at recurrent
time. For example, it can add a job for fetching github commits every hour.</p>
<p>Later, we can dream about having more ways to create jobs (webhooks, on document
creation) and make them communicate. With a web interface on that, it can become
a simplified <a href="https://ifttt.com/"><em>Ifttt</em></a>.</p>
<h3 id="sync-sync">Sync <code>/sync</code><a class="headerlink" href="#sync-sync" title="Permanent link">&para;</a></h3>
<p>This endpoint will be for synchronizing your contacts and calendars by using
standard methods like caldav and carddav. Later, we hope to support also Webdav
and RemoteStorage.</p>
<h3 id="settings-settings">Settings <code>/settings</code><a class="headerlink" href="#settings-settings" title="Permanent link">&para;</a></h3>
<p>Each cozy instance has some settings, like its domain name, its language, the
name of its owner, the background for the home, etc.</p>
<h3 id="notifications-notifications">Notifications <code>/notifications</code><a class="headerlink" href="#notifications-notifications" title="Permanent link">&para;</a></h3>
<p>The applications can put some notifications for the user. That goes from a
reminder for a meeting in 10 minutes to a suggestion to update your app.</p>
<h3 id="real-time-realtime">Real-time <code>/realtime</code><a class="headerlink" href="#real-time-realtime" title="Permanent link">&para;</a></h3>
<p>This endpoint can be used to subscribe for real-time events. An application that
shows items of a specific doctype can listen for this doctype to be notified of
all the changes for this doctype. For example, the calendar app can listen for
all the events and if a synchronization with the mobile adds a new event, the
app will be notified and can show this new event.</p>
<h3 id="error-catcher-errors">Error catcher <code>/errors</code><a class="headerlink" href="#error-catcher-errors" title="Permanent link">&para;</a></h3>
<p>Client-side applications can have some JS errors. By sending the error, with its
backtrace, to this endpoint, it will be kept in a logfile to help the developers
debug the application later. We should look at the
<a href="https://airbrake.io/docs/api/">airbrake API</a> and probably be compatible with it
to avoid redeveloping JS code to send the errors.</p>
<h3 id="proxy-proxy">Proxy <code>/proxy</code><a class="headerlink" href="#proxy-proxy" title="Permanent link">&para;</a></h3>
<p>It can be useful for client-side apps to get data from public APIs. But,
sometimes, these APIs don&rsquo;t have CORS enabled. A proxy endpoint can be a simple
but effective solution for these cases.</p>
<h3 id="status-status">Status <code>/status</code><a class="headerlink" href="#status-status" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s here just to say that the API is up and that it can access the CouchDB
databases, for debugging and monitoring purposes.</p>
<h2 id="workers">Workers<a class="headerlink" href="#workers" title="Permanent link">&para;</a></h2>
<p>The workers take jobs from the queues and process them.</p>
<h3 id="fetch-emails-jobsmailbox">Fetch emails <code>/jobs/mailbox</code><a class="headerlink" href="#fetch-emails-jobsmailbox" title="Permanent link">&para;</a></h3>
<p>It fetches a mailbox to synchronize it and see if there are some new emails.</p>
<p>Payload: the mailbox</p>
<h3 id="send-email-jobssendmail">Send email <code>/jobs/sendmail</code><a class="headerlink" href="#send-email-jobssendmail" title="Permanent link">&para;</a></h3>
<p>It connects to the SMTP server to send an email.</p>
<p>Payload: mail account, recipient, body, attachments</p>
<h3 id="extract-metadata-jobsmetadata">Extract metadata <code>/jobs/metadata</code><a class="headerlink" href="#extract-metadata-jobsmetadata" title="Permanent link">&para;</a></h3>
<p>When a file is added or updated, this worker will extract its metadata (EXIF for
an image, id3 for a music, etc.)</p>
<p>Payload: the filepath</p>
<h3 id="konnectors-jobskonnector">Konnectors <code>/jobs/konnector</code><a class="headerlink" href="#konnectors-jobskonnector" title="Permanent link">&para;</a></h3>
<p>It synchronizes an account on a remote service (fetch bills for example).</p>
<p>Payload: the kind of konnector, the credentials of the account and some optional
parameters (like the folder where to put the files)</p>
<h3 id="registry-jobsregistry">Registry <code>/jobs/registry</code><a class="headerlink" href="#registry-jobsregistry" title="Permanent link">&para;</a></h3>
<p>It updates the list of available applications.</p>
<p>Payload: none</p>
<h3 id="indexer-jobsindexer">Indexer <code>/jobs/indexer</code><a class="headerlink" href="#indexer-jobsindexer" title="Permanent link">&para;</a></h3>
<p>When a JSON document is added, updated or deleted, this worker will update the
index for full text search. <a href="http://www.blevesearch.com/">Bleve</a> looks like a
good candidate for the indexing and full text search technology.</p>
<p>Payload: the doctype and the document to index</p>
<h2 id="serverless-apps">Serverless apps<a class="headerlink" href="#serverless-apps" title="Permanent link">&para;</a></h2>
<h3 id="home-appshome">Home <code>/apps/home</code><a class="headerlink" href="#home-appshome" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s where you land on your cozy and launch your apps. Having widgets to display
informations would be nice too!</p>
<h3 id="store-was-marketplace-appsstore">Store (was marketplace) <code>/apps/store</code><a class="headerlink" href="#store-was-marketplace-appsstore" title="Permanent link">&para;</a></h3>
<p>You can install new apps here.</p>
<h3 id="settings-was-my-apps-appssettings">Settings (was My apps) <code>/apps/settings</code><a class="headerlink" href="#settings-was-my-apps-appssettings" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s a list of your installed apps and devices, and you can configure some
settings like your email address.</p>
<h3 id="collect-was-konnectors-appscollect">Collect (was konnectors) <code>/apps/collect</code><a class="headerlink" href="#collect-was-konnectors-appscollect" title="Permanent link">&para;</a></h3>
<p>You can configure new accounts, to fetch data from them, and see the already
configured accounts.</p>
<h3 id="devtools-appsdevtools">Devtools <code>/apps/devtools</code><a class="headerlink" href="#devtools-appsdevtools" title="Permanent link">&para;</a></h3>
<p>Some tools for the developpers of applications only: an API console,
documentation, logs of the permission checks, etc.</p>
<h3 id="contacts-appscontacts">Contacts <code>/apps/contacts</code><a class="headerlink" href="#contacts-appscontacts" title="Permanent link">&para;</a></h3>
<p>Manage your contact books.</p>
<h3 id="calendar-appscalendar">Calendar <code>/apps/calendar</code><a class="headerlink" href="#calendar-appscalendar" title="Permanent link">&para;</a></h3>
<p>Manage your events and alarms.</p>
<h3 id="drive-appsdrive">Drive <code>/apps/drive</code><a class="headerlink" href="#drive-appsdrive" title="Permanent link">&para;</a></h3>
<p>A web interface to browse your files.</p>
<h3 id="photos-appsphotos">Photos <code>/apps/photos</code><a class="headerlink" href="#photos-appsphotos" title="Permanent link">&para;</a></h3>
<p>Organize your photos and share them with friends.</p>
<h3 id="todo-list-appstodo">Todo list <code>/apps/todo</code><a class="headerlink" href="#todo-list-appstodo" title="Permanent link">&para;</a></h3>
<p>A task manager to never forgot what you should do.</p>
<h3 id="onboarding-appsonboarding">Onboarding <code>/apps/onboarding</code><a class="headerlink" href="#onboarding-appsonboarding" title="Permanent link">&para;</a></h3>
<p>Start your cozy and setup your accounts.</p>
<h2 id="clients">Clients<a class="headerlink" href="#clients" title="Permanent link">&para;</a></h2>
<h3 id="mobile">Mobile<a class="headerlink" href="#mobile" title="Permanent link">&para;</a></h3>
<p>Cozy-mobile is an application for android and iOS for synchronizing files,
contacts and calendars between the phone and the cozy instance.</p>
<h3 id="desktop">Desktop<a class="headerlink" href="#desktop" title="Permanent link">&para;</a></h3>
<p>Cozy-desktop is a client for Linux, OSX and windows that allows to sync the
files in a cozy instance with a laptop or desktop.</p>
<h2 id="guidelines">Guidelines<a class="headerlink" href="#guidelines" title="Permanent link">&para;</a></h2>
<h3 id="the-go-programming-language">The Go Programming Language<a class="headerlink" href="#the-go-programming-language" title="Permanent link">&para;</a></h3>
<p>Go (often referred as golang) is an open source programming language created at
Google in 2007. It has nice properties for our usage:</p>
<ul>
<li>Simplicity (the language can be learned in weeks, not years).</li>
<li>A focus on productivity.</li>
<li>Good performance.</li>
<li>A good support of concurrency with channels and goroutines.</li>
</ul>
<p>Moreover, Go is
<a href="https://github.com/golang/go/wiki/GoUsers">used by a lot of companies</a>, is in
<a href="http://spectrum.ieee.org/computing/software/the-2016-top-programming-languages">the Top 10 of the most used languages</a>
and has some known open source projects: docker, kubernetes, grafana, syncthing,
influxdb, caddy, etc. And it works on
<a href="https://github.com/golang/go/wiki/GoArm">the ARM platforms</a>.</p>
<p>Go has some tools to help the developers to format its code (<code>go fmt</code>), retrieve
and install external packages (<code>go get</code>), display documentation (<code>godoc</code>), check
for potential errors with static analysis (<code>go vet</code>), etc. Most of them can be
used via <a href="https://github.com/alecthomas/gometalinter">gometalinter</a>, which is
nice for continuous integration.</p>
<p>So, we think that writing the Cozy Stack in Go is the right choice.</p>
<h3 id="repository-organisation">Repository organisation<a class="headerlink" href="#repository-organisation" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>├── assets          The assets for the front-end
│   ├── images      The images
│   ├── scripts     The javascript files
│   ├── styles      The CSS files
│   └── templates   The HTML templates
├── cmd             One .go file for each command of the cozy executable
├── docs            Documentation, including this file
├── pkg             One sub-directory for each golang package
├── scripts         Some shell scripts for developers and testing
└── web             One sub-directory for each of the services listed above
</pre></div>


<h3 id="rest-api">Rest API<a class="headerlink" href="#rest-api" title="Permanent link">&para;</a></h3>
<p>We follow the best practices about Rest API (using the right status codes, HTTP
verbs, organise code by resources, use content-negociation, etc.). When known
standards make sense (caldav &amp; carddav for example), use them. Else,
<a href="http://jsonapi.org">JSON API</a> is a good default.</p>
<p>The golang web framework used for the cozy stack is
<a href="https://github.com/labstack/echo/">Echo</a>.</p>
<h4 id="http-status-codes">HTTP status codes<a class="headerlink" href="#http-status-codes" title="Permanent link">&para;</a></h4>
<p>There are some HTTP status codes that are generally used in the API:</p>
<ul>
<li>200 OK, when everything is OK</li>
<li>201 Created, when a resource was created</li>
<li>204 No Content, when a resource was deleted</li>
<li>400 Bad Request, when the request has some unknown parameters and the
    request body is not in the expected format</li>
<li>401 Unauthorized, when the user is not authenticated</li>
<li>403 Forbidden, when the permissions forbid this action</li>
<li>404 Not Found, when the resouce can&rsquo;t be found</li>
<li>500 Internal Server Error, when a bug occurs</li>
<li>503 Service Unavailable, when the stack, CouchDB, Redis or Swift is
    unavailable.</li>
</ul>
<h3 id="doctypes">DocTypes<a class="headerlink" href="#doctypes" title="Permanent link">&para;</a></h3>
<p>Each JSON document saved in CouchDB has a field <code>docType</code> that identify the kind
of thing it is. For example, a contact will have the docType <code>io.cozy.contacts</code>,
and in the cozy-doctypes repository, there will be a contacts JSON file inside
it that describes this doctype:</p>
<ul>
<li>What are the mandatory and optional fields?</li>
<li>What is the type (string, integer, date) of the fields?</li>
<li>Is there a validation rule for a field?</li>
<li>How the fields can be indexed for full text search?</li>
<li>What is the role of each field (documentation)?</li>
</ul>
<p>This description can be used by any cozy client library (JS, Golang, etc.) to
generate some models to simplify the use of documents of this doctype.</p>
<p>When a docType has a lot of logic (calendar events for example), a JS class
should be shared between the several client-side apps that use this docType, in
order to avoid recoding this logic in each application.</p>
<h3 id="import-and-export">Import and export<a class="headerlink" href="#import-and-export" title="Permanent link">&para;</a></h3>
<blockquote>
<p>You will stay because you can leave.</p>
</blockquote>
<p>An important promise of Cozy is to give back to the users the control of their
data. And this promise is not complete with a way to export the data to use it
somewhere else.</p>
<p>The Cozy Stack will offer an export button that gives a tarball to the user with
the full data. She can then import it on another instance for example. It should
also be possible to use the data outside of Cozy. So, the format for the tarball
should be as simple as possible and be documented. Of course, when it&rsquo;s
possible, we will use open formats.</p>
<h3 id="how-to-contribute">How to contribute?<a class="headerlink" href="#how-to-contribute" title="Permanent link">&para;</a></h3>
<p>Cozy&rsquo;s DNA is fundamentally Open Source and we want our community to thrive.
Having contributions (code, design, translations) is important for us and we
will try to create the favorable conditions to support it.</p>
<h4 id="adding-a-new-konnector">Adding a new konnector<a class="headerlink" href="#adding-a-new-konnector" title="Permanent link">&para;</a></h4>
<p>Adding a konnector is easy for someone who knows JavaScript. The repository has
already a lot of pull requests by external contributors. The wiki has
documentation to explain the first steps of creating a new konnector. 3 active
contributors have been promoted to the maintainers team and can merge the pull
requests. We have done workshops to help new developers code their first
konnector and we will keep doing it.</p>
<h4 id="creating-a-new-application">Creating a new application<a class="headerlink" href="#creating-a-new-application" title="Permanent link">&para;</a></h4>
<p>One of the goals of the new architecture is to make it easier for developers to
write new apps. It means having a good documentation, but also some devtools to
help:</p>
<ul>
<li>The <code>cozy</code> executable will have a command to setup a new project.</li>
<li>The devtools on the cozy interface will give documentation about the
    doctypes, help explore the Rest API, and check if the permissions are OK.</li>
<li><code>cozy-ui</code> will make it easy to reuse some widgets and offer an application
    with a style coherent to the cozy identity.</li>
<li>Some docTypes with heavy logic will be available as JS classes to be reused
    in the apps.</li>
</ul>
<h4 id="reporting-a-bug-or-suggesting-a-new-feature">Reporting a bug or suggesting a new feature<a class="headerlink" href="#reporting-a-bug-or-suggesting-a-new-feature" title="Permanent link">&para;</a></h4>
<p>We are listening to our users. The forum is here to discuss on many subjects,
including how the applications are used. The issues on github are a good place
for bug tracking.</p>
<h4 id="translating-to-a-new-language">Translating to a new language<a class="headerlink" href="#translating-to-a-new-language" title="Permanent link">&para;</a></h4>
<p>We will keep having internationalization for our applications and the
translations are maintained on transifex by the community. Translating to a new
language, or reviewing an existing one, is really appreciated.</p>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<blockquote>
<p>Does the current konnectors in nodejs will be lost?</p>
</blockquote>
<p>No, they won&rsquo;t. The business logic to scrap data from the many sources will be
kept and they will be adapted to fit in this new architecture. It is explained
how we will do that <a href="../../konnectors/">here</a>.</p>
<blockquote>
<p>So, it&rsquo;s not possible to have a custom application with a server part, like
the lounge IRC client?</p>
</blockquote>
<p>We want to support this use case, just not on the short term. It&rsquo;s not clear how
we can do that (while not weakening the security). One idea is to run the
applications in a different server, or maybe in docker.</p>
<blockquote>
<p>How to install and update cozy?</p>
</blockquote>
<p>The Cozy Stack will have no auto-update mechanism. For installing and updating
it, you can use the classical ways:</p>
<ul>
<li>Using a package manager, like apt for debian &amp; ubuntu.</li>
<li>Using an official image for Raspberry Pi (and other embedded platforms).</li>
<li>Using the image and services of an hosting company.</li>
<li>Or compiling and installing it manually if you are really brave ;-)</li>
</ul>
<blockquote>
<p>How to add a cozy instance to a farm?</p>
</blockquote>
<ol>
<li>Choose a (sub-)domain and configure the DNS for this (sub-)domain.</li>
<li>Configure the reverse-proxy to accept this (sub-)domain.</li>
<li>Use the <code>cozy</code> executable to configure the cozy stack.</li>
</ol>
<blockquote>
<p>How to migrate from the nodejs cozy to this new architecture for cozy?</p>
</blockquote>
<ol>
<li>Export the data from the nodejs cozy (we need to add a button in the web
   interface for that in the coming months).</li>
<li>Install the new cozy.</li>
<li>Import the data.</li>
</ol>
<p>Please note that we don&rsquo;t support a continuous replication method that will
enable to use both the nodejs and the new architecture at the same time. It
looks too complicated for a temporary thing.</p>
<blockquote>
<p>How to backup the data?</p>
</blockquote>
<p>There are 2 sensitive places with data:</p>
<ul>
<li>In CouchDB.</li>
<li>on the place used for the Virtual File System (a directory on the local
    filesystem, or in Swift).</li>
</ul>
<p>You can use the tools of your choice to backup these 2 locations. The good old
rsync works fine (CouchDB files are append-only, except when compaction happens,
so it&rsquo;s friendly to rsync).</p>
<p>It&rsquo;s highly recommended to have an automated backup, but sometimes it can be
useful to have a way to backup manually the data. The &ldquo;export data&rdquo; button in
the web interface give a tarball that can be used to transfer your data from one
instance to another, and so, it can be used as a backup.</p>
<blockquote>
<p>Aren&rsquo;t microservices better for scaling?</p>
</blockquote>
<p>Yes, it&rsquo;s often easier to scale by separating concerns, and microservices is a
way to achieve that. But, it has some serious downsides:</p>
<ul>
<li>It takes more memory and it&rsquo;s probably a no-go for Raspberry Pi.</li>
<li>It&rsquo;s more complicated for a developper to install the whole stack before
    coding its application.</li>
<li>It&rsquo;s harder to deploy in production.</li>
</ul>
<p>For the scalability, we can also deploy some specialized instances of the Cozy
Stack. For example, we can have some Cozy Stack processes dedicated for
real-time. Even, if they have all the code, we can route only the relevant
trafic from the load-balancer.</p>
<blockquote>
<p>What are the frameworks and tools used for the front-end apps?</p>
</blockquote>
<p>If you want to develop your own app, you can use the framework and the tools you
like, nothing is mandatory. For the official apps, we will want to move to:</p>
<ul>
<li>es2017 (but converting the existing coffeescript code will take time)</li>
<li>npm scripts and webpack</li>
<li>preact &amp; JSX.</li>
</ul>
<p>More about this
<a href="https://forum.cozy.io/t/a-propos-de-la-pile-technique-front-about-our-frontend-stack/3849/1">here</a></p>
<blockquote>
<p>When will this new architecture be available?</p>
</blockquote>
<p>The roadmap for Cozy v3 has been explained on our blog:
https://blog.cozycloud.cc/post/2016/11/21/On-the-road-to-Cozy-version-3</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="/en/privacy">privacy</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.2.3",url:{base:"../../.."}})</script>
      
        <script src="../../../extra.js"></script>
      
    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="https://matomo.cozycloud.cc/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '25']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->

  </body>
</html>