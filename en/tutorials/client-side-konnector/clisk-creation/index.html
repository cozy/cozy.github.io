



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/tutorials/client-side-konnector/clisk-creation/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-\.]">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-4.4.0">
    
    
      
        <title>CliSK Creation - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"name": "cozy-app-publish", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-app-publish"}, {"name": "cozy-apps-registry", "repo": "https://github.com/cozy/cozy-apps-registry.git", "subdir": "."}, {"name": "cozy-client", "repo": "https://github.com/cozy/cozy-client.git", "subdir": "docs"}, {"name": "cozy-ui", "repo": "https://github.com/cozy/cozy-ui.git", "subdir": "docs"}, {"name": "cozy-doctypes", "repo": "https://github.com/cozy/cozy-doctypes.git", "subdir": "."}, {"name": "cozy-konnector-libs", "repo": "https://github.com/konnectors/libs.git", "subdir": "packages/cozy-konnector-libs/docs"}, {"name": "cozy-scripts", "repo": "https://github.com/cozy/create-cozy-app.git", "subdir": "packages/cozy-scripts/docs"}, {"name": "cozy-stack", "repo": "https://github.com/cozy/cozy-stack.git", "subdir": "docs"}, {"name": "cozy-desktop", "repo": "https://github.com/cozy-labs/cozy-desktop.git", "subdir": "doc"}, {"name": "babel-preset-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/babel-preset-cozy-app"}, {"name": "commitlint-config-cozy", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/commitlint-config-cozy"}, {"name": "cozy-device-helper", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-device-helper"}, {"name": "eslint-config-cozy-app", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/eslint-config-cozy-app"}, {"name": "cozy-notifications", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-notifications"}, {"name": "cozy-flags", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-flags"}, {"name": "cozy-realtime", "repo": "https://github.com/cozy/cozy-libs.git", "subdir": "packages/cozy-realtime"}, {"name": "cozy-banks", "repo": "https://github.com/cozy/cozy-banks.git", "subdir": "."}, {"name": "cozy-home", "repo": "https://github.com/cozy/cozy-home.git", "subdir": "."}, {"name": "ach", "repo": "https://github.com/cozy/ach.git", "subdir": "."}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#clisk-creation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                CliSK Creation
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../app/" title="Tutorials" class="md-tabs__link md-tabs__link--active">
          Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../howTos/dev/runCozyDocker/" title="How-to" class="md-tabs__link">
          How-to
        </a>
      
    </li>
  

  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../cozy-client/getting-started/" title="Libraries" class="md-tabs__link">
          Libraries
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../projects/" title="Projects" class="md-tabs__link">
          Projects
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Develop a Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Develop a Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnector/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnector/getting-started/" title="Basic structure" class="md-nav__link">
      Basic structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnector/scrape-data/" title="Scrape data" class="md-nav__link">
      Scrape data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnector/save-data/" title="Save data" class="md-nav__link">
      Save data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konnector/packaging/" title="Package your connector" class="md-nav__link">
      Package your connector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3" checked>
    
    <label class="md-nav__link" for="nav-2-3">
      Develop a Client-Side Connector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Develop a Client-Side Connector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        CliSK Creation
      </label>
    
    <a href="./" title="CliSK Creation" class="md-nav__link md-nav__link--active">
      CliSK Creation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-clisk-for-bookstoscrapecom" title="Creating a CliSK for "books.toscrape.com"" class="md-nav__link">
    Creating a CliSK for "books.toscrape.com"
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-your-own-clisk" title="Creating your own CliSK" class="md-nav__link">
    Creating your own CliSK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-start" title="Let's start" class="md-nav__link">
    Let's start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konnectors-manifest" title="Konnector's manifest" class="md-nav__link">
    Konnector's manifest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning" title="Cleaning" class="md-nav__link">
    Cleaning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scripting" title="Scripting" class="md-nav__link">
    Scripting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ensurenotauthenticated" title="ensureNotAuthenticated" class="md-nav__link">
    ensureNotAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ensureauthenticated" title="ensureAuthenticated" class="md-nav__link">
    ensureAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkauthenticated" title="checkAuthenticated" class="md-nav__link">
    checkAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onworkerready-onworkerevent" title="onWorkerReady &amp; onWorkerEvent" class="md-nav__link">
    onWorkerReady &amp; onWorkerEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getuserdatafromwebsite" title="getUserDataFromWebsite" class="md-nav__link">
    getUserDataFromWebsite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch" title="fetch" class="md-nav__link">
    fetch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../clisk-lib-doc/" title="Library Documentation" class="md-nav__link">
      Library Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../best-practice/" title="Best Practice" class="md-nav__link">
      Best Practice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contributions/" title="Contributions" class="md-nav__link">
      Contributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../additional-ressources/" title="Additional Ressources" class="md-nav__link">
      Additional Ressources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Manipulate data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Manipulate data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/pouchdb/" title="PouchDB" class="md-nav__link">
      PouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/doctypes/" title="DocTypes" class="md-nav__link">
      DocTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/qualification/" title="Qualification" class="md-nav__link">
      Qualification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/advanced/" title="Advanced" class="md-nav__link">
      Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../translate/" title="Translate Apps" class="md-nav__link">
      Translate Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Self-Hosting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Self-Hosting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/docker/" title="Running inside Docker" class="md-nav__link">
      Running inside Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3" type="checkbox" id="nav-2-6-3">
    
    <label class="md-nav__link" for="nav-2-6-3">
      Traditional installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-6-3">
        Traditional installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-1" type="checkbox" id="nav-2-6-3-1">
    
    <label class="md-nav__link" for="nav-2-6-3-1">
      Requirements
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-1">
        Requirements
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/requirements/" title="What you need" class="md-nav__link">
      What you need
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/requirements/couchdb/" title="Installing CouchDB" class="md-nav__link">
      Installing CouchDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/requirements/nodejs/" title="Installing NodeJS" class="md-nav__link">
      Installing NodeJS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-2" type="checkbox" id="nav-2-6-3-2">
    
    <label class="md-nav__link" for="nav-2-6-3-2">
      Installing cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-2">
        Installing cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/install/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/install/package/" title="From precompiled package" class="md-nav__link">
      From precompiled package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/install/sources/" title="From sources" class="md-nav__link">
      From sources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-3" type="checkbox" id="nav-2-6-3-3">
    
    <label class="md-nav__link" for="nav-2-6-3-3">
      Finalize installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-3">
        Finalize installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/finalize/nginx/" title="Nginx and certificates" class="md-nav__link">
      Nginx and certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/finalize/apache/" title="Using Apache instead of Nginx" class="md-nav__link">
      Using Apache instead of Nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/finalize/create_instance/" title="Create first instance" class="md-nav__link">
      Create first instance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6-3-4" type="checkbox" id="nav-2-6-3-4">
    
    <label class="md-nav__link" for="nav-2-6-3-4">
      Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-6-3-4">
        Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/administration/" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/administration/more_instances/" title="Create more instances" class="md-nav__link">
      Create more instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/administration/upgrade/" title="Upgrade cozy-stack" class="md-nav__link">
      Upgrade cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/administration/mail/" title="Configure mail sending" class="md-nav__link">
      Configure mail sending
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../selfhosting/administration/office/" title="Online edition of office documents" class="md-nav__link">
      Online edition of office documents
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/services/" title="Develop a service from your application" class="md-nav__link">
      Develop a service from your application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/run-connectors-on-local-cozy-stack/" title="Run Connectors With a Local cozy-stack" class="md-nav__link">
      Run Connectors With a Local cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Develop an application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Develop an application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-1" type="checkbox" id="nav-4-1-1">
    
    <label class="md-nav__link" for="nav-4-1-1">
      Access data (client)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-1">
        Access data (client)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/relationships/" title="Using relationships" class="md-nav__link">
      Using relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/timeseries/" title="Using time series" class="md-nav__link">
      Using time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/node/" title="Node" class="md-nav__link">
      Node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-pouch-link.md" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-ui/" title="Build the user interface (ui)" class="md-nav__link">
      Build the user interface (ui)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1-3" type="checkbox" id="nav-4-1-3">
    
    <label class="md-nav__link" for="nav-4-1-3">
      Define data (doctypes)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-1-3">
        Define data (doctypes)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.ai.chat.conversations/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.apps.suggestions/" title="App suggestions" class="md-nav__link">
      App suggestions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.calendar/" title="Calendar" class="md-nav__link">
      Calendar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.coachco2/" title="CoachCO2" class="md-nav__link">
      CoachCO2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.docrules/" title="DocRules" class="md-nav__link">
      DocRules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.home.settings/" title="Home settings" class="md-nav__link">
      Home settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notes/" title="Notes" class="md-nav__link">
      Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.photos/" title="Photos" class="md-nav__link">
      Photos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.tags/" title="Tags" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.timeseries/" title="Time series" class="md-nav__link">
      Time series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.todos/" title="Todos" class="md-nav__link">
      Todos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.nextcloud.files/" title="Remote NextCloud files" class="md-nav__link">
      Remote NextCloud files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.ciphers/" title="Bitwarden ciphers" class="md-nav__link">
      Bitwarden ciphers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.folders/" title="Bitwarden folders" class="md-nav__link">
      Bitwarden folders
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.organizations/" title="Bitwarden organizations" class="md-nav__link">
      Bitwarden organizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.bitwarden.contacts/" title="Bitwarden contacts" class="md-nav__link">
      Bitwarden contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-doctypes/docs/cc.cozycloud.announcements/" title="Announcements" class="md-nav__link">
      Announcements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-realtime/" title="Realtime data (realtime)" class="md-nav__link">
      Realtime data (realtime)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-device-helper/" title="Native devices (device-helper)" class="md-nav__link">
      Native devices (device-helper)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Develop a konnector
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Develop a konnector
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-app-publish/" title="Publish on the store (app-publish)" class="md-nav__link">
      Publish on the store (app-publish)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-notifications/" title="Send notifications (cozy-notifications)" class="md-nav__link">
      Send notifications (cozy-notifications)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Dev tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Dev tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../babel-preset-cozy-app/" title="Babel preset" class="md-nav__link">
      Babel preset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../commitlint-config-cozy/" title="Commitlint" class="md-nav__link">
      Commitlint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../eslint-config-cozy-app/" title="ESLint" class="md-nav__link">
      ESLint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ach/" title="ACH" class="md-nav__link">
      ACH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1" type="checkbox" id="nav-4-6-1">
    
    <label class="md-nav__link" for="nav-4-6-1">
      Stack server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-6-1">
        Stack server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-2" type="checkbox" id="nav-4-6-1-2">
    
    <label class="md-nav__link" for="nav-4-6-1-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/admin/" title="Using the admin API" class="md-nav__link">
      Using the admin API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/important-changes/" title="Important changes" class="md-nav__link">
      Important changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-3" type="checkbox" id="nav-4-6-1-3">
    
    <label class="md-nav__link" for="nav-4-6-1-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/http-api/" title="Using the HTTP API" class="md-nav__link">
      Using the HTTP API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/konnectors-dev/" title="Running a konnector locally" class="md-nav__link">
      Running a konnector locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-4" type="checkbox" id="nav-4-6-1-4">
    
    <label class="md-nav__link" for="nav-4-6-1-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/flagship/" title="Flagship app" class="md-nav__link">
      Flagship app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/move-design/" title="Move design" class="md-nav__link">
      Move design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/realtime-internals/" title="Realtime internals" class="md-nav__link">
      Realtime internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6-1-5" type="checkbox" id="nav-4-6-1-5">
    
    <label class="md-nav__link" for="nav-4-6-1-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-4-6-1-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/ai/" title="/ai - AI" class="md-nav__link">
      /ai - AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/delegated-auth/" title="/oidc - Delegated authentication" class="md-nav__link">
       /oidc - Delegated authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/bitwarden/" title="/bitwarden - Bitwarden" class="md-nav__link">
      /bitwarden - Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/connection-check/" title="/connection_check - Connection check" class="md-nav__link">
      /connection_check - Connection check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/contacts/" title="/contacts - Contacts" class="md-nav__link">
      /contacts - Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/not-synchronized-vfs/" title="/files - Not synchronized directories" class="md-nav__link">
       /files - Not synchronized directories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/konnectors/" title="/konnectors - Konnectors" class="md-nav__link">
      /konnectors - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/notes/" title="/notes - Notes for collaborative edition" class="md-nav__link">
      /notes - Notes for collaborative edition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/office/" title="/office - Collaborative edition of Office documents" class="md-nav__link">
      /office - Collaborative edition of Office documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/nextcloud/" title="/remote/nextcloud - NextCloud" class="md-nav__link">
       /remote/nextcloud - NextCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/rabbitmq/" title="/rabbitmq - RabbitMQ integration" class="md-nav__link">
      /rabbitmq - RabbitMQ integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/shared-drives/" title="/sharings/drives - Shared drives" class="md-nav__link">
       /sharings/drives - Shared drives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/shortcuts/" title="/shortcuts - Shortcuts" class="md-nav__link">
      /shortcuts - Shortcuts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-stack/wellknown/" title="/.well-known - Well-known" class="md-nav__link">
      /.well-known - Well-known
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-apps-registry/" title="Registry server" class="md-nav__link">
      Registry server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../projects/" title="Documentations" class="md-nav__link">
      Documentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Cozy Desktop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Cozy Desktop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/file_systems/" title="Filesystems" class="md-nav__link">
      Filesystems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/ignore_files/" title="Ignore files" class="md-nav__link">
      Ignore files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/inotify/" title="inotify" class="md-nav__link">
      inotify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/limitations/" title="Limitations" class="md-nav__link">
      Limitations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/macos/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/usage/windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-3" type="checkbox" id="nav-5-2-3">
    
    <label class="md-nav__link" for="nav-5-2-3">
      Developer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-3">
        Developer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/api_doc/" title="API Documentation" class="md-nav__link">
      API Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/coffeescript.md" title="Cofeescript" class="md-nav__link">
      Cofeescript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/log_analysis/" title="Log analysis" class="md-nav__link">
      Log analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/developer/setup/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cozy-desktop/feedback/" title="Feddback" class="md-nav__link">
      Feddback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-a-clisk-for-bookstoscrapecom" title="Creating a CliSK for "books.toscrape.com"" class="md-nav__link">
    Creating a CliSK for "books.toscrape.com"
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-your-own-clisk" title="Creating your own CliSK" class="md-nav__link">
    Creating your own CliSK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-start" title="Let's start" class="md-nav__link">
    Let's start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#konnectors-manifest" title="Konnector's manifest" class="md-nav__link">
    Konnector's manifest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning" title="Cleaning" class="md-nav__link">
    Cleaning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scripting" title="Scripting" class="md-nav__link">
    Scripting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ensurenotauthenticated" title="ensureNotAuthenticated" class="md-nav__link">
    ensureNotAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ensureauthenticated" title="ensureAuthenticated" class="md-nav__link">
    ensureAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkauthenticated" title="checkAuthenticated" class="md-nav__link">
    checkAuthenticated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#onworkerready-onworkerevent" title="onWorkerReady &amp; onWorkerEvent" class="md-nav__link">
    onWorkerReady &amp; onWorkerEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getuserdatafromwebsite" title="getUserDataFromWebsite" class="md-nav__link">
    getUserDataFromWebsite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch" title="fetch" class="md-nav__link">
    fetch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/tutorials/client-side-konnector/clisk-creation.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="clisk-creation">CliSK Creation<a class="headerlink" href="#clisk-creation" title="Permanent link">&para;</a></h1>
<p>In this section you will learn how to develop your own konnector from the <a href="https://github.com/konnectors/template_ccc">CliSK template</a>.</p>
<h3 id="creating-a-clisk-for-bookstoscrapecom">Creating a CliSK for &ldquo;books.toscrape.com&rdquo;<a class="headerlink" href="#creating-a-clisk-for-bookstoscrapecom" title="Permanent link">&para;</a></h3>
<h4 id="creating-your-own-clisk">Creating your own CliSK<a class="headerlink" href="#creating-your-own-clisk" title="Permanent link">&para;</a></h4>
<p>If you want to develop a konnector from scratch, you will need to get the <a href="https://github.com/konnectors/template_ccc">CliSK template</a> on your machine.
Copy the template&rsquo;s file to a new directory named after the service you want to scrap. Let&rsquo;s say we will scrap the better website of all time for this job : <a href="http://books.toscrape.com">Books to scrap</a> but as this website does not contains any login logic, we&rsquo;ll be using the one from <a href="https://practicetestautomation.com/practice-test-login/">practicetestautomation.com</a> to simulate a login before scraping the books.</p>
<p>Get your terminal in the directory where you have saved the <code>template_ccc</code> and copy the files to a new directory :</p>
<div class="codehilite"><pre><span></span>cp -r template_ccc bookstoscrap
</pre></div>


<p><em>Note : the <code>cozy-konnector-[slug]</code> convention for naming has been deprecated, let&rsquo;s keep it simple and just use the name of the targeted website/company</em>.</p>
<hr />
<h4 id="lets-start">Let&rsquo;s start<a class="headerlink" href="#lets-start" title="Permanent link">&para;</a></h4>
<p>We will describe step by step how to develop a CliSK and for this, we&rsquo;ve made you a <a href="https://github.com/konnectors/template_ccc/pull/78">Pull Request on our CliSK template</a> , with explanations on every commit, so you directly have a code reference instead of putting a whole <code>index.js</code> file here in the documentation. Anyway, we still will describe step by step here too to fit to everyone preferences. So let&rsquo;s jump right in !</p>
<h4 id="konnectors-manifest">Konnector&rsquo;s manifest<a class="headerlink" href="#konnectors-manifest" title="Permanent link">&para;</a></h4>
<p>First thing first, we need to adapt the <code>manifest.konnector</code> file to the targeted website.</p>
<p>You will need to edit some of the values found in this file to give information to the cozy machinery when the konnector will be installed later.</p>
<p>The mandatory are the following :</p>
<ul>
<li><code>name</code> =&gt; The displayed name on the cozy store</li>
<li><code>slug</code> =&gt; The konnector&rsquo;s identifier. Only lower case letters and numbers are admitted.</li>
<li><code>source</code> =&gt; The source of the konnector&rsquo;s file. Will always be <code>git@github.com:konnectors/[slug].git</code></li>
<li><code>vendor_link</code> =&gt; The main URL of the targeted website.</li>
<li><code>categories</code> =&gt; Categories where the konnector will be displayed in the cozy store. See <a href="https://github.com/cozy/cozy-client/blob/master/packages/cozy-client/src/assets/qualifications.json">here</a> for the list of available categories. If you can&rsquo;t find the category you seek in the list, contact Cozy and we will discuss its addition.</li>
<li><code>developer</code></li>
<li><code>name</code> =&gt; The name of the developer displayed in the cozy store.</li>
<li><code>link</code> =&gt; A link to your github profile or personal page so people knows who to thanks for this konnector.</li>
<li><code>locales</code></li>
<li><code>fr</code><ul>
<li><code>short_description</code> =&gt; A quick description of what&rsquo;s the konnector is made for.</li>
<li><code>long_descritption</code> =&gt; A longer description of what is the service of the targeted website, what can be fetched in it, and what data are saved by this konnector.</li>
</ul>
</li>
</ul>
<p>Others values must not be touched (unless discussed otherwise of course).</p>
<p>In the end, your modified manifest should look like this :</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Books To Scrape&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;konnector&quot;</span><span class="p">,</span>
  <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
  <span class="nt">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;icon.svg&quot;</span><span class="p">,</span>
  <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;bookstoscrape&quot;</span><span class="p">,</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;git@github.com:konnectors/bookstoscrape.git&quot;</span><span class="p">,</span>
  <span class="nt">&quot;editor&quot;</span><span class="p">:</span> <span class="s2">&quot;Cozy&quot;</span><span class="p">,</span>
  <span class="nt">&quot;vendor_link&quot;</span><span class="p">:</span> <span class="s2">&quot;https://books.toscrape.com/&quot;</span><span class="p">,</span>
  <span class="nt">&quot;categories&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;shopping&quot;</span><span class="p">],</span>
  <span class="nt">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;clientSide&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;langs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fr&quot;</span><span class="p">],</span>
  <span class="nt">&quot;folders&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;defaultDir&quot;</span><span class="p">:</span> <span class="s2">&quot;$administrative/$konnector/$account&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bills&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.bills&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;files&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.files&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;identities&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;io.cozy.identities&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;developer&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Frodo Baggins&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/FrodoBaggins&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;locales&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;fr&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;short_description&quot;</span><span class="p">:</span> <span class="s2">&quot;Récupère la liste de livres&quot;</span><span class="p">,</span>
      <span class="nt">&quot;long_description&quot;</span><span class="p">:</span> <span class="s2">&quot;Récupère la liste de livre sur le site exemple&quot;</span><span class="p">,</span>
      <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;bills&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Utilisé pour sauver les données des factures&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;files&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Utilisé pour sauvegarder les factures&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>You can find the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/db9fedee4af79644120ca4a598f4dc484209f9ad">example commit</a> in the <a href="https://github.com/konnectors/template_ccc/pull/78">development example pull request</a> to see the modifications from the template&rsquo;s manifest.</p>
<h4 id="cleaning">Cleaning<a class="headerlink" href="#cleaning" title="Permanent link">&para;</a></h4>
<p>Then, clean the template&rsquo;s code, but keep the main functions launch by the pilot :</p>
<ul>
<li><code>ensureAuthenticated</code></li>
<li><code>ensureNotAuthenticated</code></li>
<li><code>checkAuthenticated</code></li>
<li><code>getUserDataFromWebsite</code></li>
<li><code>fetch</code></li>
</ul>
<p>Those will be the minimum mandatory functions launch by the Twake mobile App to execute your code.</p>
<p>⚠️ Note : You won&rsquo;t need to call them explicitly anywhere in the code as the Twake mobile App call them itself. However you will <em>need</em> to override them to fit the wanted flow for the targeted website.</p>
<p>When done, your Class in <code>src/index.js</code> file should look like this :</p>
<div class="codehilite"><pre><span></span><span class="kr">class</span> <span class="nx">BookToScrapeContentScript</span> <span class="kr">extends</span> <span class="nx">ContentScript</span> <span class="p">{</span>
  <span class="nx">onWorkerReady</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">onWorkerEvent</span><span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">payload</span> <span class="p">})</span> <span class="p">{}</span>

  <span class="nx">async</span> <span class="nx">ensureAuthenticated</span><span class="p">({</span> <span class="nx">account</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;🤖 ensureAuthenticated&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">async</span> <span class="nx">ensureNotAuthenticated</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;🤖 ensureNotAuthenticated&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">async</span> <span class="nx">showLoginFormAndWaitForAuthentication</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;🤖 showLoginFormAndWaitForAuthentication&quot;</span><span class="p">);</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">setWorkerState</span><span class="p">({</span> <span class="nx">visible</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorkerUntilTrue</span><span class="p">({</span>
      <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;waitForAuthenticated&quot;</span><span class="p">,</span>
    <span class="p">});</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">setWorkerState</span><span class="p">({</span> <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">async</span> <span class="nx">checkAuthenticated</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">async</span> <span class="nx">getUserDataFromWebsite</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;🤖 getUserDataFromWebsite&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">async</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;🤖 fetch&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>You can find the example commit <a href="https://github.com/konnectors/template_ccc/pull/78/commits/de069767fd60f0fbff3dc66c245d543f4b429a74">here</a> in the pull request provided for development example.</p>
<h4 id="scripting">Scripting<a class="headerlink" href="#scripting" title="Permanent link">&para;</a></h4>
<p>You can now start with the first three functions of the list.They all interact together to prepare for the first login of the user :</p>
<h5 id="ensurenotauthenticated"><code>ensureNotAuthenticated</code><a class="headerlink" href="#ensurenotauthenticated" title="Permanent link">&para;</a></h5>
<p>Will usually try reach the connected user&rsquo;s homePage, as most of the websites will redirect you on the loginForm if you are not logged in. If you are, this function will navigate on the website by clicking or reaching out the logout URL to disconnect the actual account from the website and returning on the loginForm if needed.</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">ensureNotAuthenticated</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;🤖 ensureNotAuthenticated&#39;</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="nx">loginSuccessfullUrl</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForElementInWorker</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">usernameInputSelector</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">connectedElementSelector</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">authenticated</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;checkAuthenticated&#39;</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">authenticated</span><span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;ensureNotAuthenticated - User is already disconnected&#39;</span><span class="p">)</span>
      <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">logoutButtonSelector</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForElementInWorker</span><span class="p">(</span><span class="nx">usernameInputSelector</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;ensureNotAuthenticated - User has been disconnected&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>
</pre></div>


<p>Check the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/74124b653ae8424891cff4283a0a8042700f48d3">example commit</a> for <code>ensureNotAuthenticated</code></p>
<h5 id="ensureauthenticated"><code>ensureAuthenticated</code><a class="headerlink" href="#ensureauthenticated" title="Permanent link">&para;</a></h5>
<p>Will check if a <code>cozy account</code> is already created and if credentials are already saved fo this konnector. It will always have an object parameter containing a <code>cozy account</code> that is given automatically by the <code>clisk library</code>. It will be used to determine if the website&rsquo;s session needs to be closed before executing the first run. It is based on the presence of an existing <code>cozy account</code> <strong>or</strong> the presence of saved credentials for this konnector. If one or the other is missing, we will ensure the user can log in by presenting him the login page on the first run so we can try and intercept his credentials to save them for later runs, and maybe use them for automatic filling or automatised full login phase.</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">ensureAuthenticated</span><span class="p">({</span> <span class="nx">account</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;🤖 ensureAuthenticated&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCredentials</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">account</span> <span class="o">||</span> <span class="o">!</span><span class="nx">credentials</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">ensureNotAuthenticated</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">showLoginFormAndWaitForAuthentication</span><span class="p">()</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;ensureAuthenticated - Login successfull !&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>
</pre></div>


<p>Check the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/412c697beac9ff1b93816a9fe13b8817d5e0515e">example commit</a> for <code>ensureAuthenticated</code></p>
<h5 id="checkauthenticated"><code>checkAuthenticated</code><a class="headerlink" href="#checkauthenticated" title="Permanent link">&para;</a></h5>
<p>Will check if the targeted elements are present or not to determine if the user is connected. It will simply return <code>true</code> or <code>false</code>. Avoid returning a <code>string</code>, a <code>number</code> or else as the library will automatically process it as a Boolean in the end.</p>
<p>Authentication is done, now we have to find a <code>sourceAccountIdentifier</code> to create the linked account and its associated konnector&rsquo;s trigger.
For this we will be using the <code>workerEvents</code> to intercept the credentials if possible and will use this intercepted credentials in the <code>getUserDataFromWebsite</code>.</p>
<p>A simple <code>checkAuthenticated</code> will look like this, simply check the presence of an element showing the user he is connected :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">checkAuthenticated</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">connectedElementSelector</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>


<p>Take a look a the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/74124b653ae8424891cff4283a0a8042700f48d3#diff-bfe9874d239014961b1ae4e89875a6155667db834a410aaaa2ebe3cf89820556R60"><code>ensureNotAuthenticated</code>commit</a> to see the <code>checkAuthenticated</code> usage.</p>
<h5 id="onworkerready-onworkerevent"><code>onWorkerReady</code> &amp; <code>onWorkerEvent</code><a class="headerlink" href="#onworkerready-onworkerevent" title="Permanent link">&para;</a></h5>
<p>Those two functions works in tandem. <code>onWorkerReady</code> will be used to subscribe on DOM events on the current page so we can watch those events and emit a <code>workerEvent</code> when meeting conditions. <code>onWorkerEvent</code> is called by the <code>pilot</code> whenever an event is sent by the <code>worker</code> to the bridge. It could be used for various situations like watch for known errors, captcha detection or intercept data. In our case, we will use them for credentials interception by listening to the &ldquo;click&rdquo; event on the submit button of the loginForm. This way, every time this page is loaded, listener will be set and every time the submit button is clicked, <code>onWorkerReady</code> will emit a <code>workerEvent</code> containing the type of event and the needed payload. <code>onWorkerEvent</code> will then send the received payload to the bridge to be saved in the store.</p>
<p>Don&rsquo;t forget to add the listener on <code>workerEvents</code> at the beginning of the konnector&rsquo;s execution, in <code>ensureAuthenticated</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="nx">bridge</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;workerEvent&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">onWorkerEvent</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</pre></div>


<p>Your <code>onWorkerReady</code> should look like this :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">onWorkerReady</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">addClickListener</span><span class="p">()</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">clickedElementId</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">clickedElementId</span> <span class="o">===</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="kr">const</span> <span class="nx">login</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span>
            <span class="nx">usernameInputSelector</span>
          <span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span>
          <span class="kr">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">passwordInputSelector</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">value</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">bridge</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;workerEvent&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;loginSubmit&#39;</span><span class="p">,</span>
            <span class="nx">payload</span><span class="o">:</span> <span class="p">{</span> <span class="nx">login</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span>
          <span class="p">})</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">}</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForDomReady</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="p">(</span><span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">checkForElement</span><span class="p">(</span><span class="nx">usernameInputSelector</span><span class="p">))</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">checkForElement</span><span class="p">(</span><span class="nx">passwordInputSelector</span><span class="p">))</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
        <span class="s1">&#39;info&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Adding the click listener on the submit button&#39;</span>
      <span class="p">)</span>
      <span class="nx">addClickListener</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)()</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>


<p>Your <code>onWorkerEvent</code> should look like this :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">onWorkerEvent</span><span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">payload</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">===</span> <span class="s1">&#39;loginSubmit&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="p">{</span> <span class="nx">login</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">payload</span> <span class="o">||</span> <span class="p">{}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">login</span> <span class="o">&amp;&amp;</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;Credentials successfully intercepted&#39;</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">userCredentials</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">login</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>


<p>Check the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/1a6e71048a54750f86b62970beaac217ecaa7121">example commit</a> to see what a basic interception looks like.</p>
<h5 id="getuserdatafromwebsite"><code>getUserDataFromWebsite</code><a class="headerlink" href="#getuserdatafromwebsite" title="Permanent link">&para;</a></h5>
<p>Will check if there is any credentials intercepted or saved for this konnector to return a <code>sourceAccountIdentifier</code>(<code>SAI</code>). Priority is set on the login used by our user to log himself on the loginForm page. If it has been intercepted correctly or if this isn&rsquo;t the first run and it was already saved, we will find them respectively in <code>this.store</code> or returned by the <code>getCredentials</code> function. If for some reasons there is no intercepted or saved credentials, we will fallback on a handmade <code>worker</code>&lsquo;s function to find an <code>SAI</code> to scrape on the website. At this point, you will need to declare this new function in the <code>additionalExposedMethodsNames</code> array passed as argument to the <code>init</code> function for the pilot to call it properly.</p>
<p>It can look like this :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">getUserDataFromWebsite</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;🤖 getUserDataFromWebsite&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">getCredentials</span><span class="p">()</span>
    <span class="kr">const</span> <span class="nx">credentialsLogin</span> <span class="o">=</span> <span class="nx">credentials</span><span class="o">?</span><span class="p">.</span><span class="nx">login</span>
    <span class="kr">const</span> <span class="nx">storeLogin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="o">?</span><span class="p">.</span><span class="nx">userCredentials</span><span class="o">?</span><span class="p">.</span><span class="nx">login</span>
    <span class="kd">let</span> <span class="nx">sourceAccountIdentifier</span> <span class="o">=</span> <span class="nx">credentialsLogin</span> <span class="o">||</span> <span class="nx">storeLogin</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sourceAccountIdentifier</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sourceAccountIdentifier</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;findValidSAI&#39;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sourceAccountIdentifier</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Could not get a sourceAccountIdentifier&#39;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">sourceAccountIdentifier</span><span class="o">:</span> <span class="nx">sourceAccountIdentifier</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>


<p>A simple <code>findValidSAI</code> will be similar to this :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">findValidSAI</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;📍️ findValidSAI starts&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">usernameElementContent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">usernameSelector</span><span class="p">).</span><span class="nx">textContent</span>
    <span class="kr">const</span> <span class="nx">validSAI</span> <span class="o">=</span> <span class="nx">usernameElementContent</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">trim</span><span class="p">()</span>
    <span class="k">return</span> <span class="nx">validSAI</span>
  <span class="p">}</span>
</pre></div>


<p>Don&rsquo;t forget to add it to the <code>additionalExposedMethodsName</code> at the end of the file as follows :</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">connector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BookToScrapeContentScript</span><span class="p">();</span>
<span class="nx">connector</span>
  <span class="p">.</span><span class="nx">init</span><span class="p">({</span> <span class="nx">additionalExposedMethodsNames</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;findValidSAI&quot;</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</pre></div>


<p>Check the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/56ae90d7093a6c9263674a2783420311dcfbf8fb">example commit</a> to see how it is done.</p>
<p>Once we got a <code>sourceAccountIdentifier</code> to return, it is now time for proper scraping to retrieve wanted files &amp; data. So let&rsquo;s dive in <code>fetch</code> !</p>
<h5 id="fetch"><code>fetch</code><a class="headerlink" href="#fetch" title="Permanent link">&para;</a></h5>
<p>Where all the magic happens. It will be used to find and scrape the files and data to be stored in the cozy instance like invoices, attestations or user identity. We will navigate through the website to reach the pages containing the sought data. Again, there is several different ways to achieve this goal, but for the example we&rsquo;ll keep it purely scraping. We will need to create a new <code>worker</code>&lsquo;s function to be able to locate and retrieve the data.This new function will return the found data at the end of its execution to be saved on the cozy instance. Same will be done to fetch the user&rsquo;s identity.</p>
<p>We will start this function by saving credentials if any has been found.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">userCredentials</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveCredentials</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">userCredentials</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>Then we will make the first navigation to reach the page where we can find the sought data.</p>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="nx">homePageUrl</span><span class="p">);</span>
<span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForElementInWorker</span><span class="p">(</span><span class="nx">productCardSelector</span><span class="p">);</span>
</pre></div>


<p>We will check the number of available pages with another handmade <code>worker</code>&lsquo;s function (again, don&rsquo;t forget to declare it in the <code>init</code>&lsquo;s array argument so it became callable by the <code>pilot</code>). For example&rsquo;s sake in the <a href="https://github.com/konnectors/template_ccc/pull/78/commits/0d4f8f706bda079345bd754b066a048fc7c13eca">example PR</a>, we will not scrape the whole 50 pages of the website, so we&rsquo;re limiting the number of wanted pages.</p>
<div class="codehilite"><pre><span></span><span class="c1">// In fetch function</span>
<span class="kr">const</span> <span class="nx">numberOfPages</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getNumberOfPages&#39;</span><span class="p">)</span>
<span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`numberOfPages : </span><span class="si">${</span><span class="nx">numberOfPages</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>

<span class="c1">// Handmade worker function</span>
<span class="nx">async</span> <span class="nx">getNumberOfPages</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;📍️ getNumberOfPages starts&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">foundNumber</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">currentPageSelector</span><span class="p">).</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="nx">splitChar</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`Found </span><span class="si">${</span><span class="nx">foundNumber</span><span class="si">}</span><span class="sb"> pages`</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">foundNumber</span>
<span class="p">}</span>

<span class="c1">// Declaration</span>
<span class="kr">const</span> <span class="nx">connector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BookToScrapeContentScript</span><span class="p">()</span>
<span class="nx">connector</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">additionalExposedMethodsNames</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;findValidSAI&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumberOfPages&#39;</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>


<p>Using the number of found page, we will loop on another handmade <code>worker</code>&lsquo;s function to scrape and format the files. On each loop, the <code>worker</code> will get the files, format them, and return the files to the <code>pilot</code>. Then the <code>pilot</code> will push those files in an array that will be given to the <code>saveFiles</code> function to be saved in the cozy instance.</p>
<div class="codehilite"><pre><span></span><span class="c1">// Loop in fetch function</span>
<span class="kd">let</span> <span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="kr">const</span> <span class="nx">filesToSave</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">page</span> <span class="o">&lt;</span> <span class="nx">numberOfPages</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getFiles&#39;</span><span class="p">)</span>
        <span class="nx">filesToSave</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">files</span><span class="p">)</span>
    <span class="p">}</span>

<span class="c1">// Handmade worker function</span>
<span class="nx">async</span> <span class="nx">getFiles</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;📍️ getFiles starts&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">productCards</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.product_pod&#39;</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">pageFiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">productCard</span> <span class="k">of</span> <span class="nx">productCards</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">amount</span><span class="o">:</span> <span class="nx">normalizePrice</span><span class="p">(</span>
            <span class="nx">productCard</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.price_color&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">innerHTML</span>
            <span class="p">),</span>
            <span class="nx">date</span><span class="o">:</span> <span class="s1">&#39;2025-01-01&#39;</span><span class="p">,</span>
            <span class="nx">vendor</span><span class="o">:</span> <span class="s1">&#39;bookstoscrape&#39;</span><span class="p">,</span>
            <span class="nx">filename</span><span class="o">:</span> <span class="nx">productCard</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h3 a&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">),</span>
            <span class="nx">fileurl</span><span class="o">:</span><span class="s1">&#39;https://books.toscrape.com/&#39;</span> <span class="o">+</span> <span class="nx">productCard</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
            <span class="nx">vendorRef</span><span class="o">:</span> <span class="nx">productCard</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nx">pageFiles</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">product</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">pageFiles</span>
<span class="p">}</span>

<span class="c1">// Declaration</span>
<span class="kr">const</span> <span class="nx">connector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BookToScrapeContentScript</span><span class="p">()</span>
<span class="nx">connector</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">additionalExposedMethodsNames</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;findValidSAI&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumberOfPages&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getFiles&#39;</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>


<p>After that a new handmade <code>pilot</code>&lsquo;s function will navigate to the next page to scrape. This function does not need to be declared like the <code>worker</code>&lsquo;s, as they are directly accesible by the <code>pilot</code> to call. Nothing specific here, it will reach the wanted page number given in argument and will wait for the wanted selector to appear in the DOM.</p>
<div class="codehilite"><pre><span></span><span class="c1">// Loop in fetch function</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">page</span> <span class="o">&lt;</span> <span class="nx">numberOfPages</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getFiles&#39;</span><span class="p">)</span>
    <span class="nx">filesToSave</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">files</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">navigateToNextPage</span><span class="p">(</span><span class="nx">page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nx">page</span><span class="o">++</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`page end of loop : </span><span class="si">${</span><span class="nx">page</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handmade pilot function</span>
<span class="nx">async</span> <span class="nx">navigateToNextPage</span><span class="p">(</span><span class="nx">targetedPage</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;📍️ navigateToNextPage starts&#39;</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="sb">`https://books.toscrape.com/catalogue/page-</span><span class="si">${</span><span class="nx">targetedPage</span><span class="si">}</span><span class="sb">.html`</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForElementInWorker</span><span class="p">(</span><span class="sb">`a[href*=&quot;page-</span><span class="si">${</span><span class="nx">targetedPage</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="sb">.html&quot;]`</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`navigation to page </span><span class="si">${</span><span class="nx">targetedPage</span><span class="si">}</span><span class="sb"> completed`</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// No declaration needed here as it is a new `pilot` function</span>
</pre></div>


<p>After all the loops are completed, the fulfilled array is given to <code>saveFiles</code> function with the <code>context</code> , a <code>fileIdAttributes</code> set on a unique identifier for each file, and a <code>contentType</code> to tell the instance which type of file is saved as second argument.</p>
<p>And there we are, files has been saved on the instance and can be accessed in the instance&rsquo;s drive.</p>
<p>All good, now your <code>fetch</code> function should look something like this :</p>
<div class="codehilite"><pre><span></span><span class="nx">async</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;🤖 fetch&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">userCredentials</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveCredentials</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">.</span><span class="nx">userCredentials</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="nx">homePageUrl</span><span class="p">)</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">waitForElementInWorker</span><span class="p">(</span><span class="nx">productCardSelector</span><span class="p">)</span>
    <span class="kr">const</span> <span class="nx">numberOfPages</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getNumberOfPages&#39;</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`numberOfPages : </span><span class="si">${</span><span class="nx">numberOfPages</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="kr">const</span> <span class="nx">filesToSave</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">page</span> <span class="o">&lt;</span> <span class="nx">numberOfPages</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getFiles&#39;</span><span class="p">)</span>
        <span class="nx">filesToSave</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">files</span><span class="p">)</span>
        <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">navigateToNextPage</span><span class="p">(</span><span class="nx">page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="nx">page</span><span class="o">++</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="sb">`page end of loop : </span><span class="si">${</span><span class="nx">page</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveFiles</span><span class="p">(</span><span class="nx">filesToSave</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">context</span><span class="p">,</span>
        <span class="nx">fileIdAttributes</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vendorRef&#39;</span><span class="p">],</span>
        <span class="nx">contentType</span><span class="o">:</span> <span class="s1">&#39;image/jpeg&#39;</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>


<p>Last thing to do is to scrape the user&rsquo;s identity. For this the konnector will navigate to the personal infos page and the worker will scrape and return an object full of data to be saved on the instance. It is usually done at the very end of the execution because the priority is to get the files.</p>
<div class="codehilite"><pre><span></span><span class="c1">// In fetch function after files scraping and saving</span>
<span class="kr">const</span> <span class="nx">userIdentity</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">runInWorker</span><span class="p">(</span><span class="s1">&#39;getUserIdentity&#39;</span><span class="p">)</span>
<span class="nx">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveIdentity</span><span class="p">({</span> <span class="nx">contact</span><span class="o">:</span> <span class="nx">userIdentity</span> <span class="p">})</span>

<span class="c1">// Handmade worker function</span>
<span class="nx">async</span> <span class="nx">getUserIdentity</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;📍️ getUserIdentity starts&#39;</span><span class="p">)</span>
    <span class="c1">// There is no personal info page on the website, so we just show how the identity is supposed to be structured</span>
    <span class="kr">const</span> <span class="nx">identity</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">email</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;frodo.baggins@lotrmail.com&#39;</span><span class="p">],</span>
        <span class="nx">name</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">fullName</span><span class="o">:</span> <span class="s1">&#39;Frodo Baggins&#39;</span><span class="p">,</span>
            <span class="nx">givenName</span><span class="o">:</span> <span class="s1">&#39;Frodo&#39;</span><span class="p">,</span>
            <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Baggins&#39;</span>
        <span class="p">},</span>
        <span class="nx">address</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nx">formattedAddress</span><span class="o">:</span> <span class="s2">&quot;1 Bag-end street 99999 The Shire,</span>
<span class="s2">                street: &quot;</span><span class="mi">1</span> <span class="nx">Bag</span><span class="o">-</span><span class="nx">end</span> <span class="nx">street</span><span class="s2">&quot;,</span>
<span class="s2">                postCode: &quot;</span><span class="mi">99999</span><span class="s2">&quot;,</span>
<span class="s2">                city: &quot;</span><span class="nx">The</span> <span class="nx">Shire</span><span class="s2">&quot;</span>
<span class="s2">            }</span>
<span class="s2">        ],</span>
<span class="s2">        phone:[</span>
<span class="s2">            {</span>
<span class="s2">                type: &#39;home&#39;,</span>
<span class="s2">                number: &quot;</span><span class="mi">0423156789</span><span class="s2">&quot;</span>
<span class="s2">            },</span>
<span class="s2">            {</span>
<span class="s2">                type: &#39;mobile&#39;,</span>
<span class="s2">                number: &quot;</span><span class="mi">0623451789</span><span class="err">&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">identity</span>
<span class="p">}</span>

<span class="c1">// Declaration</span>
<span class="kr">const</span> <span class="nx">connector</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BookToScrapeContentScript</span><span class="p">()</span>
<span class="nx">connector</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">additionalExposedMethodsNames</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;findValidSAI&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumberOfPages&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getFiles&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getUserIdentity&#39;</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">log</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>


<p>And here we are, we have a brand new konnector for books.toscrape.com ready to be released.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../installation/" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installation
              </span>
            </div>
          </a>
        
        
          <a href="../clisk-lib-doc/" title="Library Documentation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Library Documentation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="/en/privacy">privacy</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.2.3",url:{base:"../../.."}})</script>
      
        <script src="../../../extra.js"></script>
      
    
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="https://matomo.cozycloud.cc/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '25']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->

  </body>
</html>